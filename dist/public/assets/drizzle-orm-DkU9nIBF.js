var hi=Object.defineProperty;var yi=(r,e,t)=>e in r?hi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var s=(r,e,t)=>yi(r,typeof e!="symbol"?e+"":e,t);const i=Symbol.for("drizzle:entityKind");function w(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,i))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(i in t&&t[i]===e[i])return!0;t=Object.getPrototypeOf(t)}return!1}var H;H=i;class I{constructor(e,t){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(I,H,"Column");var X;X=i;class Ln{constructor(e,t,n){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(Ln,X,"ColumnBuilder");const D=Symbol.for("drizzle:Name");var Y;Y=i;class Qn{constructor(e,t){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:u,foreignColumns:a}=e();return{name:n,columns:u,foreignTable:a[0].table,foreignColumns:a}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new In(e,this)}}s(Qn,Y,"PgForeignKeyBuilder");var Z;Z=i;class In{constructor(e,t){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:n}=this.reference(),u=t.map(p=>p.name),a=n.map(p=>p.name),f=[this.table[D],...u,n[0].table[D],...a];return e??`${f.join("_")}_fk`}}s(In,Z,"PgForeignKey");function bi(r,...e){return r(...e)}function Pi(r,e){return`${r[D]}_${e.join("_")}_unique`}function K(r,e,t){for(let n=e;n<r.length;n++){const u=r[n];if(u==="\\"){n++;continue}if(u==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(u===","||u==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function qn(r,e=0){const t=[];let n=e,u=!1;for(;n<r.length;){const a=r[n];if(a===","){(u||n===e)&&t.push(""),u=!0,n++;continue}if(u=!1,a==="\\"){n+=2;continue}if(a==='"'){const[g,d]=K(r,n+1,!0);t.push(g),n=d;continue}if(a==="}")return[t,n+1];if(a==="{"){const[g,d]=qn(r,n+1);t.push(g),n=d;continue}const[f,p]=K(r,n,!1);t.push(f),n=p}return[t,n]}function wi(r){const[e]=qn(r,1);return e}function $n(r){return`{${r.map(e=>Array.isArray(e)?$n(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var k,ee;class c extends(ee=Ln,k=i,ee){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(t){return new jn(this.config.name,this,t)}references(t,n={}){return this.foreignKeyConfigs.push({ref:t,actions:n}),this}unique(t,n){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,n){return this.foreignKeyConfigs.map(({ref:u,actions:a})=>bi((f,p)=>{const g=new Qn(()=>{const d=f();return{columns:[t],foreignColumns:[d]}});return p.onUpdate&&g.onUpdate(p.onUpdate),p.onDelete&&g.onDelete(p.onDelete),g.build(n)},u,a))}buildExtraConfigColumn(t){return new An(t,this.config)}}s(c,k,"PgColumnBuilder");var te,re;class l extends(re=I,te=i,re){constructor(e,t){t.uniqueName||(t.uniqueName=Pi(e,[t.name])),super(e,t),this.table=e}}s(l,te,"PgColumn");var ne,se;class An extends(se=l,ne=i,se){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}s(An,ne,"ExtraConfigColumn");var ie,oe;class jn extends(oe=c,ie=i,oe){constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){const t=this.config.baseBuilder.build(e);return new j(e,this.config,t)}}s(jn,ie,"PgArrayBuilder");var ae,ue;const Q=class Q extends(ue=l,ae=i,ue){constructor(t,n,u,a){super(t,n);s(this,"size");this.baseColumn=u,this.range=a,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=wi(t)),t.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(t,n=!1){const u=t.map(a=>a===null?null:w(this.baseColumn,Q)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return n?u:$n(u)}};s(Q,ae,"PgArray");let j=Q;const J=Symbol.for("drizzle:isPgEnum");function Si(r){return!!r&&typeof r=="function"&&J in r&&r[J]===!0}var le;le=i;class U{constructor(e,t,n,u=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:u}}}s(U,le,"Subquery");const Ti={startActiveSpan(r,e){return e()}},C=Symbol.for("drizzle:ViewBaseConfig"),q=Symbol.for("drizzle:Schema"),R=Symbol.for("drizzle:Columns"),_=Symbol.for("drizzle:ExtraConfigColumns"),$=Symbol.for("drizzle:OriginalName"),A=Symbol.for("drizzle:BaseName"),V=Symbol.for("drizzle:IsAlias"),G=Symbol.for("drizzle:ExtraConfigBuilder"),On=Symbol.for("drizzle:IsDrizzleTable");var ce,me,ge,de,pe,fe,he,ye,be,Pe;Pe=i,be=D,ye=$,he=q,fe=R,pe=_,de=A,ge=V,me=On,ce=G;class P{constructor(e,t,n){s(this,be);s(this,ye);s(this,he);s(this,fe);s(this,pe);s(this,de);s(this,ge,!1);s(this,me,!0);s(this,ce);this[D]=this[$]=e,this[q]=t,this[A]=n}}s(P,Pe,"Table"),s(P,"Symbol",{Name:D,Schema:q,OriginalName:$,Columns:R,ExtraConfigColumns:_,BaseName:A,IsAlias:V,ExtraConfigBuilder:G});function ao(r){return typeof r=="object"&&r!==null&&On in r}function xi(r){return r!=null&&typeof r.getSQL=="function"}function Di(r){var t;const e={sql:"",params:[]};for(const n of r)e.sql+=n.sql,e.params.push(...n.params),(t=n.typings)!=null&&t.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var we;we=i;class S{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new b([this])}}s(S,we,"StringChunk");var Se;Se=i;const x=class x{constructor(e){s(this,"decoder",Un);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ti.startActiveSpan("drizzle.buildSQL",t=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return t==null||t.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){const n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:u,escapeName:a,escapeParam:f,prepareTyping:p,inlineParams:g,paramStartIndex:d}=n;return Di(e.map(o=>{var T;if(w(o,S))return{sql:o.value.join(""),params:[]};if(w(o,F))return{sql:a(o.value),params:[]};if(o===void 0)return{sql:"",params:[]};if(Array.isArray(o)){const m=[new S("(")];for(const[h,fi]of o.entries())m.push(fi),h<o.length-1&&m.push(new S(", "));return m.push(new S(")")),this.buildQueryFromSourceParams(m,n)}if(w(o,x))return this.buildQueryFromSourceParams(o.queryChunks,{...n,inlineParams:g||o.shouldInlineParams});if(w(o,P)){const m=o[P.Symbol.Schema],h=o[P.Symbol.Name];return{sql:m===void 0||o[V]?a(h):a(m)+"."+a(h),params:[]}}if(w(o,I)){const m=u.getColumnCasing(o);if(t.invokeSource==="indexes")return{sql:a(m),params:[]};const h=o.table[P.Symbol.Schema];return{sql:o.table[V]||h===void 0?a(o.table[P.Symbol.Name])+"."+a(m):a(h)+"."+a(o.table[P.Symbol.Name])+"."+a(m),params:[]}}if(w(o,Jn)){const m=o[C].schema,h=o[C].name;return{sql:m===void 0||o[C].isAlias?a(h):a(m)+"."+a(h),params:[]}}if(w(o,E)){if(w(o.value,v))return{sql:f(d.value++,o),params:[o],typings:["none"]};const m=o.value===null?null:o.encoder.mapToDriverValue(o.value);if(w(m,x))return this.buildQueryFromSourceParams([m],n);if(g)return{sql:this.mapInlineParam(m,n),params:[]};let h=["none"];return p&&(h=[p(o.encoder)]),{sql:f(d.value++,m),params:[m],typings:h}}return w(o,v)?{sql:f(d.value++,o),params:[o],typings:["none"]}:w(o,x.Aliased)&&o.fieldAlias!==void 0?{sql:a(o.fieldAlias),params:[]}:w(o,U)?o._.isWith?{sql:a(o._.alias),params:[]}:this.buildQueryFromSourceParams([new S("("),o._.sql,new S(") "),new F(o._.alias)],n):Si(o)?o.schema?{sql:a(o.schema)+"."+a(o.enumName),params:[]}:{sql:a(o.enumName),params:[]}:xi(o)?(T=o.shouldOmitSQLParens)!=null&&T.call(o)?this.buildQueryFromSourceParams([o.getSQL()],n):this.buildQueryFromSourceParams([new S("("),o.getSQL(),new S(")")],n):g?{sql:this.mapInlineParam(o,n),params:[]}:{sql:f(d.value++,o),params:[o],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new x.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(x,Se,"SQL");let b=x;var Te;Te=i;class F{constructor(e){s(this,"brand");this.value=e}getSQL(){return new b([this])}}s(F,Te,"Name");const Un={mapFromDriverValue:r=>r},En={mapToDriverValue:r=>r};({...Un,...En});var xe;xe=i;class E{constructor(e,t=En){s(this,"brand");this.value=e,this.encoder=t}getSQL(){return new b([this])}}s(E,xe,"Param");function z(r,...e){const t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new S(r[0]));for(const[n,u]of e.entries())t.push(u,new S(r[n+1]));return new b(t)}(r=>{function e(){return new b([])}r.empty=e;function t(g){return new b(g)}r.fromList=t;function n(g){return new b([new S(g)])}r.raw=n;function u(g,d){const o=[];for(const[T,m]of g.entries())T>0&&d!==void 0&&o.push(d),o.push(m);return new b(o)}r.join=u;function a(g){return new F(g)}r.identifier=a;function f(g){return new v(g)}r.placeholder=f;function p(g,d){return new E(g,d)}r.param=p})(z||(z={}));(r=>{var t;t=i;const n=class n{constructor(a,f){s(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=f}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};s(n,t,"SQL.Aliased");let e=n;r.Aliased=e})(b||(b={}));var De;De=i;class v{constructor(e){this.name=e}getSQL(){return new b([this])}}s(v,De,"Placeholder");const Kn=Symbol.for("drizzle:IsDrizzleView");var Ce,Ne,Be;Be=i,Ne=C,Ce=Kn;class Jn{constructor({name:e,schema:t,selectedFields:n,query:u}){s(this,Ne);s(this,Ce,!0);this[C]={name:e,originalName:e,schema:t,selectedFields:n,query:u,isExisting:!u,isAlias:!1}}getSQL(){return new b([this])}}s(Jn,Be,"View");function uo(r){return typeof r=="object"&&r!==null&&Kn in r}I.prototype.getSQL=function(){return new b([this])};P.prototype.getSQL=function(){return new b([this])};U.prototype.getSQL=function(){return new b([this])};function lo(r){return r[P.Symbol.Columns]}function co(r){return r[C].selectedFields}function y(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}var Ve,Fe;class B extends(Fe=c,Ve=i,Fe){generatedAlwaysAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(B,Ve,"PgIntColumnBaseBuilder");var ze,ve;class Rn extends(ve=B,ze=i,ve){constructor(e){super(e,"number","PgBigInt53")}build(e){return new _n(e,this.config)}}s(Rn,ze,"PgBigInt53Builder");var Le,Qe;class _n extends(Qe=l,Le=i,Qe){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(_n,Le,"PgBigInt53");var Ie,qe;class Gn extends(qe=B,Ie=i,qe){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Mn(e,this.config)}}s(Gn,Ie,"PgBigInt64Builder");var $e,Ae;class Mn extends(Ae=l,$e=i,Ae){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(Mn,$e,"PgBigInt64");function Ci(r,e){const{name:t,config:n}=y(r,e);return n.mode==="number"?new Rn(t):new Gn(t)}var je,Oe;class Wn extends(Oe=c,je=i,Oe){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Hn(e,this.config)}}s(Wn,je,"PgBigSerial53Builder");var Ue,Ee;class Hn extends(Ee=l,Ue=i,Ee){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Hn,Ue,"PgBigSerial53");var Ke,Je;class Xn extends(Je=c,Ke=i,Je){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Yn(e,this.config)}}s(Xn,Ke,"PgBigSerial64Builder");var Re,_e;class Yn extends(_e=l,Re=i,_e){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(Yn,Re,"PgBigSerial64");function Ni(r,e){const{name:t,config:n}=y(r,e);return n.mode==="number"?new Wn(t):new Xn(t)}var Ge,Me;class Zn extends(Me=c,Ge=i,Me){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new kn(e,this.config)}}s(Zn,Ge,"PgBooleanBuilder");var We,He;class kn extends(He=l,We=i,He){getSQLType(){return"boolean"}}s(kn,We,"PgBoolean");function Bi(r){return new Zn(r??"")}var Xe,Ye;class es extends(Ye=c,Xe=i,Ye){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new ts(e,this.config)}}s(es,Xe,"PgCharBuilder");var Ze,ke;class ts extends(ke=l,Ze=i,ke){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(ts,Ze,"PgChar");function Vi(r,e={}){const{name:t,config:n}=y(r,e);return new es(t,n)}var et,tt;class rs extends(tt=c,et=i,tt){constructor(e){super(e,"string","PgCidr")}build(e){return new ns(e,this.config)}}s(rs,et,"PgCidrBuilder");var rt,nt;class ns extends(nt=l,rt=i,nt){getSQLType(){return"cidr"}}s(ns,rt,"PgCidr");function Fi(r){return new rs(r??"")}var st,it;class ss extends(it=c,st=i,it){constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new is(e,this.config)}}s(ss,st,"PgCustomColumnBuilder");var ot,at;class is extends(at=l,ot=i,at){constructor(t,n){super(t,n);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}s(is,ot,"PgCustomColumn");function zi(r){return(e,t)=>{const{name:n,config:u}=y(e,t);return new ss(n,u,r)}}var ut,lt;class N extends(lt=c,ut=i,lt){defaultNow(){return this.default(z`now()`)}}s(N,ut,"PgDateColumnBaseBuilder");var ct,mt;class os extends(mt=N,ct=i,mt){constructor(e){super(e,"date","PgDate")}build(e){return new as(e,this.config)}}s(os,ct,"PgDateBuilder");var gt,dt;class as extends(dt=l,gt=i,dt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(as,gt,"PgDate");var pt,ft;class us extends(ft=N,pt=i,ft){constructor(e){super(e,"string","PgDateString")}build(e){return new ls(e,this.config)}}s(us,pt,"PgDateStringBuilder");var ht,yt;class ls extends(yt=l,ht=i,yt){getSQLType(){return"date"}}s(ls,ht,"PgDateString");function vi(r,e){const{name:t,config:n}=y(r,e);return(n==null?void 0:n.mode)==="date"?new os(t):new us(t)}var bt,Pt;class cs extends(Pt=c,bt=i,Pt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new ms(e,this.config)}}s(cs,bt,"PgDoublePrecisionBuilder");var wt,St;class ms extends(St=l,wt=i,St){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(ms,wt,"PgDoublePrecision");function Li(r){return new cs(r??"")}var Tt,xt;class gs extends(xt=c,Tt=i,xt){constructor(e){super(e,"string","PgInet")}build(e){return new ds(e,this.config)}}s(gs,Tt,"PgInetBuilder");var Dt,Ct;class ds extends(Ct=l,Dt=i,Ct){getSQLType(){return"inet"}}s(ds,Dt,"PgInet");function Qi(r){return new gs(r??"")}var Nt,Bt;class ps extends(Bt=B,Nt=i,Bt){constructor(e){super(e,"number","PgInteger")}build(e){return new fs(e,this.config)}}s(ps,Nt,"PgIntegerBuilder");var Vt,Ft;class fs extends(Ft=l,Vt=i,Ft){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(fs,Vt,"PgInteger");function Ii(r){return new ps(r??"")}var zt,vt;class hs extends(vt=c,zt=i,vt){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new ys(e,this.config)}}s(hs,zt,"PgIntervalBuilder");var Lt,Qt;class ys extends(Qt=l,Lt=i,Qt){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const t=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${t}${n}`}}s(ys,Lt,"PgInterval");function qi(r,e={}){const{name:t,config:n}=y(r,e);return new hs(t,n)}var It,qt;class bs extends(qt=c,It=i,qt){constructor(e){super(e,"json","PgJson")}build(e){return new Ps(e,this.config)}}s(bs,It,"PgJsonBuilder");var $t,At;class Ps extends(At=l,$t=i,At){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Ps,$t,"PgJson");function $i(r){return new bs(r??"")}var jt,Ot;class ws extends(Ot=c,jt=i,Ot){constructor(e){super(e,"json","PgJsonb")}build(e){return new Ss(e,this.config)}}s(ws,jt,"PgJsonbBuilder");var Ut,Et;class Ss extends(Et=l,Ut=i,Et){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Ss,Ut,"PgJsonb");function Ai(r){return new ws(r??"")}var Kt,Jt;class Ts extends(Jt=c,Kt=i,Jt){constructor(e){super(e,"array","PgLine")}build(e){return new xs(e,this.config)}}s(Ts,Kt,"PgLineBuilder");var Rt,_t;class xs extends(_t=l,Rt=i,_t){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,u]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(u)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(xs,Rt,"PgLine");var Gt,Mt;class Ds extends(Mt=c,Gt=i,Mt){constructor(e){super(e,"json","PgLineABC")}build(e){return new Cs(e,this.config)}}s(Ds,Gt,"PgLineABCBuilder");var Wt,Ht;class Cs extends(Ht=l,Wt=i,Ht){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,u]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(u)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(Cs,Wt,"PgLineABC");function ji(r,e){const{name:t,config:n}=y(r,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Ts(t):new Ds(t)}var Xt,Yt;class Ns extends(Yt=c,Xt=i,Yt){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Bs(e,this.config)}}s(Ns,Xt,"PgMacaddrBuilder");var Zt,kt;class Bs extends(kt=l,Zt=i,kt){getSQLType(){return"macaddr"}}s(Bs,Zt,"PgMacaddr");function Oi(r){return new Ns(r??"")}var er,tr;class Vs extends(tr=c,er=i,tr){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Fs(e,this.config)}}s(Vs,er,"PgMacaddr8Builder");var rr,nr;class Fs extends(nr=l,rr=i,nr){getSQLType(){return"macaddr8"}}s(Fs,rr,"PgMacaddr8");function Ui(r){return new Vs(r??"")}var sr,ir;class zs extends(ir=c,sr=i,ir){constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new vs(e,this.config)}}s(zs,sr,"PgNumericBuilder");var or,ar;class vs extends(ar=l,or=i,ar){constructor(t,n){super(t,n);s(this,"precision");s(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(vs,or,"PgNumeric");function Ei(r,e){const{name:t,config:n}=y(r,e);return new zs(t,n==null?void 0:n.precision,n==null?void 0:n.scale)}var ur,lr;class Ls extends(lr=c,ur=i,lr){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Qs(e,this.config)}}s(Ls,ur,"PgPointTupleBuilder");var cr,mr;class Qs extends(mr=l,cr=i,mr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(Qs,cr,"PgPointTuple");var gr,dr;class Is extends(dr=c,gr=i,dr){constructor(e){super(e,"json","PgPointObject")}build(e){return new qs(e,this.config)}}s(Is,gr,"PgPointObjectBuilder");var pr,fr;class qs extends(fr=l,pr=i,fr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(qs,pr,"PgPointObject");function Ki(r,e){const{name:t,config:n}=y(r,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Ls(t):new Is(t)}function Ji(r){const e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function M(r,e){const t=new ArrayBuffer(8),n=new DataView(t);for(let u=0;u<8;u++)n.setUint8(u,r[e+u]);return n.getFloat64(0,!0)}function $s(r){const e=Ji(r);let t=0;const n=e[t];t+=1;const u=new DataView(e.buffer),a=u.getUint32(t,n===1);if(t+=4,a&536870912&&(u.getUint32(t,n===1),t+=4),(a&65535)===1){const f=M(e,t);t+=8;const p=M(e,t);return t+=8,[f,p]}throw new Error("Unsupported geometry type")}var hr,yr;class As extends(yr=c,hr=i,yr){constructor(e){super(e,"array","PgGeometry")}build(e){return new js(e,this.config)}}s(As,hr,"PgGeometryBuilder");var br,Pr;class js extends(Pr=l,br=i,Pr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return $s(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(js,br,"PgGeometry");var wr,Sr;class Os extends(Sr=c,wr=i,Sr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Us(e,this.config)}}s(Os,wr,"PgGeometryObjectBuilder");var Tr,xr;class Us extends(xr=l,Tr=i,xr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=$s(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(Us,Tr,"PgGeometryObject");function Ri(r,e){const{name:t,config:n}=y(r,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new As(t):new Os(t)}var Dr,Cr;class Es extends(Cr=c,Dr=i,Cr){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new Ks(e,this.config)}}s(Es,Dr,"PgRealBuilder");var Nr,Br;class Ks extends(Br=l,Nr=i,Br){constructor(t,n){super(t,n);s(this,"mapFromDriverValue",t=>typeof t=="string"?Number.parseFloat(t):t)}getSQLType(){return"real"}}s(Ks,Nr,"PgReal");function _i(r){return new Es(r??"")}var Vr,Fr;class Js extends(Fr=c,Vr=i,Fr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Rs(e,this.config)}}s(Js,Vr,"PgSerialBuilder");var zr,vr;class Rs extends(vr=l,zr=i,vr){getSQLType(){return"serial"}}s(Rs,zr,"PgSerial");function Gi(r){return new Js(r??"")}var Lr,Qr;class _s extends(Qr=B,Lr=i,Qr){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Gs(e,this.config)}}s(_s,Lr,"PgSmallIntBuilder");var Ir,qr;class Gs extends(qr=l,Ir=i,qr){constructor(){super(...arguments);s(this,"mapFromDriverValue",t=>typeof t=="string"?Number(t):t)}getSQLType(){return"smallint"}}s(Gs,Ir,"PgSmallInt");function Mi(r){return new _s(r??"")}var $r,Ar;class Ms extends(Ar=c,$r=i,Ar){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ws(e,this.config)}}s(Ms,$r,"PgSmallSerialBuilder");var jr,Or;class Ws extends(Or=l,jr=i,Or){getSQLType(){return"smallserial"}}s(Ws,jr,"PgSmallSerial");function Wi(r){return new Ms(r??"")}var Ur,Er;class Hs extends(Er=c,Ur=i,Er){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Xs(e,this.config)}}s(Hs,Ur,"PgTextBuilder");var Kr,Jr;class Xs extends(Jr=l,Kr=i,Jr){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(Xs,Kr,"PgText");function Hi(r,e={}){const{name:t,config:n}=y(r,e);return new Hs(t,n)}var Rr,_r;class Ys extends(_r=N,Rr=i,_r){constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new Zs(e,this.config)}}s(Ys,Rr,"PgTimeBuilder");var Gr,Mr;class Zs extends(Mr=l,Gr=i,Mr){constructor(t,n){super(t,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Zs,Gr,"PgTime");function Xi(r,e={}){const{name:t,config:n}=y(r,e);return new Ys(t,n.withTimezone??!1,n.precision)}var Wr,Hr;class ks extends(Hr=N,Wr=i,Hr){constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new ei(e,this.config)}}s(ks,Wr,"PgTimestampBuilder");var Xr,Yr;class ei extends(Yr=l,Xr=i,Yr){constructor(t,n){super(t,n);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));s(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(ei,Xr,"PgTimestamp");var Zr,kr;class ti extends(kr=N,Zr=i,kr){constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new ri(e,this.config)}}s(ti,Zr,"PgTimestampStringBuilder");var en,tn;class ri extends(tn=l,en=i,tn){constructor(t,n){super(t,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(ri,en,"PgTimestampString");function Yi(r,e={}){const{name:t,config:n}=y(r,e);return(n==null?void 0:n.mode)==="string"?new ti(t,n.withTimezone??!1,n.precision):new ks(t,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var rn,nn;class ni extends(nn=c,rn=i,nn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(z`gen_random_uuid()`)}build(e){return new si(e,this.config)}}s(ni,rn,"PgUUIDBuilder");var sn,on;class si extends(on=l,sn=i,on){getSQLType(){return"uuid"}}s(si,sn,"PgUUID");function Zi(r){return new ni(r??"")}var an,un;class ii extends(un=c,an=i,un){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new oi(e,this.config)}}s(ii,an,"PgVarcharBuilder");var ln,cn;class oi extends(cn=l,ln=i,cn){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(oi,ln,"PgVarchar");function ki(r,e={}){const{name:t,config:n}=y(r,e);return new ii(t,n)}var mn,gn;class ai extends(gn=c,mn=i,gn){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new ui(e,this.config)}}s(ai,mn,"PgBinaryVectorBuilder");var dn,pn;class ui extends(pn=l,dn=i,pn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(ui,dn,"PgBinaryVector");function eo(r,e){const{name:t,config:n}=y(r,e);return new ai(t,n)}var fn,hn;class li extends(hn=c,fn=i,hn){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new ci(e,this.config)}}s(li,fn,"PgHalfVectorBuilder");var yn,bn;class ci extends(bn=l,yn=i,bn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(ci,yn,"PgHalfVector");function to(r,e){const{name:t,config:n}=y(r,e);return new li(t,n)}var Pn,wn;class mi extends(wn=c,Pn=i,wn){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new gi(e,this.config)}}s(mi,Pn,"PgSparseVectorBuilder");var Sn,Tn;class gi extends(Tn=l,Sn=i,Tn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(gi,Sn,"PgSparseVector");function ro(r,e){const{name:t,config:n}=y(r,e);return new mi(t,n)}var xn,Dn;class di extends(Dn=c,xn=i,Dn){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new pi(e,this.config)}}s(di,xn,"PgVectorBuilder");var Cn,Nn;class pi extends(Nn=l,Cn=i,Nn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(pi,Cn,"PgVector");function no(r,e){const{name:t,config:n}=y(r,e);return new di(t,n)}function so(){return{bigint:Ci,bigserial:Ni,boolean:Bi,char:Vi,cidr:Fi,customType:zi,date:vi,doublePrecision:Li,inet:Qi,integer:Ii,interval:qi,json:$i,jsonb:Ai,line:ji,macaddr:Oi,macaddr8:Ui,numeric:Ei,point:Ki,geometry:Ri,real:_i,serial:Gi,smallint:Mi,smallserial:Wi,text:Hi,time:Xi,timestamp:Yi,uuid:Zi,varchar:ki,bit:eo,halfvec:to,sparsevec:ro,vector:no}}const O=Symbol.for("drizzle:PgInlineForeignKeys"),W=Symbol.for("drizzle:EnableRLS");var Bn,Vn,Fn,zn,vn;class L extends(vn=P,zn=i,Fn=O,Vn=W,Bn=P.Symbol.ExtraConfigBuilder,vn){constructor(){super(...arguments);s(this,Fn,[]);s(this,Vn,!1);s(this,Bn)}}s(L,zn,"PgTable"),s(L,"Symbol",Object.assign({},P.Symbol,{InlineForeignKeys:O,EnableRLS:W}));function io(r,e,t,n,u=r){const a=new L(r,n,u),f=typeof e=="function"?e(so()):e,p=Object.fromEntries(Object.entries(f).map(([o,T])=>{const m=T;m.setName(o);const h=m.build(a);return a[O].push(...m.buildForeignKeys(h,a)),[o,h]})),g=Object.fromEntries(Object.entries(f).map(([o,T])=>{const m=T;m.setName(o);const h=m.buildExtraConfigColumn(a);return[o,h]})),d=Object.assign(a,p);return d[P.Symbol.Columns]=p,d[P.Symbol.ExtraConfigColumns]=g,Object.assign(d,{enableRLS:()=>(d[L.Symbol.EnableRLS]=!0,d)})}const mo=(r,e,t)=>io(r,e,t,void 0);export{I as C,b as S,co as a,w as b,uo as c,Yi as d,Ii as e,lo as g,ao as i,Ai as j,mo as p,Gi as s,Hi as t};
