const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CallHistory-ChEkosKA.js","assets/react-BlJs-Rj_.js","assets/@daily-co-CRt2XSsO.js","assets/@tanstack-H40tjzcj.js","assets/wouter-DSgBA37d.js","assets/regexparam-CPXopyEH.js","assets/use-sync-external-store-T8uco2Ip.js","assets/CallDetails-CHM_Q-IP.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,R as re}from"./react-BlJs-Rj_.js";import{R as ge,c as Xe}from"./react-dom-qFx4IFJ8.js";import{L as Ne,S as Ye,R as se}from"./wouter-DSgBA37d.js";import{V as $e,R as Se,A as ke,C as Ce,T as Te,D as Re,P as Ue,S as Ge}from"./@radix-ui-B3NMiK-C.js";import{c as Me}from"./class-variance-authority-Dp3B9jqt.js";import{c as Ke}from"./clsx-B-dksMZM.js";import{t as Je}from"./tailwind-merge-D696Ktp4.js";import{X as Ze,H as Qe,C as et}from"./lucide-react-CxnTV3od.js";import{_ as tt}from"./@vapi-ai-DrvmIiYL.js";import{F as st,a as De,b as nt}from"./react-icons-BiSlUIlK.js";import{u as ot}from"./react-i18next-BARrJHJ1.js";import{S as rt,N as it,P as at,A as ct,a as lt}from"./swiper-CfFrfE8b.js";import{u as dt}from"./react-router-DvHbwIsR.js";import{B as mt}from"./react-router-dom-BMXKYxTf.js";import{Q as ut,a as ht}from"./@tanstack-H40tjzcj.js";import"./@daily-co-CRt2XSsO.js";import"./scheduler-DYLXRpC5.js";import"./regexparam-CPXopyEH.js";import"./use-sync-external-store-T8uco2Ip.js";import"./events-CXH2uRM3.js";import"./@remix-run-DBo92Irb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const u of m.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function r(i){if(i.ep)return;i.ep=!0;const m=s(i);fetch(i.href,m)}})();const xt="modulepreload",pt=function(n){return"/"+n},be={},Ae=function(t,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(s.map(h=>{if(h=pt(h),h in be)return;be[h]=!0;const j=h.endsWith(".css"),v=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const _=document.createElement("link");if(_.rel=j?"stylesheet":xt,j||(_.as="script"),_.crossOrigin="",_.href=h,c&&_.setAttribute("nonce",c),document.head.appendChild(_),j)return new Promise((A,C)=>{_.addEventListener("load",A),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function m(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return i.then(u=>{for(const c of u||[])c.status==="rejected"&&m(c.reason);return t().catch(m)})};class ft extends a.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("Uncaught error in component tree:",t,s)}render(){return this.state.hasError?e.jsx("div",{className:"flex items-center justify-center h-screen p-4 bg-gray-50",children:e.jsxs("div",{className:"max-w-md text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Something went wrong."}),e.jsx("p",{className:"text-gray-700 mb-4",children:"An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reload Page"})]})}):this.props.children}}const gt=1,bt=1e6;let he=0;function _t(){return he=(he+1)%Number.MAX_SAFE_INTEGER,he.toString()}const xe=new Map,_e=n=>{if(xe.has(n))return;const t=setTimeout(()=>{xe.delete(n),oe({type:"REMOVE_TOAST",toastId:n})},bt);xe.set(n,t)},yt=(n,t)=>{switch(t.type){case"ADD_TOAST":return{...n,toasts:[t.toast,...n.toasts].slice(0,gt)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?_e(s):n.toasts.forEach(r=>{_e(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==t.toastId)}}},ce=[];let le={toasts:[]};function oe(n){le=yt(le,n),ce.forEach(t=>{t(le)})}function vt({...n}){const t=_t(),s=i=>oe({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>oe({type:"DISMISS_TOAST",toastId:t});return oe({type:"ADD_TOAST",toast:{...n,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:s}}function wt(){const[n,t]=a.useState(le);return a.useEffect(()=>(ce.push(t),()=>{const s=ce.indexOf(t);s>-1&&ce.splice(s,1)}),[n]),{...n,toast:vt,dismiss:s=>oe({type:"DISMISS_TOAST",toastId:s})}}function G(...n){return Je(Ke(n))}const jt=Ue,Ie=a.forwardRef(({className:n,...t},s)=>e.jsx($e,{ref:s,className:G("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...t}));Ie.displayName=$e.displayName;const Nt=Me("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-dark",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ee=a.forwardRef(({className:n,variant:t,...s},r)=>e.jsx(Se,{ref:r,className:G(Nt({variant:t}),n),...s}));Ee.displayName=Se.displayName;const $t=a.forwardRef(({className:n,...t},s)=>e.jsx(ke,{ref:s,className:G("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...t}));$t.displayName=ke.displayName;const Pe=a.forwardRef(({className:n,...t},s)=>e.jsx(Ce,{ref:s,className:G("absolute right-2 top-2 rounded-md p-1 text-dark/50 opacity-0 transition-opacity hover:text-dark focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...t,children:e.jsx(Ze,{className:"h-4 w-4"})}));Pe.displayName=Ce.displayName;const Oe=a.forwardRef(({className:n,...t},s)=>e.jsx(Te,{ref:s,className:G("text-sm font-semibold",n),...t}));Oe.displayName=Te.displayName;const Fe=a.forwardRef(({className:n,...t},s)=>e.jsx(Re,{ref:s,className:G("text-sm opacity-90",n),...t}));Fe.displayName=Re.displayName;function St(){const{toasts:n}=wt();return e.jsxs(jt,{children:[n.map(function({id:t,title:s,description:r,action:i,...m}){return e.jsxs(Ee,{...m,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(Oe,{children:s}),r&&e.jsx(Fe,{children:r})]}),i,e.jsx(Pe,{})]},t)}),e.jsx(Ie,{})]})}const kt=!1;let K=null;const Le=async n=>{try{return K||(K=new tt(n),K.on("call-start",()=>{console.log("Call started")}),K.on("call-end",()=>{console.log("Call ended")}),K.on("speech-start",()=>{console.log("Speech started")}),K.on("speech-end",()=>{console.log("Speech ended")}),K.on("volume-level",t=>{console.log(`Volume level: ${t}`)}),K.on("message",t=>{console.log("Message received:",t)}),K.on("error",t=>{console.error("Error:",t)}),K)}catch(t){throw console.error("Failed to initialize Vapi:",t),t}},ae=()=>K,Ct={orderType:"Room Service",deliveryTime:"asap",roomNumber:"",guestName:"",guestEmail:"",guestPhone:"",specialInstructions:"",items:[{id:"1",name:"Club Sandwich",description:"Served with french fries and side salad",quantity:1,price:15},{id:"2",name:"Fresh Orange Juice",description:"Large size",quantity:1,price:8}],totalAmount:23},Be=a.createContext(void 0);function ze({children:n}){const[t,s]=a.useState("interface1"),[r,i]=a.useState([]),[m,u]=a.useState(null),[c,h]=a.useState(null),[j,v]=a.useState(null),[_,A]=a.useState(0),[C,b]=a.useState(null),[H,l]=a.useState(!1),[w,M]=a.useState(null),[V,y]=a.useState([]),[F,N]=a.useState(null),[o,p]=a.useState(!1),[k,E]=a.useState(null),[f,x]=a.useState(()=>{if(typeof window>"u")return[];try{const D=localStorage.getItem("activeOrders");return D?JSON.parse(D).map(W=>({...W,requestedAt:new Date(W.requestedAt)})):[]}catch(D){return console.error("Failed to parse activeOrders from localStorage",D),[]}}),[g,T]=a.useState(0),[z,L]=a.useState([]),[O,R]=a.useState("en"),[Y,X]=a.useState([]);a.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem("activeOrders",JSON.stringify(f))}catch{console.error("Failed to persist activeOrders to localStorage")}},[f]);const U=D=>{x(I=>[...I,{...D,status:D.status||"ÄÃ£ ghi nháº­n"}])},ne=re.useCallback(D=>{const I={...D,id:Date.now(),callId:(c==null?void 0:c.id)||`call-${Date.now()}`,timestamp:new Date};i(W=>[...W,I])},[c==null?void 0:c.id]);a.useEffect(()=>((async()=>{try{throw new Error("Vapi public key is not configured")}catch(I){console.error("Error setting up Vapi:",I)}})(),()=>{const I=ae();I&&I.stop()}),[]),a.useEffect(()=>{if(t==="interface2"){console.log("Starting call duration timer in interface2");const D=setInterval(()=>{A(I=>{const W=I+1;return console.log("Call duration updated:",W),W})},1e3);b(D)}else C&&(console.log("Clearing call duration timer when leaving interface2"),clearInterval(C),b(null));return()=>{C&&(console.log("Cleaning up call duration timer"),clearInterval(C))}},[t,C]);const te=()=>{const D=ae();D&&(D.setMuted(!H),l(!H))},Z=re.useCallback(async()=>{try{p(!1);const D=`call-${Date.now()}`;h({id:D,roomNumber:"",duration:"0",category:""}),i([]),L([]);const I=ae();if(!I){console.error("Vapi instance not initialized");return}const W=void 0;if(!W){console.error("Assistant ID not configured");return}if(!await I.start(W)){console.error("Failed to start call - call object is null");return}console.log("Call started successfully"),A(0);const q=setInterval(()=>{A(P=>P+1)},1e3);b(q),s("interface2")}catch(D){console.error("Error starting call:",D)}},[]),de=a.useCallback(()=>{try{const D=ae();D&&D.stop();const I=()=>{C&&(clearInterval(C),b(null)),u(Ct);const W=_?`${Math.floor(_/60)}:${(_%60).toString().padStart(2,"0")}`:"0:00",Q=r.map(P=>({role:P.role,content:P.content}));if(Q.length<2){const P={id:Date.now(),callId:(c==null?void 0:c.id)||`call-${Date.now()}`,content:"Call was too short to generate a summary. Please try a more detailed conversation.",timestamp:new Date};M(P),s("interface3");return}const q={id:Date.now(),callId:(c==null?void 0:c.id)||`call-${Date.now()}`,content:"Generating AI summary of your conversation...",timestamp:new Date};M(q),fetch("/api/store-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:"",transcripts:Q,timestamp:new Date().toISOString(),callId:(c==null?void 0:c.id)||`call-${Date.now()}`,callDuration:W,forceBasicSummary:kt,language:O})}).then(P=>{if(!P.ok)throw new Error(`Network response was not ok: ${P.status}`);return P.json()}).then(P=>{if(P.success&&P.summary&&P.summary.content){const ee=P.summary.content;ge.unstable_batchedUpdates(()=>{const ue={id:Date.now(),callId:(c==null?void 0:c.id)||`call-${Date.now()}`,content:ee,timestamp:new Date(P.summary.timestamp||Date.now())};M(ue),P.serviceRequests&&Array.isArray(P.serviceRequests)&&P.serviceRequests.length>0&&y(P.serviceRequests),s("interface3")})}}).catch(P=>{console.error("Error processing summary:",P);const ee={id:Date.now(),callId:(c==null?void 0:c.id)||`call-${Date.now()}`,content:"An error occurred while generating the call summary.",timestamp:new Date};M(ee),s("interface3")})};ge.unstable_batchedUpdates(I)}catch(D){console.error("Error in endCall:",D),s("interface1")}},[C,_,r,c,M,s,y,O]),me=async D=>{try{console.log("Requesting Vietnamese translation for summary...");const I=await fetch("/api/translate-to-vietnamese",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:D})});if(!I.ok)throw new Error(`Network response was not ok: ${I.status}`);const W=await I.json();if(W.success&&W.translatedText)return N(W.translatedText),W.translatedText;throw new Error("Translation failed")}catch(I){return console.error("Error translating to Vietnamese:",I),"KhÃ´ng thá»ƒ dá»‹ch ná»™i dung nÃ y sang tiáº¿ng Viá»‡t. Vui lÃ²ng thá»­ láº¡i sau."}},d=D=>{L(I=>[...I,D])};a.useEffect(()=>{let D=null;const I=async()=>{try{const Q=await fetch("https://minhnhotelben.onrender.com/api/orders");if(!Q.ok)return;const q=await Q.json();console.log("[AssistantContext] Fetched orders from API:",q),Array.isArray(q)&&x(q.map(P=>({...P,reference:P.specialInstructions||P.reference||"",requestedAt:P.createdAt?new Date(P.createdAt):new Date})))}catch{}};return(t==="interface1"||t==="interface2")&&(I(),D=setInterval(I,5e3)),()=>{D&&clearInterval(D)}},[t]);const B={currentInterface:t,setCurrentInterface:s,transcripts:r,setTranscripts:i,addTranscript:ne,orderSummary:m,setOrderSummary:u,callDetails:c,setCallDetails:h,order:j,setOrder:v,callDuration:_,setCallDuration:A,isMuted:H,toggleMute:te,startCall:Z,endCall:de,callSummary:w,setCallSummary:M,serviceRequests:V,setServiceRequests:y,vietnameseSummary:F,setVietnameseSummary:N,translateToVietnamese:me,emailSentForCurrentSession:o,setEmailSentForCurrentSession:p,requestReceivedAt:k,setRequestReceivedAt:E,activeOrders:f,addActiveOrder:U,setActiveOrders:x,micLevel:g,modelOutput:z,setModelOutput:L,addModelOutput:d,language:O,setLanguage:R,staffMessages:Y,addStaffMessage:(D,I)=>{X(W=>[...W,{content:D,created_at:I}])}};return e.jsx(Be.Provider,{value:B,children:n})}function J(){const n=a.useContext(Be);if(n===void 0)throw new Error("useAssistant must be used within an AssistantProvider");return n}const qe="/assets/hotel-exterior-BsmmGNZ1.jpeg",Tt=({isActive:n})=>{const{setCurrentInterface:t,setTranscripts:s,setModelOutput:r,setCallDetails:i,setCallDuration:m,setEmailSentForCurrentSession:u,activeOrders:c,language:h,setLanguage:j,staffMessages:v}=J(),{t:_}=ot(),[A,C]=a.useState(null),[b,H]=a.useState(new Date);a.useEffect(()=>{const o=setInterval(()=>H(new Date),1e3);return()=>clearInterval(o)},[]);const[l,w]=a.useState(!1),M=async o=>{u(!1),i({id:`call-${Date.now()}`,roomNumber:"",duration:"0",category:""}),s([]),r([]),m(0);let p,k;(o==="fr"||o==="zh"||o==="ru"||o==="ko")&&(p=void 0,k=void 0);const E=await Le(p);E&&k&&(await E.start(k),t("interface2"))},V=o=>{C(A===o?null:o),A!==o&&setTimeout(()=>{C(p=>p===o?null:p)},3e3)},y=({iconName:o,className:p})=>e.jsxs("div",{className:"relative flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("span",{className:`material-icons text-xl sm:text-4xl text-[#F9BF3B] ${p||""}`,style:{filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2))"},onClick:()=>V(o),children:o}),A===o&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-max max-w-[120px] sm:max-w-[180px] bg-white/90 text-gray-800 text-xs sm:text-sm font-medium py-1 px-2 rounded shadow-lg z-50 pointer-events-none text-center",children:[_(`icon_${o}`,h),e.jsx("div",{className:"absolute w-2 h-2 bg-white/90 transform rotate-45 left-1/2 -translate-x-1/2 top-full -mt-1"})]})]}),F=o=>{if(!o)return{bg:"bg-gray-300",text:"text-gray-800",icon:"info"};switch(o){case"ÄÃ£ ghi nháº­n":return{bg:"bg-gray-300",text:"text-gray-800",icon:"assignment_turned_in"};case"Äang thá»±c hiá»‡n":return{bg:"bg-yellow-400",text:"text-yellow-900",icon:"autorenew"};case"ÄÃ£ thá»±c hiá»‡n vÃ  Ä‘ang bÃ n giao cho khÃ¡ch":return{bg:"bg-blue-400",text:"text-blue-900",icon:"local_shipping"};case"HoÃ n thiá»‡n":return{bg:"bg-green-500",text:"text-white",icon:"check_circle"};case"LÆ°u Ã½ khÃ¡c":return{bg:"bg-red-400",text:"text-white",icon:"error"};default:return{bg:"bg-gray-300",text:"text-gray-800",icon:"info"}}},N=o=>{if(!o)return"status_acknowledged";const p=o.trim().toLowerCase();return p.includes("Ä‘Ã£ ghi nháº­n")||p.includes("acknowledged")?"status_acknowledged":p.includes("Ä‘ang thá»±c hiá»‡n")||p.includes("in progress")?"status_in_progress":p.includes("bÃ n giao")||p.includes("delivering")?"status_delivering":p.includes("hoÃ n thiá»‡n")||p.includes("completed")?"status_completed":p.includes("lÆ°u Ã½")||p.includes("note")?"status_note":"status_acknowledged"};return console.log("ActiveOrders:",c),e.jsx("div",{className:`absolute w-full min-h-screen h-full transition-opacity duration-500 ${n?"opacity-100":"opacity-0 pointer-events-none"} z-10 overflow-y-auto`,id:"interface1",style:{backgroundImage:`linear-gradient(rgba(26, 35, 126, 0.7), rgba(121, 219, 220, 0.6)), url(${qe})`,backgroundSize:"cover",backgroundPosition:"center",perspective:"1000px"},children:e.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-start text-white p-3 pt-6 sm:p-5 sm:pt-10 lg:pt-16 overflow-visible pb-32 sm:pb-24",style:{transform:"translateZ(20px)",minHeight:"fit-content"},children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-end w-full max-w-2xl mb-4 sm:mb-2",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center justify-center mr-3 px-3 py-2 sm:py-1.5 bg-white/80 hover:bg-yellow-100 border border-amber-400 rounded-full shadow transition-all duration-200 text-blue-900 font-bold text-base sm:text-lg",style:{minWidth:40,minHeight:40},title:"Refresh",children:[e.jsx("span",{className:"material-icons text-xl sm:text-2xl mr-1 text-amber-400",children:"refresh"}),e.jsx("span",{className:"hidden sm:inline font-semibold",children:"Refresh"})]}),e.jsxs("div",{className:"flex items-center px-3 py-2 sm:py-1.5 gap-2 transition-all duration-300 mx-auto sm:mx-0",style:{background:"linear-gradient(135deg, #4e5ab7 0%, #3f51b5 100%)",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.15)",borderRadius:"8px",minWidth:"150px",maxWidth:"95%",width:"auto",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(st,{className:"text-[#F9BF3B] text-xl mr-1.5",style:{filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2))"}}),e.jsxs("label",{className:"mr-2 font-semibold font-sans text-white whitespace-nowrap text-sm sm:text-base",children:[_("language",h),":"]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:h,onChange:o=>j(o.target.value),className:"appearance-none w-full pl-6 sm:pl-8 pr-6 py-1 sm:py-1.5 font-sans bg-transparent focus:outline-none transition-all duration-200",style:{fontWeight:600,color:"#fff",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[e.jsx("option",{value:"en",children:"ðŸ‡¬ðŸ‡§ English"}),e.jsx("option",{value:"fr",children:"ðŸ‡«ðŸ‡· FranÃ§ais"}),e.jsx("option",{value:"zh",children:"ðŸ‡¨ðŸ‡³ ä¸­æ–‡"}),e.jsx("option",{value:"ru",children:"ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹"}),e.jsx("option",{value:"ko",children:"ðŸ‡°ðŸ‡· í•œêµ­ì–´"})]}),e.jsx(De,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[#F9BF3B] pointer-events-none text-lg"})]})]})]}),e.jsxs("h2",{className:"font-poppins font-bold text-2xl sm:text-3xl lg:text-4xl text-amber-400 mb-2 text-center",style:{textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:[e.jsx("span",{style:{color:"red",fontStyle:"italic",marginRight:8},children:"Demo"}),_("hotel_name",h)]}),e.jsx("p",{className:"text-xs sm:text-lg lg:text-xl text-center max-w-full mb-4 truncate sm:whitespace-nowrap overflow-x-auto",children:_("hotel_subtitle",h)}),e.jsxs("div",{className:"relative mb-4 sm:mb-12 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-amber-400 animate-[ripple_1.5s_linear_infinite] pointer-events-none transition-opacity duration-300 group-hover:opacity-80 opacity-60"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-amber-400/70 animate-[ripple_2s_linear_infinite] pointer-events-none transition-opacity duration-300 group-hover:opacity-60 opacity-40"}),e.jsxs("button",{id:`vapiButton${h==="en"?"En":h==="fr"?"Fr":h==="zh"?"Zh":h==="ru"?"Ru":"Ko"}`,className:"group relative w-36 h-36 sm:w-40 sm:h-40 lg:w-56 lg:h-56 rounded-full font-poppins font-bold flex flex-col items-center justify-center overflow-hidden hover:translate-y-[-2px] hover:shadow-[0px_12px_20px_rgba(0,0,0,0.2)]",onClick:()=>M(h),style:{background:h==="en"?"linear-gradient(180deg, rgba(85,154,154,0.9) 0%, rgba(85,154,154,0.9) 100%)":h==="fr"?"linear-gradient(180deg, rgba(59, 130, 246, 0.9) 0%, rgba(37, 99, 235, 0.9) 100%)":h==="zh"?"linear-gradient(180deg, rgba(220, 38, 38, 0.9) 0%, rgba(185, 28, 28, 0.9) 100%)":h==="ru"?"linear-gradient(180deg, rgba(79, 70, 229, 0.9) 0%, rgba(67, 56, 202, 0.9) 100%)":"linear-gradient(180deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%)",boxShadow:"0px 12px 24px rgba(0, 0, 0, 0.25), 0px 6px 12px rgba(0, 0, 0, 0.15), inset 0px 1px 0px rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.5)",transition:"all 0.3s ease",transform:"translateY(0) translateZ(30px)"},children:[e.jsx("span",{className:"material-icons text-4xl sm:text-6xl lg:text-7xl mb-2 text-[#F9BF3B] transition-all duration-300 group-hover:scale-110",style:{filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2))",color:h==="en"?"#F9BF3B":h==="fr"?"#FFFFFF":h==="zh"?"#FFEB3B":h==="ru"?"#F48FB1":"#4ADE80"},children:"mic"}),h==="fr"?e.jsx("span",{className:"text-sm sm:text-lg lg:text-2xl font-bold text-white px-2 text-center",style:{textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("press_to_call",h)}):h==="ru"||h==="ko"?e.jsx("span",{className:"text-sm sm:text-lg lg:text-xl font-bold text-white px-2 text-center",style:{textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("press_to_call",h)}):e.jsx("span",{className:"text-lg sm:text-2xl lg:text-3xl font-bold whitespace-nowrap text-white",style:{textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("press_to_call",h)}),e.jsx("span",{className:"absolute w-full h-full rounded-full pointer-events-none"})]})]}),e.jsx("div",{className:"text-center w-full max-w-5xl mb-10 sm:mb-8",style:{perspective:"1000px"},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap justify-center gap-y-2 sm:gap-y-2 md:gap-3 text-left mx-auto w-full",children:[e.jsxs("div",{className:"p-0.5 py-0 sm:p-2 w-4/5 mx-auto md:w-64 mb-2 sm:mb-0 min-h-[36px] transition-all duration-250 hover:scale-103 hover:-translate-y-1",style:{background:"rgba(85,154,154,0.7)",backdropFilter:"blur(8px)",borderRadius:"12px",boxShadow:"0px 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.18)",transform:"translateZ(20px)"},children:[e.jsx("h4",{className:"font-medium text-amber-400 pb-0 mb-0.5 text-xs sm:text-sm",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("room_and_stay",h)}),e.jsxs("ul",{className:"grid grid-cols-5 gap-0 sm:gap-2 py-0.5 sm:py-2",children:[e.jsx("li",{children:e.jsx(y,{iconName:"login"})}),e.jsx("li",{children:e.jsx(y,{iconName:"hourglass_empty"})}),e.jsx("li",{children:e.jsx(y,{iconName:"info"})}),e.jsx("li",{children:e.jsx(y,{iconName:"policy"})}),e.jsx("li",{children:e.jsx(y,{iconName:"wifi"})})]})]}),e.jsxs("div",{className:"p-0.5 py-0 sm:p-2 w-4/5 mx-auto md:w-64 mb-2 sm:mb-0 min-h-[36px] transition-all duration-250 hover:scale-103 hover:-translate-y-1",style:{background:"rgba(85,154,154,0.7)",backdropFilter:"blur(8px)",borderRadius:"12px",boxShadow:"0px 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.18)",transform:"translateZ(20px)"},children:[e.jsx("h4",{className:"font-medium text-amber-400 pb-0 mb-0.5 text-xs sm:text-sm",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("room_services",h)}),e.jsxs("ul",{className:"grid grid-cols-7 gap-0 sm:gap-2 py-0.5 sm:py-2",children:[e.jsx("li",{children:e.jsx(y,{iconName:"restaurant"})}),e.jsx("li",{children:e.jsx(y,{iconName:"local_bar"})}),e.jsx("li",{children:e.jsx(y,{iconName:"cleaning_services"})}),e.jsx("li",{children:e.jsx(y,{iconName:"local_laundry_service"})}),e.jsx("li",{children:e.jsx(y,{iconName:"alarm"})}),e.jsx("li",{children:e.jsx(y,{iconName:"add_circle"})}),e.jsx("li",{children:e.jsx(y,{iconName:"build"})})]})]}),e.jsxs("div",{className:"p-0.5 py-0 sm:p-2 w-4/5 mx-auto md:w-64 mb-2 sm:mb-0 min-h-[36px] transition-all duration-250 hover:scale-103 hover:-translate-y-1",style:{background:"rgba(85,154,154,0.7)",backdropFilter:"blur(8px)",borderRadius:"12px",boxShadow:"0px 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.18)",transform:"translateZ(20px)"},children:[e.jsx("h4",{className:"font-medium text-amber-400 pb-0 mb-0.5 text-xs sm:text-sm",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("bookings_and_facilities",h)}),e.jsxs("ul",{className:"grid grid-cols-7 gap-0 sm:gap-2 py-0.5 sm:py-2",children:[e.jsx("li",{children:e.jsx(y,{iconName:"event_seat"})}),e.jsx("li",{children:e.jsx(y,{iconName:"spa"})}),e.jsx("li",{children:e.jsx(y,{iconName:"fitness_center"})}),e.jsx("li",{children:e.jsx(y,{iconName:"pool"})}),e.jsx("li",{children:e.jsx(y,{iconName:"directions_car"})}),e.jsx("li",{children:e.jsx(y,{iconName:"medical_services"})}),e.jsx("li",{children:e.jsx(y,{iconName:"support_agent"})})]})]}),e.jsxs("div",{className:"p-0.5 py-0 sm:p-2 w-4/5 mx-auto md:w-64 mb-2 sm:mb-0 min-h-[36px] transition-all duration-250 hover:scale-103 hover:-translate-y-1",style:{background:"rgba(85,154,154,0.7)",backdropFilter:"blur(8px)",borderRadius:"12px",boxShadow:"0px 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.18)",transform:"translateZ(20px)"},children:[e.jsx("h4",{className:"font-medium text-amber-400 pb-0 mb-0.5 text-xs sm:text-sm",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("tourism_and_exploration",h)}),e.jsxs("ul",{className:"grid grid-cols-7 gap-0 sm:gap-2 py-0.5 sm:py-2",children:[e.jsx("li",{children:e.jsx(y,{iconName:"location_on"})}),e.jsx("li",{children:e.jsx(y,{iconName:"local_dining"})}),e.jsx("li",{children:e.jsx(y,{iconName:"directions_bus"})}),e.jsx("li",{children:e.jsx(y,{iconName:"directions_car"})}),e.jsx("li",{children:e.jsx(y,{iconName:"event"})}),e.jsx("li",{children:e.jsx(y,{iconName:"shopping_bag"})}),e.jsx("li",{children:e.jsx(y,{iconName:"map"})})]})]}),e.jsxs("div",{className:"p-0.5 py-0 sm:p-2 w-4/5 mx-auto md:w-64 mb-4 sm:mb-0 min-h-[36px] transition-all duration-250 hover:scale-103 hover:-translate-y-1",style:{background:"rgba(85,154,154,0.7)",backdropFilter:"blur(8px)",borderRadius:"12px",boxShadow:"0px 10px 25px rgba(0,0,0,0.15)",border:"1px solid rgba(255,255,255,0.18)",transform:"translateZ(20px)"},children:[e.jsx("h4",{className:"font-medium text-amber-400 pb-0 mb-0.5 text-xs sm:text-sm",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)"},children:_("support_external_services",h)}),e.jsxs("ul",{className:"grid grid-cols-4 gap-0 sm:gap-2 py-0.5 sm:py-2",children:[e.jsx("li",{children:e.jsx(y,{iconName:"translate"})}),e.jsx("li",{children:e.jsx(y,{iconName:"rate_review"})}),e.jsx("li",{children:e.jsx(y,{iconName:"report_problem"})}),e.jsx("li",{children:e.jsx(y,{iconName:"luggage"})})]})]})]})}),c&&c.length>0&&e.jsx("div",{className:"flex flex-col items-center gap-y-4 mb-20 pb-16 w-full px-2 sm:mb-12 sm:pb-8 sm:flex-row sm:flex-nowrap sm:gap-x-4 sm:overflow-x-auto sm:justify-start",style:{perspective:"1000px",zIndex:30},children:[...c].sort((o,p)=>p.requestedAt.getTime()-o.requestedAt.getTime()).map(o=>{const p=new Date(o.requestedAt.getTime()+36e5),k=Math.max(Math.ceil((p.getTime()-b.getTime())/1e3),0);if(k<=0)return null;const E=Math.floor(k/60).toString().padStart(2,"0"),f=(k%60).toString().padStart(2,"0");return e.jsxs("div",{className:"p-2 sm:p-3 text-gray-800 max-w-xs w-[220px] flex-shrink-0 transition-all duration-250 hover:rotate-1 hover:scale-105",style:{background:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(8px)",borderRadius:"24px",boxShadow:"0px 10px 25px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.4)",transform:"translateZ(20px)",transformStyle:"preserve-3d",zIndex:20,marginBottom:"8px",transition:"all 0.3s ease-in-out"},children:[e.jsx("div",{className:"flex justify-center items-center mb-1.5",children:e.jsx("span",{className:"font-bold text-lg text-blue-800 bg-blue-50 px-4 py-1.5 rounded-full shadow-sm",style:{borderRadius:"16px",boxShadow:"0px 2px 6px rgba(0, 0, 0, 0.1)"},children:`${E}:${f}`})}),e.jsxs("p",{className:"text-xs sm:text-sm mb-0.5 px-1.5",children:[e.jsxs("strong",{children:[_("order_ref",h),":"]})," ",o.reference]}),e.jsxs("p",{className:"text-xs sm:text-sm mb-0.5 px-1.5",children:[e.jsxs("strong",{children:[_("requested_at",h),":"]})," ",o.requestedAt.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs sm:text-sm mb-0.5 px-1.5",children:[e.jsxs("strong",{children:[_("estimated_completion",h),":"]})," ",o.estimatedTime]}),e.jsx("div",{className:"mt-2 flex justify-center",children:(()=>{const x=F(o.status);return console.log("Order status:",o.status,"->",N(o.status)),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 text-xs font-semibold ${x.bg} ${x.text} w-full text-center shadow-md border border-white/60`,style:{borderRadius:"16px",boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.12)",transition:"all 0.2s ease",letterSpacing:.2},children:[e.jsx("span",{className:"material-icons text-base mr-1",style:{marginTop:-2},children:x.icon}),_(N(o.status),h)]})})()})]},o.reference)})}),e.jsxs("div",{className:"fixed bottom-8 right-8 z-50",children:[!l&&v.length>0&&e.jsxs("button",{className:"bg-blue-600 text-white rounded-full shadow-lg w-14 h-14 flex items-center justify-center text-3xl hover:bg-blue-700 transition-all",onClick:()=>w(!0),"aria-label":"Open chat",children:[e.jsx("span",{className:"material-icons",children:"chat"}),v.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-amber-400 text-xs rounded-full px-2 py-0.5 font-bold text-blue-900",children:v.length})]}),l&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border-2 border-amber-400 w-80 max-w-full p-4 animate-fade-in-up relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-blue-700 text-2xl",onClick:()=>w(!1),"aria-label":"Close chat",children:"Ã—"}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"material-icons text-amber-400 mr-2",children:"chat"}),e.jsx("span",{className:"font-bold text-blue-900 text-lg",children:"Staff Chat"})]}),e.jsx("div",{className:"overflow-y-auto max-h-60 mb-2 pr-1",children:v.length===0?e.jsx("div",{className:"text-gray-400 text-sm text-center",children:"ChÆ°a cÃ³ tin nháº¯n"}):v.map((o,p)=>e.jsxs("div",{className:"mb-2 text-left",children:[e.jsxs("div",{className:"inline-block px-3 py-1 rounded-lg bg-blue-100 text-blue-900",children:[e.jsx("span",{className:"font-semibold",children:"Staff:"})," ",o.content]}),e.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:typeof o.created_at=="string"?new Date(o.created_at).toLocaleTimeString():o.created_at.toLocaleTimeString()})]},p))})]})]})]})})},ye=["Landmark","Hotel Amenities","Local Cuisine","Area Map","Activity and Experiences","Tours","Transportation","Dining"],Rt=({references:n})=>{const[t,s]=a.useState({}),[r,i]=a.useState(!0),[m,u]=a.useState(ye[0]),[c,h]=a.useState(null);a.useEffect(()=>{i(!0);let l=0;if(n.length===0){i(!1);return}n.forEach(w=>{w.type==="document"&&w.url.endsWith(".txt")&&!t[w.url]?fetch(w.url).then(M=>M.text()).then(M=>{s(V=>({...V,[w.url]:M})),l++,l===n.length&&i(!1)}).catch(()=>{l++,l===n.length&&i(!1)}):(l++,l===n.length&&i(!1))}),n.every(w=>w.type!=="document"||!w.url.endsWith(".txt"))&&i(!1)},[n]);const j=l=>/^https?:\/\//.test(l)?l:`/${l.replace(/^\//,"")}`,v=async(l,w)=>{try{const V=await(await fetch(j(l))).blob(),y=URL.createObjectURL(V),F=document.createElement("a");F.href=y,F.download=w,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(y)}catch(M){console.error("Error downloading file:",M)}},_=l=>{window.open(j(l),"_blank")},A=()=>e.jsxs("div",{className:"animate-pulse bg-white/80 rounded-xl shadow-md h-[180px] flex flex-col p-4 gap-2",children:[e.jsx("div",{className:"bg-gray-200 rounded w-full h-2/3 mb-2"}),e.jsx("div",{className:"bg-gray-200 rounded w-2/3 h-4 mb-1"}),e.jsx("div",{className:"bg-gray-100 rounded w-1/2 h-3"})]}),C=l=>e.jsxs("div",{className:"group bg-white/90 rounded-xl shadow-md h-[180px] flex flex-col justify-between cursor-pointer transition-transform duration-200 hover:scale-[1.03] active:scale-95 border border-white/40 backdrop-blur-md",style:{minWidth:220,maxWidth:260},onClick:()=>l.type==="link"?_(l.url):void 0,children:[e.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden rounded-t-xl",style:{height:"60%"},children:[l.type==="image"&&e.jsx("img",{src:j(l.url),alt:l.title,className:"object-cover w-full h-full rounded-t-xl hover:opacity-80 transition cursor-zoom-in",onClick:w=>{w.stopPropagation(),h(j(l.url))},tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&h(j(l.url))}}),l.type==="document"&&l.url.endsWith(".pdf")&&e.jsx("span",{className:"material-icons text-5xl text-blue-700/80",children:"picture_as_pdf"}),l.type==="document"&&l.url.endsWith(".txt")&&e.jsx("span",{className:"material-icons text-5xl text-green-700/80",children:"description"}),l.type==="link"&&e.jsx("span",{className:"material-icons text-5xl text-yellow-700/80",children:"link"})]}),e.jsxs("div",{className:"flex flex-col gap-1 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base font-medium text-gray-900 truncate",children:l.title}),l.type==="document"&&e.jsx("button",{onClick:w=>{w.stopPropagation(),v(l.url,l.title)},className:"ml-auto p-1 rounded-full hover:bg-yellow-100 text-yellow-700 transition-colors",children:e.jsx("span",{className:"material-icons text-base",children:"download"})}),l.type==="link"&&e.jsx("span",{className:"material-icons text-xs text-gray-400 ml-1",children:"open_in_new"})]}),l.description&&e.jsx("span",{className:"text-xs text-gray-500 truncate",children:l.description}),l.url.endsWith(".txt")&&t[l.url]&&e.jsxs("pre",{className:"mt-1 max-h-12 overflow-auto whitespace-pre-wrap text-xs text-gray-700 bg-gray-50 rounded p-1",children:[t[l.url].slice(0,120),"..."]})]})]}),b=()=>window.innerWidth<640?"auto":window.innerWidth<1024?2:window.innerWidth<1280?3:4,H=n.filter(l=>l.category&&l.category.trim().toLowerCase()===m.trim().toLowerCase());return e.jsxs("div",{className:"w-full sm:max-w-5xl mx-auto mt-2 mb-2 px-2 py-3 rounded-2xl",style:{background:"rgba(85,154,154,0.85)",minHeight:260},children:[c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:()=>h(null),children:e.jsxs("div",{className:"relative max-w-3xl w-full flex flex-col items-center",children:[e.jsx("button",{className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg z-10",onClick:l=>{l.stopPropagation(),h(null)},children:e.jsx("span",{className:"material-icons text-2xl",children:"close"})}),e.jsx("img",{src:c,alt:"PhÃ³ng to áº£nh reference",className:"rounded-xl max-h-[80vh] w-auto object-contain border-4 border-white shadow-2xl",onClick:l=>l.stopPropagation()})]})}),e.jsx("div",{className:"flex items-center mb-4 px-2",children:e.jsxs("div",{className:"flex items-center px-3 py-2 sm:py-1.5 gap-2 transition-all duration-300 mx-auto sm:mx-0",style:{background:"linear-gradient(135deg, #79DBDC 0%, #559A9A 100%)",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.15)",borderRadius:"8px",minWidth:"150px",maxWidth:"95%",width:"auto",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(nt,{className:"text-[#F9BF3B] text-xl mr-1.5",style:{filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2))"}}),e.jsx("label",{className:"mr-2 font-semibold font-sans text-white whitespace-nowrap text-sm sm:text-base",children:"Category:"}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("select",{value:m,onChange:l=>u(l.target.value),className:"appearance-none w-full pl-6 sm:pl-8 pr-6 py-1 sm:py-1.5 font-sans bg-transparent focus:outline-none transition-all duration-200",style:{fontWeight:600,color:"#fff",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:ye.map(l=>e.jsx("option",{value:l,className:"bg-blue-800 text-white",children:l},l))}),e.jsx(De,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[#F9BF3B] pointer-events-none text-lg"})]})]})}),r?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:[...Array(3)].map((l,w)=>e.jsx(A,{},w))}):H.length===0?e.jsx("div",{className:"flex items-center justify-center h-[120px] text-white/80 text-base font-medium",children:"No references available"}):e.jsx(rt,{modules:[it,at,ct],spaceBetween:16,slidesPerView:b(),navigation:H.length>3,pagination:{clickable:!0,dynamicBullets:!0},className:"w-full",style:{paddingBottom:32,overflowX:window.innerWidth<640?"auto":void 0},children:H.map((l,w)=>e.jsx(lt,{className:"flex justify-center",style:window.innerWidth<640?{width:"90vw",maxWidth:"98vw",minWidth:0}:{},children:C(l)},l.url+w))})]})};class Mt{constructor(t){this.gradientRotation=0,this.isHovered=!1,this.isActive=!1,this.waveformPhase=0,this.particles=[],this.mouseX=0,this.mouseY=0,this.isDarkMode=!1,this.elapsedTime=0,this.displayedTime=0,this.timeTarget=60,this.idleFrame=0,this.lastActiveTime=Date.now(),this.idleFlash=0,this.canvas=document.createElement("canvas");const s=document.getElementById(t);if(!s)throw new Error("Container element not found");s.appendChild(this.canvas);const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.ctx=r,this.width=200,this.height=200,this.centerX=this.width/2,this.centerY=this.height/2,this.radius=40,this.ripples=[],this.isListening=!1,this.pulsePhase=0,this.volumeLevel=0,this.animationFrameId=0,this.resize(),this.animate(),window.addEventListener("resize",this.resize.bind(this)),s&&(s.addEventListener("mouseenter",()=>{this.isHovered=!0,this.lastActiveTime=Date.now()}),s.addEventListener("mouseleave",()=>{this.isHovered=!1,this.isActive=!1}),s.addEventListener("mousedown",()=>{this.isActive=!0,this.lastActiveTime=Date.now()}),s.addEventListener("mouseup",()=>{this.isActive=!1}),s.addEventListener("mousemove",i=>{const m=s.getBoundingClientRect();this.mouseX=i.clientX-m.left,this.mouseY=i.clientY-m.top,this.lastActiveTime=Date.now()})),this.isDarkMode=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{this.isDarkMode=i.matches})}resize(){const t=this.canvas.parentElement;if(!t)return;const s=window.devicePixelRatio||1,r=Math.min(t.clientWidth,t.clientHeight);this.width=this.height=r,this.canvas.width=this.canvas.height=r*s,this.canvas.style.width=this.canvas.style.height=`${r}px`,this.canvas.style.borderRadius="50%",this.canvas.style.overflow="hidden",this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(s,s),this.centerX=this.width/2,this.centerY=this.height/2}drawTexturePattern(){const t="rgba(232,181,84,0.18)";for(let r=-this.radius;r<this.radius;r+=14)for(let i=-this.radius;i<this.radius;i+=14)r*r+i*i<this.radius*this.radius*.85&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX+r,this.centerY+i,1.2,0,Math.PI*2),this.ctx.fillStyle=t,this.ctx.fill(),this.ctx.restore())}drawLightBeam(){if(!(this.isHovered||this.isActive))return;this.ctx.save();const t=this.ctx.createLinearGradient(this.centerX,this.centerY-this.radius*1.3,this.centerX,this.centerY+this.radius*.5);t.addColorStop(0,"rgba(255,255,255,0.22)"),t.addColorStop(.5,"rgba(255,255,255,0.08)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.beginPath(),this.ctx.ellipse(this.centerX,this.centerY-this.radius*.7,this.radius*.7,this.radius*.22,0,0,2*Math.PI),this.ctx.fillStyle=t,this.ctx.filter="blur(2.5px)",this.ctx.fill(),this.ctx.filter="none",this.ctx.restore()}drawBaseCircle(){let t=0,s=0;this.isHovered&&(t=(this.mouseX-this.centerX)*.07,s=(this.mouseY-this.centerY)*.07),this.gradientRotation+=.0025;const r=this.gradientRotation%(2*Math.PI),i=this.centerX+Math.cos(r)*this.radius*1.2,m=this.centerY+Math.sin(r)*this.radius*1.2,u=this.ctx.createLinearGradient(this.centerX-this.radius*1.2+t,this.centerY-this.radius*1.2+s,i+t,m+s);u.addColorStop(0,this.isDarkMode?"#559A9A":"#5DB6B9"),u.addColorStop(1,this.isDarkMode?"#559A9A":"#5DB6B9"),this.ctx.save(),this.ctx.globalAlpha=.85,this.ctx.beginPath(),this.ctx.arc(this.centerX+t,this.centerY+s,this.radius*1.25,0,Math.PI*2),this.ctx.strokeStyle=u,this.ctx.lineWidth=12,this.ctx.shadowColor=(this.isHovered,"#559A9A"),this.ctx.shadowBlur=this.isHovered?32:16,this.ctx.stroke(),this.ctx.restore(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX+t,this.centerY+s,this.radius*1.13,0,Math.PI*2),this.ctx.fillStyle=this.isDarkMode?"rgba(40,50,80,0.18)":"rgba(255,255,255,0.10)",this.ctx.filter="blur(2.5px)",this.ctx.fill(),this.ctx.filter="none",this.ctx.restore(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX+t,this.centerY+s,this.radius*.98,0,Math.PI*2),this.ctx.fillStyle=this.isDarkMode?"#bfa133":"#E8B554",this.ctx.shadowColor=this.isDarkMode?"rgba(85,154,154,0.18)":"rgba(85,154,154,0.25)",this.ctx.shadowBlur=10,this.ctx.fill(),this.ctx.restore(),this.drawTexturePattern(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX+t,this.centerY+s,this.radius*.98,0,Math.PI*2),this.ctx.shadowColor=this.isDarkMode?"rgba(85,154,154,0.10)":"rgba(85,154,154,0.18)",this.ctx.shadowBlur=24,this.ctx.globalAlpha=.7,this.ctx.strokeStyle="rgba(0,0,0,0)",this.ctx.lineWidth=8,this.ctx.stroke(),this.ctx.restore(),this.drawLightBeam(),this.drawMicIcon(t,s)}drawMicIcon(t=0,s=0){let r=.85+.15*Math.sin(this.pulsePhase*1.5);this.isHovered&&(r*=1.08),this.isActive&&(r*=.95),this.ctx.save(),this.ctx.translate(this.centerX+t,this.centerY+s),this.ctx.scale(r,r),this.ctx.shadowColor=this.isHovered?"rgba(255,255,255,0.95)":"rgba(255,255,255,0.7)",this.ctx.shadowBlur=16+8*r+(this.isHovered?8:0),this.ctx.beginPath(),this.ctx.moveTo(0,18),this.ctx.arc(0,0,18,Math.PI*.15,Math.PI*1.85,!1),this.ctx.lineTo(0,18),this.ctx.closePath(),this.ctx.fillStyle="rgba(255,255,255,0.92)",this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(-4,18),this.ctx.lineTo(-4,28),this.ctx.lineTo(4,28),this.ctx.lineTo(4,18),this.ctx.closePath(),this.ctx.fillStyle="rgba(255,255,255,0.92)",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(0,28,6,0,Math.PI,!0),this.ctx.fillStyle="rgba(255,255,255,0.7)",this.ctx.fill(),this.ctx.restore()}drawRipples(){for(let t=this.ripples.length-1;t>=0;t--){const s=this.ripples[t];if(s.radius+=s.speed,s.alpha-=.01,s.alpha<=0){this.ripples.splice(t,1);continue}this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY,s.radius,0,Math.PI*2),this.ctx.strokeStyle=`rgba(85,154,154, ${s.alpha})`,this.ctx.lineWidth=2,this.ctx.stroke()}}drawPulsingRing(){if(this.isListening){const t=this.radius+10+Math.sin(this.pulsePhase)*5,s=this.volumeLevel*20;this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY,t+s,0,Math.PI*2),this.ctx.strokeStyle="rgba(33, 150, 243, 0.5)",this.ctx.lineWidth=3,this.ctx.stroke(),this.pulsePhase+=.1}}drawWaveform(){if(!this.isListening)return;const t=4;this.waveformPhase+=.08+this.volumeLevel*.12;for(let s=1;s<=t;s++){const r=this.radius*.98+s*10+Math.sin(this.waveformPhase+s)*3*(1+this.volumeLevel);this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY,r,0,Math.PI*2),this.ctx.strokeStyle=`rgba(232,181,84,${.18+.08*(t-s)})`,this.ctx.lineWidth=2+this.volumeLevel*2,this.ctx.shadowColor="rgba(85,154,154,0.22)",this.ctx.shadowBlur=8,this.ctx.stroke(),this.ctx.restore()}}drawParticles(){if(this.isListening&&Math.random()<.18){const t=Math.random()*2*Math.PI,s=this.radius*1.18+Math.random()*16;this.particles.push({x:this.centerX+Math.cos(t)*s,y:this.centerY+Math.sin(t)*s,alpha:.7+Math.random()*.3,size:2+Math.random()*2,speed:.5+Math.random()*.7})}for(let t=this.particles.length-1;t>=0;t--){const s=this.particles[t];if(s.alpha-=.012,s.size*=.98,s.y-=s.speed*.5,s.x+=Math.sin(s.y*.1)*.2,s.alpha<=.05||s.size<.5){this.particles.splice(t,1);continue}this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.x,s.y,s.size,0,Math.PI*2),this.ctx.fillStyle=`rgba(232,181,84,${s.alpha})`,this.ctx.shadowColor="rgba(85,154,154,0.22)",this.ctx.shadowBlur=6,this.ctx.fill(),this.ctx.restore()}}drawTimeRing(){const t=Math.min(1,this.elapsedTime/this.timeTarget),s=t<.5?"#E8B554":t<1?"#d4af37":"#e53935";this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY,this.radius*1.32,-Math.PI/2,-Math.PI/2+t*2*Math.PI),this.ctx.strokeStyle=s,this.ctx.lineWidth=4,this.ctx.shadowColor=s,this.ctx.shadowBlur=t>.95?16:6,this.ctx.globalAlpha=.85,this.ctx.stroke(),this.ctx.restore()}drawTimeText(){this.displayedTime+=(this.elapsedTime-this.displayedTime)*.18;const t=Math.round(this.displayedTime),s=Math.floor(t/60).toString().padStart(2,"0"),r=(t%60).toString().padStart(2,"0"),i=`${s}:${r}`;this.ctx.save(),this.ctx.font="600 1.25rem Montserrat, Raleway, Arial, sans-serif",this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.shadowColor="rgba(85,154,154,0.22)",this.ctx.shadowBlur=8,this.ctx.fillStyle="#fff",this.isDarkMode&&(this.ctx.fillStyle="#e8e8e8"),this.ctx.globalAlpha=.95,this.ctx.fillText(i,this.centerX,this.centerY+this.radius*1.45),this.ctx.restore()}drawIdleFlash(){if(Date.now()-this.lastActiveTime>6e3){this.idleFlash+=.08;const s=.7+.3*Math.abs(Math.sin(this.idleFlash*1.2));this.ctx.save(),this.ctx.globalAlpha=.18*s,this.ctx.beginPath(),this.ctx.arc(this.centerX,this.centerY,this.radius*1.18,0,Math.PI*2),this.ctx.fillStyle="#E8B554",this.ctx.filter="blur(2.5px)",this.ctx.fill(),this.ctx.filter="none",this.ctx.restore()}else this.idleFlash=0}drawVolumeVisualization(){if(!this.isListening)return;const t=16,s=this.radius*1.08;for(let r=0;r<t;r++){const i=2*Math.PI*r/t,m=8+Math.sin(this.waveformPhase+r)*4+this.volumeLevel*18,u=this.centerX+Math.cos(i)*s,c=this.centerY+Math.sin(i)*s,h=this.centerX+Math.cos(i)*(s+m),j=this.centerY+Math.sin(i)*(s+m);this.ctx.save(),this.ctx.strokeStyle=`rgba(232,181,84,${.18+.18*this.volumeLevel})`,this.ctx.lineWidth=2.2,this.ctx.beginPath(),this.ctx.moveTo(u,c),this.ctx.lineTo(h,j),this.ctx.shadowColor="rgba(85,154,154,0.22)",this.ctx.shadowBlur=6,this.ctx.stroke(),this.ctx.restore()}}animate(){const t=Math.min(this.width,this.height)<340;this.radius=t?Math.max(32,Math.min(this.width,this.height)/2.8):Math.max(36,Math.min(this.width,this.height)/5.2),this.ctx.clearRect(0,0,this.width,this.height),this.drawBaseCircle(),this.drawWaveform(),this.drawParticles(),this.drawRipples(),this.drawPulsingRing(),this.drawTimeRing(),this.drawTimeText(),this.drawIdleFlash(),this.drawVolumeVisualization(),this.isListening&&Math.random()<(t?.05:.1)&&this.ripples.push({radius:this.radius,alpha:.4,speed:1+this.volumeLevel*2}),this.animationFrameId=requestAnimationFrame(this.animate.bind(this))}setListening(t){this.isListening=t,t&&(this.ripples=[])}setVolumeLevel(t){this.volumeLevel=Math.max(0,Math.min(1,t))}setTime(t,s=60){this.elapsedTime=t,this.timeTarget=s}getTime(){return this.elapsedTime}cleanup(){window.removeEventListener("resize",this.resize),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.canvas.remove()}}const Dt=({isListening:n,volumeLevel:t,containerId:s})=>{const r=a.useRef(null);return a.useEffect(()=>(r.current=new Mt(s),()=>{r.current&&(r.current.cleanup(),r.current=null)}),[s]),a.useEffect(()=>{r.current&&r.current.setListening(n)},[n]),a.useEffect(()=>{r.current&&r.current.setVolumeLevel(t)},[t]),e.jsx("div",{id:s,className:"w-[220px] h-[220px] relative rounded-full overflow-visible",style:{cursor:"pointer",borderRadius:"50%"}})};class At{constructor(){this.referenceMap={}}async initialize(){try{const t=await fetch("/assets/references/reference-map.json");this.referenceMap=await t.json(),console.log("Loaded referenceMap:",this.referenceMap)}catch(t){console.error("Error loading reference map:",t)}}findReferences(t){const s=t.toLowerCase(),r=[];return Object.values(this.referenceMap).forEach(i=>{i.keywords.some(u=>s.includes(u.toLowerCase()))&&!r.find(u=>u.url===i.url)&&r.push(i)}),r}async addReference(t,s){this.referenceMap[t]=s;try{await fetch("/api/references",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,id:t})})}catch(r){console.error("Error saving reference:",r)}}}const ve=new At,It="Hotel Mui Ne",Et="AI-powered Voice Assistant - Supporting All Your Needs",Pt="Press to Call",Ot="Room & Stay",Ft="Room Services",Lt="Bookings & Facilities",Bt="Tourism & Exploration",zt="Support to book external services",qt="Order Ref",Wt="Requested At",Ht="Estimated Completion",Vt="Time Remaining",Xt="Mute",Yt="Unmute",Ut="Confirm",Gt="Please speak to the assistant first.",Kt="Tap to speak",Jt="Order Summary",Zt="Send to Reception",Qt="Add Note",es="Room Number",ts="Enter room number",ss="Enter additional notes",ns="Summary",os="Generated at",rs="Order Confirmed!",is="Your request has been confirmed and forwarded to our staff. They will process it right away.",as="Order Reference",cs="Estimated delivery time:",ls="Return to Home",ds="Language",ms="English",us="French",hs="Send",xs="Cancel",ps="Confirm your request",fs="Room",gs="Order ID",bs="Guest Name",_s="Content",ys="Time",vs="Status",ws="Action",js="Message Guest",Ns="Staff Request Management",$s="Login",Ss="Username",ks="Password",Cs="Tap the call button to start your request.",Ts="Review and confirm your request for accuracy.",Rs="Your request will be sent to the reception for processing.",Ms="Acknowledged",Ds="In Progress",As="Delivering to You",Is="Completed",Es="Special Note",Ps="Check-in/Check-out",Os="Extended Stay Request",Fs="Room Information",Ls="Hotel Policies",Bs="Wi-Fi Services",zs="Room Service Food",qs="Drinks & Bar Service",Ws="Room Cleaning",Hs="Laundry Service",Vs="Wake-up Call",Xs="Additional Amenities",Ys="Maintenance Request",Us="Restaurant Reservation",Gs="Spa Services",Ks="Fitness Center",Js="Swimming Pool",Zs="Car Rental",Qs="Medical Assistance",en="Customer Support",tn="Local Attractions",sn="Local Restaurants",nn="Public Transportation",on="Local Events",rn="Shopping Areas",an="Area Maps",cn="Translation Services",ln="Leave a Review",dn="Report an Issue",mn="Luggage Services",un={hotel_name:It,hotel_subtitle:Et,press_to_call:Pt,room_and_stay:Ot,room_services:Ft,bookings_and_facilities:Lt,tourism_and_exploration:Bt,support_external_services:zt,order_ref:qt,requested_at:Wt,estimated_completion:Ht,time_remaining:Vt,mute:Xt,unmute:Yt,confirm:Ut,need_conversation:Gt,tap_to_speak:Kt,order_summary:Jt,send_to_reception:Zt,add_note:Qt,room_number:es,enter_room_number:ts,enter_notes:ss,summary:ns,generated_at:os,order_confirmed:rs,order_confirmed_message:is,order_reference:as,estimated_delivery_time:cs,return_to_home:ls,language:ds,english:ms,french:us,send:hs,cancel:xs,confirm_request:ps,room:fs,order_id:gs,guest_name:bs,content:_s,time:ys,status:vs,action:ws,message_guest:js,request_management:Ns,login:$s,username:Ss,password:ks,press_to_call_desc:Cs,confirm_request_desc:Ts,send_to_reception_desc:Rs,status_acknowledged:Ms,status_in_progress:Ds,status_delivering:As,status_completed:Is,status_note:Es,icon_login:Ps,icon_hourglass_empty:Os,icon_info:Fs,icon_policy:Ls,icon_wifi:Bs,icon_restaurant:zs,icon_local_bar:qs,icon_cleaning_services:Ws,icon_local_laundry_service:Hs,icon_alarm:Vs,icon_add_circle:Xs,icon_build:Ys,icon_event_seat:Us,icon_spa:Gs,icon_fitness_center:Ks,icon_pool:Js,icon_directions_car:Zs,icon_medical_services:Qs,icon_support_agent:en,icon_location_on:tn,icon_local_dining:sn,icon_directions_bus:nn,icon_event:on,icon_shopping_bag:rn,icon_map:an,icon_translate:cn,icon_rate_review:ln,icon_report_problem:dn,icon_luggage:mn},hn="Bienvenue Ã  Mi Nhon Hotel",xn="Commencer",pn="Langue",fn="Anglais",gn="FranÃ§ais",bn="Envoyer",_n="Annuler",yn="Confirmer la demande",vn="Chambre",wn="ID de commande",jn="Nom du client",Nn="Contenu",$n="Heure",Sn="Statut",kn="Action",Cn="Message au client",Tn="Gestion des demandes du personnel",Rn="Connexion",Mn="Nom d'utilisateur",Dn="Mot de passe",An="Hotel Mui Ne",In="Assistant vocal IA - Ã€ votre service pour tous vos besoins",En="Appuyez pour appeler",Pn="Chambre & SÃ©jour",On="Services de chambre",Fn="RÃ©servations & Installations",Ln="Tourisme & Exploration",Bn="Assistance pour services externes",zn="RÃ©f. commande",qn="DemandÃ© Ã ",Wn="Fin estimÃ©e",Hn="Temps restant",Vn="Muet",Xn="RÃ©tablir le son",Yn="Confirmer",Un="Veuillez d'abord parler avec l'assistant.",Gn="Appuyez pour parler",Kn="RÃ©capitulatif de la commande",Jn="Envoyer Ã  la rÃ©ception",Zn="Ajouter une note",Qn="NumÃ©ro de chambre",eo="Saisir le numÃ©ro de chambre",to="Saisir des notes supplÃ©mentaires",so="RÃ©sumÃ©",no="GÃ©nÃ©rÃ© Ã ",oo="Commande confirmÃ©e !",ro="Votre demande a Ã©tÃ© confirmÃ©e et transmise Ã  notre personnel. Elle sera traitÃ©e immÃ©diatement.",io="RÃ©fÃ©rence de la commande",ao="Heure de livraison estimÃ©e :",co="Retour Ã  l'accueil",lo="Appuyez sur le bouton d'appel pour dÃ©marrer votre demande.",mo="VÃ©rifiez et confirmez votre demande pour plus de prÃ©cision.",uo="Votre demande sera envoyÃ©e Ã  la rÃ©ception pour traitement.",ho="ReÃ§ue",xo="En cours",po="En livraison",fo="TerminÃ©e",go="Note spÃ©ciale",bo="ArrivÃ©e/DÃ©part",_o="Prolongation de sÃ©jour",yo="Informations sur la chambre",vo="Politiques de l'hÃ´tel",wo="Services Wi-Fi",jo="Service de restauration",No="Service de bar",$o="Nettoyage de chambre",So="Service de blanchisserie",ko="Service de rÃ©veil",Co="AmÃ©nitÃ©s supplÃ©mentaires",To="Demande de maintenance",Ro="RÃ©servation au restaurant",Mo="Services de spa",Do="Centre de fitness",Ao="Piscine",Io="Location de voiture",Eo="Assistance mÃ©dicale",Po="Service client",Oo="Attractions locales",Fo="Restaurants locaux",Lo="Transports publics",Bo="Ã‰vÃ©nements locaux",zo="Zones commerciales",qo="Cartes de la rÃ©gion",Wo="Services de traduction",Ho="Laisser un avis",Vo="Signaler un problÃ¨me",Xo="Services de bagagerie",Yo={welcome:hn,start:xn,language:pn,english:fn,french:gn,send:bn,cancel:_n,confirm_request:yn,room:vn,order_id:wn,guest_name:jn,content:Nn,time:$n,status:Sn,action:kn,message_guest:Cn,request_management:Tn,login:Rn,username:Mn,password:Dn,hotel_name:An,hotel_subtitle:In,press_to_call:En,room_and_stay:Pn,room_services:On,bookings_and_facilities:Fn,tourism_and_exploration:Ln,support_external_services:Bn,order_ref:zn,requested_at:qn,estimated_completion:Wn,time_remaining:Hn,mute:Vn,unmute:Xn,confirm:Yn,need_conversation:Un,tap_to_speak:Gn,order_summary:Kn,send_to_reception:Jn,add_note:Zn,room_number:Qn,enter_room_number:eo,enter_notes:to,summary:so,generated_at:no,order_confirmed:oo,order_confirmed_message:ro,order_reference:io,estimated_delivery_time:ao,return_to_home:co,press_to_call_desc:lo,confirm_request_desc:mo,send_to_reception_desc:uo,status_acknowledged:ho,status_in_progress:xo,status_delivering:po,status_completed:fo,status_note:go,icon_login:bo,icon_hourglass_empty:_o,icon_info:yo,icon_policy:vo,icon_wifi:wo,icon_restaurant:jo,icon_local_bar:No,icon_cleaning_services:$o,icon_local_laundry_service:So,icon_alarm:ko,icon_add_circle:Co,icon_build:To,icon_event_seat:Ro,icon_spa:Mo,icon_fitness_center:Do,icon_pool:Ao,icon_directions_car:Io,icon_medical_services:Eo,icon_support_agent:Po,icon_location_on:Oo,icon_local_dining:Fo,icon_directions_bus:Lo,icon_event:Bo,icon_shopping_bag:zo,icon_map:qo,icon_translate:Wo,icon_rate_review:Ho,icon_report_problem:Vo,icon_luggage:Xo},Uo="æ¬¢è¿Žæ¥åˆ°ç¾Žå†œé…’åº— (Mi Nhon Hotel)",Go="å¼€å§‹",Ko="è¯­è¨€",Jo="è‹±è¯­",Zo="æ³•è¯­",Qo="å‘é€",er="å–æ¶ˆ",tr="ç¡®è®¤è¯·æ±‚",sr="æˆ¿é—´",nr="è®¢å•ç¼–å·",or="å®¢äººå§“å",rr="å†…å®¹",ir="æ—¶é—´",ar="çŠ¶æ€",cr="æ“ä½œ",lr="ç»™å®¢äººçš„æ¶ˆæ¯",dr="å‘˜å·¥è¯·æ±‚ç®¡ç†",mr="ç™»å½•",ur="ç”¨æˆ·å",hr="å¯†ç ",xr="é…’åº— Mui Ne",pr="AIè¯­éŸ³åŠ©æ‰‹ - æ»¡è¶³æ‚¨çš„æ‰€æœ‰éœ€æ±‚",fr="æŒ‰ä¸‹å‘¼å«",gr="æˆ¿é—´ä¸Žä½å®¿",br="å®¢æˆ¿æœåŠ¡",_r="é¢„è®¢ä¸Žè®¾æ–½",yr="æ—…æ¸¸ä¸ŽæŽ¢ç´¢",vr="æ”¯æŒå¤–éƒ¨æœåŠ¡",wr="è®¢å•å‚è€ƒ",jr="è¯·æ±‚æ—¶é—´",Nr="é¢„è®¡å®Œæˆæ—¶é—´",$r="å‰©ä½™æ—¶é—´",Sr="é™éŸ³",kr="å–æ¶ˆé™éŸ³",Cr="ç¡®è®¤",Tr="è¯·å…ˆä¸ŽåŠ©æ‰‹å¯¹è¯ã€‚",Rr="ç‚¹å‡»è¯´è¯",Mr="è®¢å•æ‘˜è¦",Dr="å‘é€åˆ°å‰å°",Ar="æ·»åŠ å¤‡æ³¨",Ir="æˆ¿é—´å·",Er="è¾“å…¥æˆ¿é—´å·",Pr="è¾“å…¥é™„åŠ å¤‡æ³¨",Or="æ‘˜è¦",Fr="ç”Ÿæˆæ—¶é—´",Lr="è®¢å•å·²ç¡®è®¤ï¼",Br="æ‚¨çš„è¯·æ±‚å·²ç¡®è®¤å¹¶å‘é€ç»™æˆ‘ä»¬çš„å‘˜å·¥ã€‚æˆ‘ä»¬ä¼šç«‹å³å¤„ç†ã€‚",zr="è®¢å•å‚è€ƒ",qr="é¢„è®¡é€è¾¾æ—¶é—´ï¼š",Wr="è¿”å›žé¦–é¡µ",Hr="ç‚¹å‡»å‘¼å«æŒ‰é’®å¼€å§‹æ‚¨çš„è¯·æ±‚ã€‚",Vr="è¯·æ£€æŸ¥å¹¶ç¡®è®¤æ‚¨çš„è¯·æ±‚ä»¥ç¡®ä¿å‡†ç¡®ã€‚",Xr="æ‚¨çš„è¯·æ±‚å°†è¢«å‘é€åˆ°å‰å°è¿›è¡Œå¤„ç†ã€‚",Yr="å·²ç¡®è®¤",Ur="å¤„ç†ä¸­",Gr="é…é€ä¸­",Kr="å·²å®Œæˆ",Jr="ç‰¹åˆ«è¯´æ˜Ž",Zr="å…¥ä½/é€€æˆ¿",Qr="å»¶é•¿ä½å®¿è¯·æ±‚",ei="æˆ¿é—´ä¿¡æ¯",ti="é…’åº—æ”¿ç­–",si="æ— çº¿ç½‘ç»œæœåŠ¡",ni="å®¢æˆ¿é¤é¥®æœåŠ¡",oi="é¥®å“ä¸Žé…’å§æœåŠ¡",ri="æˆ¿é—´æ¸…æ´",ii="æ´—è¡£æœåŠ¡",ai="å”¤é†’æœåŠ¡",ci="é¢å¤–è®¾æ–½",li="ç»´ä¿®è¯·æ±‚",di="é¤åŽ…é¢„è®¢",mi="æ°´ç–—æœåŠ¡",ui="å¥èº«ä¸­å¿ƒ",hi="æ¸¸æ³³æ± ",xi="ç§Ÿè½¦æœåŠ¡",pi="åŒ»ç–—æ´åŠ©",fi="å®¢æˆ·æ”¯æŒ",gi="å½“åœ°æ™¯ç‚¹",bi="å½“åœ°é¤åŽ…",_i="å…¬å…±äº¤é€š",yi="å½“åœ°æ´»åŠ¨",vi="è´­ç‰©åŒºåŸŸ",wi="åŒºåŸŸåœ°å›¾",ji="ç¿»è¯‘æœåŠ¡",Ni="ç•™ä¸‹è¯„è®º",$i="æŠ¥å‘Šé—®é¢˜",Si="è¡ŒæŽæœåŠ¡",ki={welcome:Uo,start:Go,language:Ko,english:Jo,french:Zo,send:Qo,cancel:er,confirm_request:tr,room:sr,order_id:nr,guest_name:or,content:rr,time:ir,status:ar,action:cr,message_guest:lr,request_management:dr,login:mr,username:ur,password:hr,hotel_name:xr,hotel_subtitle:pr,press_to_call:fr,room_and_stay:gr,room_services:br,bookings_and_facilities:_r,tourism_and_exploration:yr,support_external_services:vr,order_ref:wr,requested_at:jr,estimated_completion:Nr,time_remaining:$r,mute:Sr,unmute:kr,confirm:Cr,need_conversation:Tr,tap_to_speak:Rr,order_summary:Mr,send_to_reception:Dr,add_note:Ar,room_number:Ir,enter_room_number:Er,enter_notes:Pr,summary:Or,generated_at:Fr,order_confirmed:Lr,order_confirmed_message:Br,order_reference:zr,estimated_delivery_time:qr,return_to_home:Wr,press_to_call_desc:Hr,confirm_request_desc:Vr,send_to_reception_desc:Xr,status_acknowledged:Yr,status_in_progress:Ur,status_delivering:Gr,status_completed:Kr,status_note:Jr,icon_login:Zr,icon_hourglass_empty:Qr,icon_info:ei,icon_policy:ti,icon_wifi:si,icon_restaurant:ni,icon_local_bar:oi,icon_cleaning_services:ri,icon_local_laundry_service:ii,icon_alarm:ai,icon_add_circle:ci,icon_build:li,icon_event_seat:di,icon_spa:mi,icon_fitness_center:ui,icon_pool:hi,icon_directions_car:xi,icon_medical_services:pi,icon_support_agent:fi,icon_location_on:gi,icon_local_dining:bi,icon_directions_bus:_i,icon_event:yi,icon_shopping_bag:vi,icon_map:wi,icon_translate:ji,icon_rate_review:Ni,icon_report_problem:$i,icon_luggage:Si},Ci="Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð¾Ñ‚ÐµÐ»ÑŒ Mi Nhon",Ti="ÐÐ°Ñ‡Ð°Ñ‚ÑŒ",Ri="Ð¯Ð·Ñ‹Ðº",Mi="ÐÐ½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ð¹",Di="Ð¤Ñ€Ð°Ð½Ñ†ÑƒÐ·ÑÐºÐ¸Ð¹",Ai="Ð ÑƒÑÑÐºÐ¸Ð¹",Ii="ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ",Ei="ÐžÑ‚Ð¼ÐµÐ½Ð°",Pi="ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ",Oi="ÐÐ¾Ð¼ÐµÑ€",Fi="ID Ð·Ð°ÐºÐ°Ð·Ð°",Li="Ð˜Ð¼Ñ Ð³Ð¾ÑÑ‚Ñ",Bi="Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ",zi="Ð’Ñ€ÐµÐ¼Ñ",qi="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",Wi="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ",Hi="Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð³Ð¾ÑÑ‚ÑŽ",Vi="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð°",Xi="Ð’Ñ…Ð¾Ð´",Yi="Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ",Ui="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ",Gi="ÐžÑ‚ÐµÐ»ÑŒ Mui Ne",Ki="Ð˜Ð˜-Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð²ÑÐµÑ… Ð²Ð°ÑˆÐ¸Ñ… Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹",Ji="ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð·Ð²Ð¾Ð½ÐºÐ°",Zi="ÐÐ¾Ð¼ÐµÑ€ Ð¸ Ð¿Ñ€Ð¾Ð¶Ð¸Ð²Ð°Ð½Ð¸Ðµ",Qi="Ð£ÑÐ»ÑƒÐ³Ð¸ Ð½Ð¾Ð¼ÐµÑ€Ð°",ea="Ð‘Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°",ta="Ð¢ÑƒÑ€Ð¸Ð·Ð¼ Ð¸ Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ",sa="ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð²Ð½ÐµÑˆÐ½Ð¸Ñ… ÑƒÑÐ»ÑƒÐ³",na="Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð·Ð°ÐºÐ°Ð·",oa="Ð—Ð°Ð¿Ñ€Ð¾ÑˆÐµÐ½Ð¾ Ð²",ra="ÐŸÑ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÐ¼Ð¾Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ",ia="ÐžÑÑ‚Ð°Ð²ÑˆÐµÐµÑÑ Ð²Ñ€ÐµÐ¼Ñ",aa="Ð‘ÐµÐ· Ð·Ð²ÑƒÐºÐ°",ca="Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð·Ð²ÑƒÐº",la="ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ",da="ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚Ðµ Ñ Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚Ð¾Ð¼.",ma="ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ",ua="Ð¡Ð²Ð¾Ð´ÐºÐ° Ð·Ð°ÐºÐ°Ð·Ð°",ha="ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° Ñ€ÐµÑÐµÐ¿ÑˆÐµÐ½",xa="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÑ‚ÐºÑƒ",pa="ÐÐ¾Ð¼ÐµÑ€ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹",fa="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹",ga="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð·Ð°Ð¼ÐµÑ‚ÐºÐ¸",ba="Ð¡Ð²Ð¾Ð´ÐºÐ°",_a="Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð²",ya="Ð—Ð°ÐºÐ°Ð· Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½!",va="Ð’Ð°Ñˆ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½ Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½ Ð½Ð°ÑˆÐµÐ¼Ñƒ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ñƒ. ÐžÐ½Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ ÐµÐ³Ð¾ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾.",wa="Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð·Ð°ÐºÐ°Ð·",ja="ÐŸÑ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÐ¼Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸:",Na="Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ð½Ð° Ð³Ð»Ð°Ð²Ð½ÑƒÑŽ",$a="ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð²Ñ‹Ð·Ð¾Ð²Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð²Ð°Ñˆ Ð·Ð°Ð¿Ñ€Ð¾Ñ.",Sa="ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¸ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð´Ð»Ñ Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚Ð¸.",ka="Ð’Ð°Ñˆ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½ Ð½Ð° Ñ€ÐµÑÐµÐ¿ÑˆÐµÐ½ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸.",Ca="ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¾",Ta="Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ",Ra="Ð”Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ÑÑ",Ma="Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾",Da="ÐžÑÐ¾Ð±Ð°Ñ Ð·Ð°Ð¼ÐµÑ‚ÐºÐ°",Aa="Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ/Ð’Ñ‹ÑÐµÐ»ÐµÐ½Ð¸Ðµ",Ia="Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¶Ð¸Ð²Ð°Ð½Ð¸Ñ",Ea="Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð½Ð¾Ð¼ÐµÑ€Ðµ",Pa="ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ð¾Ñ‚ÐµÐ»Ñ",Oa="Wi-Fi ÑƒÑÐ»ÑƒÐ³Ð¸",Fa="Ð ÐµÑÑ‚Ð¾Ñ€Ð°Ð½Ð½Ð¾Ðµ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð²",La="ÐÐ°Ð¿Ð¸Ñ‚ÐºÐ¸ Ð¸ Ð±Ð°Ñ€",Ba="Ð£Ð±Ð¾Ñ€ÐºÐ° Ð½Ð¾Ð¼ÐµÑ€Ð°",za="Ð£ÑÐ»ÑƒÐ³Ð¸ Ð¿Ñ€Ð°Ñ‡ÐµÑ‡Ð½Ð¾Ð¹",qa="Ð£ÑÐ»ÑƒÐ³Ð° Ð±ÑƒÐ´Ð¸Ð»ÑŒÐ½Ð¸ÐºÐ°",Wa="Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð°",Ha="Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ",Va="Ð‘Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½Ð°",Xa="Ð¡ÐŸÐ ÑƒÑÐ»ÑƒÐ³Ð¸",Ya="Ð¤Ð¸Ñ‚Ð½ÐµÑ-Ñ†ÐµÐ½Ñ‚Ñ€",Ua="Ð‘Ð°ÑÑÐµÐ¹Ð½",Ga="ÐÑ€ÐµÐ½Ð´Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ",Ka="ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ°Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ",Ja="ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²",Za="ÐœÐµÑÑ‚Ð½Ñ‹Ðµ Ð´Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸",Qa="ÐœÐµÑÑ‚Ð½Ñ‹Ðµ Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½Ñ‹",ec="ÐžÐ±Ñ‰ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚",tc="ÐœÐµÑÑ‚Ð½Ñ‹Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ",sc="Ð¢Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹",nc="ÐšÐ°Ñ€Ñ‚Ñ‹ Ð¼ÐµÑÑ‚Ð½Ð¾ÑÑ‚Ð¸",oc="Ð£ÑÐ»ÑƒÐ³Ð¸ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð°",rc="ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð²",ic="Ð¡Ð¾Ð¾Ð±Ñ‰Ð¸Ñ‚ÑŒ Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ðµ",ac="Ð£ÑÐ»ÑƒÐ³Ð¸ Ð±Ð°Ð³Ð°Ð¶Ð°",cc={welcome:Ci,start:Ti,language:Ri,english:Mi,french:Di,russian:Ai,send:Ii,cancel:Ei,confirm_request:Pi,room:Oi,order_id:Fi,guest_name:Li,content:Bi,time:zi,status:qi,action:Wi,message_guest:Hi,request_management:Vi,login:Xi,username:Yi,password:Ui,hotel_name:Gi,hotel_subtitle:Ki,press_to_call:Ji,room_and_stay:Zi,room_services:Qi,bookings_and_facilities:ea,tourism_and_exploration:ta,support_external_services:sa,order_ref:na,requested_at:oa,estimated_completion:ra,time_remaining:ia,mute:aa,unmute:ca,confirm:la,need_conversation:da,tap_to_speak:ma,order_summary:ua,send_to_reception:ha,add_note:xa,room_number:pa,enter_room_number:fa,enter_notes:ga,summary:ba,generated_at:_a,order_confirmed:ya,order_confirmed_message:va,order_reference:wa,estimated_delivery_time:ja,return_to_home:Na,press_to_call_desc:$a,confirm_request_desc:Sa,send_to_reception_desc:ka,status_acknowledged:Ca,status_in_progress:Ta,status_delivering:Ra,status_completed:Ma,status_note:Da,icon_login:Aa,icon_hourglass_empty:Ia,icon_info:Ea,icon_policy:Pa,icon_wifi:Oa,icon_restaurant:Fa,icon_local_bar:La,icon_cleaning_services:Ba,icon_local_laundry_service:za,icon_alarm:qa,icon_add_circle:Wa,icon_build:Ha,icon_event_seat:Va,icon_spa:Xa,icon_fitness_center:Ya,icon_pool:Ua,icon_directions_car:Ga,icon_medical_services:Ka,icon_support_agent:Ja,icon_location_on:Za,icon_local_dining:Qa,icon_directions_bus:ec,icon_event:tc,icon_shopping_bag:sc,icon_map:nc,icon_translate:oc,icon_rate_review:rc,icon_report_problem:ic,icon_luggage:ac},lc="ë¯¸ë…„ í˜¸í…”ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤",dc="ì‹œìž‘",mc="ì–¸ì–´",uc="ì˜ì–´",hc="í”„ëž‘ìŠ¤ì–´",xc="ëŸ¬ì‹œì•„ì–´",pc="í•œêµ­ì–´",fc="ë³´ë‚´ê¸°",gc="ì·¨ì†Œ",bc="ìš”ì²­ í™•ì¸",_c="ê°ì‹¤",yc="ì£¼ë¬¸ ID",vc="íˆ¬ìˆ™ê° ì´ë¦„",wc="ë‚´ìš©",jc="ì‹œê°„",Nc="ìƒíƒœ",$c="ë™ìž‘",Sc="ê²ŒìŠ¤íŠ¸ì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°",kc="ì§ì› ìš”ì²­ ê´€ë¦¬",Cc="ë¡œê·¸ì¸",Tc="ì‚¬ìš©ìž ì´ë¦„",Rc="ë¹„ë°€ë²ˆí˜¸",Mc="ë¬´ì´ë„¤ í˜¸í…”",Dc="AI ì–´ì‹œìŠ¤í„´íŠ¸ - ëª¨ë“  í•„ìš”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤",Ac="í˜¸ì¶œí•˜ë ¤ë©´ ëˆ„ë¥´ì„¸ìš”",Ic="ê°ì‹¤ ë° ìˆ™ë°•",Ec="ê°ì‹¤ ì„œë¹„ìŠ¤",Pc="ì˜ˆì•½ ë° ì‹œì„¤",Oc="ê´€ê´‘ ë° íƒí—˜",Fc="ì™¸ë¶€ ì„œë¹„ìŠ¤ ì§€ì›",Lc="ì£¼ë¬¸ ì°¸ì¡°",Bc="ìš”ì²­ ì‹œê°„",zc="ì˜ˆìƒ ì™„ë£Œ ì‹œê°„",qc="ë‚¨ì€ ì‹œê°„",Wc="ìŒì†Œê±°",Hc="ìŒì†Œê±° í•´ì œ",Vc="í™•ì¸",Xc="ë¨¼ì € ì–´ì‹œìŠ¤í„´íŠ¸ì™€ ëŒ€í™”í•´ ì£¼ì„¸ìš”.",Yc="ë§í•˜ë ¤ë©´ ëˆ„ë¥´ì„¸ìš”",Uc="ì£¼ë¬¸ ìš”ì•½",Gc="í”„ëŸ°íŠ¸ë¡œ ë³´ë‚´ê¸°",Kc="ë©”ëª¨ ì¶”ê°€",Jc="ê°ì‹¤ ë²ˆí˜¸",Zc="ê°ì‹¤ ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”",Qc="ì¶”ê°€ ë©”ëª¨ë¥¼ ìž…ë ¥í•˜ì„¸ìš”",el="ìš”ì•½",tl="ìƒì„± ì‹œê°„",sl="ì£¼ë¬¸ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!",nl="ê·€í•˜ì˜ ìš”ì²­ì´ í™•ì¸ë˜ì–´ ì§ì›ì—ê²Œ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ ì²˜ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.",ol="ì£¼ë¬¸ ì°¸ì¡°",rl="ì˜ˆìƒ ë°°ë‹¬ ì‹œê°„:",il="í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°",al="ìš”ì²­ì„ ì‹œìž‘í•˜ë ¤ë©´ í˜¸ì¶œ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.",cl="ì •í™•ì„±ì„ ìœ„í•´ ìš”ì²­ì„ í™•ì¸í•˜ì„¸ìš”.",ll="ê·€í•˜ì˜ ìš”ì²­ì´ í”„ëŸ°íŠ¸ë¡œ ì „ì†¡ë˜ì–´ ì²˜ë¦¬ë©ë‹ˆë‹¤.",dl="ì ‘ìˆ˜ë¨",ml="ì²˜ë¦¬ ì¤‘",ul="ë°°ë‹¬ ì¤‘",hl="ì™„ë£Œë¨",xl="íŠ¹ë³„ ì•ˆë‚´",pl="ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ",fl="ìˆ™ë°• ì—°ìž¥ ìš”ì²­",gl="ê°ì‹¤ ì •ë³´",bl="í˜¸í…” ì •ì±…",_l="ì™€ì´íŒŒì´ ì„œë¹„ìŠ¤",yl="ë£¸ì„œë¹„ìŠ¤ ìŒì‹",vl="ìŒë£Œ ë° ë°” ì„œë¹„ìŠ¤",wl="ê°ì‹¤ ì²­ì†Œ",jl="ì„¸íƒ ì„œë¹„ìŠ¤",Nl="ëª¨ë‹ì½œ ì„œë¹„ìŠ¤",$l="ì¶”ê°€ íŽ¸ì˜ ì‹œì„¤",Sl="ìœ ì§€ë³´ìˆ˜ ìš”ì²­",kl="ë ˆìŠ¤í† ëž‘ ì˜ˆì•½",Cl="ìŠ¤íŒŒ ì„œë¹„ìŠ¤",Tl="í”¼íŠ¸ë‹ˆìŠ¤ ì„¼í„°",Rl="ìˆ˜ì˜ìž¥",Ml="ë Œí„°ì¹´",Dl="ì˜ë£Œ ì§€ì›",Al="ê³ ê° ì§€ì›",Il="ì§€ì—­ ëª…ì†Œ",El="ì§€ì—­ ë ˆìŠ¤í† ëž‘",Pl="ëŒ€ì¤‘êµí†µ",Ol="ì§€ì—­ ì´ë²¤íŠ¸",Fl="ì‡¼í•‘ ì§€ì—­",Ll="ì§€ì—­ ì§€ë„",Bl="ë²ˆì—­ ì„œë¹„ìŠ¤",zl="ë¦¬ë·° ë‚¨ê¸°ê¸°",ql="ë¬¸ì œ ì‹ ê³ ",Wl="ìˆ˜í™”ë¬¼ ì„œë¹„ìŠ¤",Hl={welcome:lc,start:dc,language:mc,english:uc,french:hc,russian:xc,korean:pc,send:fc,cancel:gc,confirm_request:bc,room:_c,order_id:yc,guest_name:vc,content:wc,time:jc,status:Nc,action:$c,message_guest:Sc,request_management:kc,login:Cc,username:Tc,password:Rc,hotel_name:Mc,hotel_subtitle:Dc,press_to_call:Ac,room_and_stay:Ic,room_services:Ec,bookings_and_facilities:Pc,tourism_and_exploration:Oc,support_external_services:Fc,order_ref:Lc,requested_at:Bc,estimated_completion:zc,time_remaining:qc,mute:Wc,unmute:Hc,confirm:Vc,need_conversation:Xc,tap_to_speak:Yc,order_summary:Uc,send_to_reception:Gc,add_note:Kc,room_number:Jc,enter_room_number:Zc,enter_notes:Qc,summary:el,generated_at:tl,order_confirmed:sl,order_confirmed_message:nl,order_reference:ol,estimated_delivery_time:rl,return_to_home:il,press_to_call_desc:al,confirm_request_desc:cl,send_to_reception_desc:ll,status_acknowledged:dl,status_in_progress:ml,status_delivering:ul,status_completed:hl,status_note:xl,icon_login:pl,icon_hourglass_empty:fl,icon_info:gl,icon_policy:bl,icon_wifi:_l,icon_restaurant:yl,icon_local_bar:vl,icon_cleaning_services:wl,icon_local_laundry_service:jl,icon_alarm:Nl,icon_add_circle:$l,icon_build:Sl,icon_event_seat:kl,icon_spa:Cl,icon_fitness_center:Tl,icon_pool:Rl,icon_directions_car:Ml,icon_medical_services:Dl,icon_support_agent:Al,icon_location_on:Il,icon_local_dining:El,icon_directions_bus:Pl,icon_event:Ol,icon_shopping_bag:Fl,icon_map:Ll,icon_translate:Bl,icon_rate_review:zl,icon_report_problem:ql,icon_luggage:Wl},Vl={en:un,fr:Yo,zh:ki,ru:cc,ko:Hl};function S(n,t="en"){return Vl[t][n]||n}const Xl=Me("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-[10px] text-base font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-5 [&_svg]:shrink-0 shadow-sm px-5 py-2",{variants:{variant:{default:"bg-gradient-to-tr from-[#4e5ab7] to-[#3f51b5] text-white hover:brightness-110 hover:shadow-lg",yellow:"bg-gradient-to-b from-[#ffe066] to-[#ffd700] text-blue-900 border-2 border-[#d4af37] shadow-xl hover:brightness-105 hover:shadow-2xl text-shadow-white",outline:"border-2 border-[#4e5ab7] bg-white text-[#4e5ab7] hover:bg-[#f5f7fa]",secondary:"bg-white text-[#4e5ab7] border border-[#4e5ab7] hover:bg-[#e8eaf6]",destructive:"bg-red-500 text-white hover:bg-red-600",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-md px-4 py-2 text-sm",lg:"h-14 rounded-xl px-8 py-3 text-lg",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),ie=a.forwardRef(({className:n,variant:t,size:s,asChild:r=!1,...i},m)=>{const u=r?Ge:"button";return e.jsx(u,{className:G(Xl({variant:t,size:s,className:n})),ref:m,...i})});ie.displayName="Button";const Yl=({isActive:n})=>{const{transcripts:t,callDetails:s,callDuration:r,endCall:i,isMuted:m,toggleMute:u,setCurrentInterface:c,micLevel:h,modelOutput:j,language:v}=J(),[_,A]=a.useState({}),C=a.useRef({}),[b,H]=a.useState([]),[l,w]=a.useState([]),[M,V]=a.useState(0),y=a.useRef(null),[F,N]=a.useState(!0),o=()=>{Object.values(C.current).forEach(f=>{cancelAnimationFrame(f)}),C.current={}};a.useEffect(()=>{async function f(){await ve.initialize();const x=Object.values(ve.referenceMap||{});console.log("All references loaded:",x),w(x)}f()},[]),a.useEffect(()=>{const f=[...t].sort((T,z)=>T.timestamp.getTime()-z.timestamp.getTime()),x=[];let g=null;f.forEach(T=>{T.role==="user"?(g={id:T.id.toString(),role:"user",timestamp:T.timestamp,messages:[{id:T.id.toString(),content:T.content,timestamp:T.timestamp}]},x.push(g)):((!g||g.role==="user")&&(g={id:T.id.toString(),role:"assistant",timestamp:T.timestamp,messages:[]},x.push(g)),g.messages.push({id:T.id.toString(),content:T.content,timestamp:T.timestamp}))}),H(x)},[t]),a.useEffect(()=>(b.filter(x=>x.role==="assistant").flatMap(x=>x.messages).forEach(x=>{if(_[x.id]===x.content.length)return;let g=_[x.id]||0;const T=x.content,z=()=>{g<T.length?(A(L=>({...L,[x.id]:g+1})),g++,C.current[x.id]=requestAnimationFrame(z)):delete C.current[x.id]};C.current[x.id]=requestAnimationFrame(z)}),()=>o()),[b]);const p=a.useCallback(()=>{const f=r>0?r:M;console.log("Canceling call with duration:",f),i(),c("interface1")},[r,M,i,c]),k=a.useCallback(()=>{if(!t||t.length===0){alert(S("need_conversation",v));return}const f=r>0?r:M;console.log("Ending call with duration:",f),i(),c(v==="fr"?"interface3fr":v==="vi"?"interface3vi":"interface3")},[r,M,i,c,t,v]),E=f=>{const x=Math.floor(f/60).toString().padStart(2,"0"),g=(f%60).toString().padStart(2,"0");return`${x}:${g}`};return a.useEffect(()=>{let f=null;return n&&(console.log("Interface2 is active, starting local timer"),V(r||0),f=setInterval(()=>{V(x=>x+1)},1e3)),()=>{f&&(console.log("Cleaning up local timer in Interface2"),clearInterval(f))}},[n,r]),a.useEffect(()=>{y.current&&n&&(y.current.scrollTop=0)},[b,n]),e.jsx("div",{className:`absolute w-full min-h-screen h-full transition-opacity duration-500 ${n?"opacity-100":"opacity-0 pointer-events-none"} z-20 overflow-y-auto`,id:"interface2",style:{backgroundImage:"linear-gradient(rgba(85,154,154,0.7), rgba(121, 219, 220, 0.6)), url('/assets/courtyard.jpeg')",backgroundSize:"cover",backgroundPosition:"center"},children:e.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row p-2 h-full gap-2",children:[e.jsxs("div",{className:"w-full md:w-3/4 lg:w-2/3 flex flex-col items-center space-y-1 sm:space-y-4 mt-1 min-h-0 overflow-y-auto",children:[e.jsxs("div",{className:"relative flex flex-col items-center justify-center mb-1 sm:mb-6 w-full max-w-xs mx-auto",children:[e.jsx(Dt,{containerId:"siri-button",isListening:!m,volumeLevel:h}),e.jsxs("div",{className:"flex items-center justify-center mt-2 w-full gap-2 sm:gap-3",children:[e.jsx("button",{className:"flex items-center justify-center transition-colors",title:S(m?"unmute":"mute",v),onClick:u,style:{fontSize:22,padding:0,background:"none",border:"none",color:"#d4af37",width:28,height:28},onMouseOver:f=>f.currentTarget.style.color="#ffd700",onMouseOut:f=>f.currentTarget.style.color="#d4af37",children:e.jsx("span",{className:"material-icons",children:m?"mic_off":"mic"})}),e.jsxs("button",{id:"cancelButton",onClick:p,className:"flex items-center justify-center px-3 py-2 bg-white/80 hover:bg-blue-100 text-blue-900 rounded-full text-xs font-semibold border-2 border-blue-200 shadow transition-colors sm:hidden active:scale-95 active:bg-blue-100",style:{fontFamily:"inherit",letterSpacing:.2,minHeight:44,minWidth:90,fontSize:14,touchAction:"manipulation",zIndex:10},children:[e.jsx("span",{className:"material-icons text-base mr-1",children:"cancel"}),S("cancel",v)]}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx("div",{className:"text-white text-xs sm:text-sm bg-blue-900/80 rounded-full px-3 sm:px-4 py-1 shadow-lg border border-white/30 flex items-center justify-center",style:{backdropFilter:"blur(2px)"},children:E(M)})}),e.jsxs(ie,{id:"confirmButton",onClick:k,variant:"yellow",className:"flex items-center justify-center sm:hidden text-xs font-bold",style:{minHeight:44,minWidth:120,fontSize:14,zIndex:10},children:[e.jsx("span",{className:"material-icons text-lg mr-2",children:"send"}),S("confirm",v)]}),e.jsxs("button",{className:"flex items-center justify-center transition-colors",title:"Mic Level",style:{fontSize:22,padding:0,background:"none",border:"none",color:"#d4af37",width:28,height:28},tabIndex:-1,disabled:!0,onMouseOver:f=>f.currentTarget.style.color="#ffd700",onMouseOut:f=>f.currentTarget.style.color="#d4af37",children:[e.jsx("span",{className:"material-icons",children:"graphic_eq"}),e.jsx("span",{className:"ml-1 flex items-end h-4 w-6",children:[...Array(4)].map((f,x)=>e.jsx("span",{style:{display:"inline-block",width:2,height:`${4+Math.round(h/100*12)*(x%2+1)}px`,background:"#d4af37",marginLeft:1,borderRadius:1}},x))})]})]})]}),F&&e.jsxs("div",{id:"realTimeConversation",ref:y,className:"w-full flex flex-col-reverse gap-1 pr-2 relative max-w-full sm:max-w-2xl mx-auto min-h-[60px] max-h-[12vh] overflow-y-auto mb-1",style:{background:"rgba(255,255,255,0.88)",borderRadius:12,border:"1px solid rgba(255,255,255,0.35)",boxShadow:"0px 4px 10px rgba(0,0,0,0.15)",padding:"8px",transition:"box-shadow 0.3s, background 0.3s",fontFamily:"SF Pro Text, Roboto, Open Sans, Arial, sans-serif",fontSize:window.innerWidth<640?14:16,lineHeight:1.5,color:"#222",fontWeight:400,backdropFilter:"blur(2px)",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[e.jsx("button",{className:"absolute top-1.5 right-1.5 w-5 h-5 flex items-center justify-center rounded-full bg-white/40 hover:bg-white/70 text-gray-400 hover:text-gray-700 shadow z-10 opacity-60 hover:opacity-90 transition-all",style:{fontSize:14,display:"block"},title:"áº¨n realtime conversation",onClick:()=>N(!1),children:e.jsx("span",{className:"material-icons",style:{fontSize:16},children:"close"})}),e.jsxs("div",{className:"w-full flex flex-col gap-1 pr-2",style:{overflowY:"auto",maxHeight:"28vh"},children:[b.length===0&&e.jsx("div",{className:"text-gray-400 text-base text-center select-none",style:{opacity:.7},children:S("tap_to_speak",v)}),[...b].reverse().map((f,x)=>e.jsx("div",{className:"mb-1",children:e.jsx("div",{className:"flex items-start",children:e.jsx("div",{className:"flex-grow",children:f.role==="user"?e.jsx("p",{className:"text-base md:text-lg font-medium text-gray-900",style:{marginBottom:2},children:f.messages[0].content}):e.jsxs("p",{className:"text-base md:text-lg font-medium",style:{marginBottom:2,position:"relative",background:"linear-gradient(90deg, #FF512F, #F09819, #FFD700, #56ab2f, #43cea2, #1e90ff, #6a11cb, #FF512F)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:600,letterSpacing:.2,transition:"background 0.5s"},children:[e.jsx("span",{className:"inline-flex flex-wrap",children:f.messages.map((g,T)=>{const z=g.content.slice(0,_[g.id]||0);return e.jsxs("span",{style:{whiteSpace:"pre"},children:[z,T===f.messages.length-1&&x===0&&_[g.id]<g.content.length&&e.jsx("span",{className:"animate-blink text-yellow-500",style:{marginLeft:1},children:"|"})]},g.id)})}),x===0&&f.role==="assistant"&&_[f.messages[f.messages.length-1].id]===f.messages[f.messages.length-1].content.length&&e.jsx("span",{className:"ml-2 animate-ellipsis text-yellow-500",children:"..."})]})})})},f.id))]})]}),e.jsx("div",{className:"w-full mt-1",children:e.jsx("div",{className:"w-full flex flex-row items-center gap-x-2 mb-3 px-2",children:e.jsx(Rt,{references:l})})})]}),e.jsx("div",{className:"w-1/4 lg:w-1/3 flex-col items-center lg:items-end p-2 space-y-4 overflow-auto hidden sm:flex",style:{maxHeight:"100%"},children:e.jsxs("div",{className:"flex flex-col gap-4 w-full md:w-auto",children:[e.jsxs(ie,{id:"endCallButton",onClick:k,variant:"yellow",className:"w-full md:w-auto flex items-center justify-center space-x-2 text-base sm:text-lg",style:{minHeight:56,minWidth:220,zIndex:10},children:[e.jsx("span",{className:"material-icons",children:"send"}),e.jsx("span",{className:"whitespace-nowrap",children:S("confirm_request",v)})]}),e.jsxs("button",{id:"cancelButtonDesktop",onClick:p,className:"w-full md:w-auto bg-white hover:bg-blue-100 text-blue-900 font-semibold py-3 px-8 rounded-full shadow flex items-center justify-center space-x-2 transition-all duration-200 border-2 border-blue-200 text-base sm:text-lg active:scale-95 active:bg-blue-100",style:{fontFamily:"inherit",letterSpacing:.2,minHeight:56,minWidth:120,touchAction:"manipulation",zIndex:10},children:[e.jsx("span",{className:"material-icons text-lg mr-2",children:"cancel"}),S("cancel",v)]})]})})]})})},Ul={roomNumber:/(?:room(?:\s+number)?|room|phÃ²ng)(?:\s*[:#\-]?\s*)([0-9]{1,4}[A-Za-z]?)|(?:staying in|in room|in phÃ²ng|phÃ²ng sá»‘)(?:\s+)([0-9]{1,4}[A-Za-z]?)/i};function we(n){const t=n.match(Ul.roomNumber);if(t)return t[1]||t[2]||null;const s=n.match(/(?:room details|room number|phÃ²ng sá»‘)(?:\s*[:#\-]?\s*)([0-9]{1,4}[A-Za-z]?)/i);if(s&&s[1])return s[1];const r=n.match(/(?:details[\s\S]*?room(?:\s+number)?[\s\S]*?)([0-9]{1,4}[A-Za-z]?)/i);return r&&r[1]?r[1]:null}const Gl=({isActive:n})=>{const{orderSummary:t,setOrderSummary:s,setCurrentInterface:r,setOrder:i,callSummary:m,setCallSummary:u,serviceRequests:c,callDuration:h,callDetails:j,emailSentForCurrentSession:v,setEmailSentForCurrentSession:_,addActiveOrder:A,translateToVietnamese:C,language:b}=J(),[H,l]=a.useState({}),[w,M]=a.useState(""),V=(N,o)=>{t&&s({...t,[N]:o})};a.useEffect(()=>{if(c&&c.length>0){const N=c.reduce((o,p)=>{const k=p.serviceType;return o[k]||(o[k]=[]),o[k].push(p),o},{});if(l(N),t&&(!t.items||t.items.length===0)){const o=c.map((p,k)=>{let E=1;const f=p.details||{},x=p.requestText.match(/(\d+)\s+(towels|bottles|pieces|cups|glasses|plates|servings|items)/i);x?E=parseInt(x[1]):typeof f.people=="number"&&(E=f.people);let g=10;return p.serviceType==="room-service"?g=15:p.serviceType==="housekeeping"?g=8:p.serviceType==="transportation"?g=25:p.serviceType==="tours-activities"?g=35:p.serviceType==="spa"&&(g=30),{id:`item-${k}`,name:p.serviceType,description:p.requestText,quantity:E,price:g}});s({...t,items:o,totalAmount:o.reduce((p,k)=>p+k.price*k.quantity,0)})}}},[c,t,s]),a.useEffect(()=>{if(n&&m&&t){const N=m.content,o=we(N);if(o&&o!==t.roomNumber&&s({...t,roomNumber:o}),!c||c.length===0){const p=N.match(/List of Requests:([\s\S]*?)(?:\n\nSpecial Instructions|\n\nThe conversation)/);if(p){const k=p[1],E=/Request (\d+): ([^\n]+)/g;let f;const x=[];let g=1;for(;(f=E.exec(k))!==null;){const T=f[2].trim(),z=f.index,L=k.indexOf(`Request ${parseInt(f[1])+1}:`,z),O=L>-1?k.substring(z,L):k.substring(z),R=/- ([^:]+): ([^\n]+)/g;let Y;const X={};for(;(Y=R.exec(O))!==null;){const ne=Y[1].trim(),te=Y[2].trim();X[ne.toLowerCase()]=te}let U="";X["service description"]&&(U+=`${X["service description"]}`),X.details&&(U+=U?`. ${X.details}`:X.details),X.items&&(U+=U?`
Items: ${X.items}`:`Items: ${X.items}`),X["service timing requested"]&&(U+=`
Timing: ${X["service timing requested"]}`),X.destinations&&(U+=`
Destinations: ${X.destinations}`),U||(U=`Requested ${T} service`),x.push({id:g.toString(),name:T,description:U,quantity:1,price:10}),g++}if(x.length>0&&(!t.items||t.items.length===0)){const T=x.map(Y=>Y.name.toLowerCase().replace(/\s+/g,"-")).join(","),z=we(N)||t.roomNumber,L=N.match(/Service Timing Requested:?\s*([^\n]+)/i),O=L?L[1]:t.deliveryTime;let R=t.deliveryTime;O&&(/soon|immediate|urgent|right now/i.test(O)?R="asap":/30 minute|half hour/i.test(O)?R="30min":/hour|60 minute/i.test(O)?R="1hour":/schedule|later|specific/i.test(O)&&(R="specific")),s({...t,items:x,orderType:T,roomNumber:z,deliveryTime:R,totalAmount:x.reduce((Y,X)=>Y+X.price*X.quantity,0)})}}}}},[n,m,t,s]);const y=async()=>{var k;if(!t)return;const N=`#ORD-${Math.floor(1e4+Math.random()*9e4)}`;let o;switch(t.deliveryTime){case"asap":o="As soon as possible";break;case"30min":o="30 minutes";break;case"1hour":o="1 hour";break;default:o=t.deliveryTime||"15-20 minutes"}if(i({reference:N,estimatedTime:o,summary:t}),A({reference:N,requestedAt:new Date,estimatedTime:o,status:"ÄÃ£ ghi nháº­n"}),v){console.log("Email already sent for this session. Skipping duplicate email sending."),r("interface4");return}if(((k=document.querySelector('[data-interface="interface3vi"]'))==null?void 0:k.getAttribute("data-active"))==="true")console.log("Vietnamese interface is active, skipping email send from English interface");else try{console.log("Sending email with call summary and service requests...");let E=(m==null?void 0:m.content)||"";try{E=await C(E)}catch(L){console.error("Failed to translate summary for email:",L)}console.log("Translated summary for email (Vietnamese):",E);const f=h?`${Math.floor(h/60)}:${(h%60).toString().padStart(2,"0")}`:"0:00";console.log("Call duration for email:",f);const x=`call-${Date.now()}`,g=(j==null?void 0:j.id)||x;console.log("Using callId for email:",g),console.log("Call summary content:",(m==null?void 0:m.content)||"No summary available"),console.log("Preparing email request payload...");const T={toEmail:"tuans2@gmail.com",callDetails:{callId:g,roomNumber:t.roomNumber||"unknown",summary:E||"No summary available",timestamp:(m==null?void 0:m.timestamp)||new Date,duration:f,serviceRequests:t.items.map(L=>L.name),orderReference:N,note:w}};console.log("Email payload prepared:",JSON.stringify(T));const z=/iPhone|iPad|iPod|Android|Mobile|webOS|BlackBerry/i.test(navigator.userAgent);console.log("Device type detected:",z?"MOBILE":"DESKTOP"),setTimeout(async()=>{try{const L=z?"/api/mobile-call-summary-email":"/api/send-call-summary-email";console.log(`Using ${z?"mobile":"standard"} endpoint for email: ${L}`);const O=z?`${L}?_=${Date.now()}`:L;console.log("Sending email request to server...");const R=await fetch(O,{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-Device-Type":z?"mobile":"desktop"},body:JSON.stringify(T),cache:"no-cache",credentials:"same-origin"});if(!R.ok)throw new Error(`Server responded with status: ${R.status}`);const Y=await R.json();console.log("Email sent with order confirmation:",Y),_(!0)}catch(L){console.error("Failed to send email in timeout:",L)}},z?50:500)}catch(E){console.error("Failed to send email:",E)}r("interface4")},F=()=>{!w.trim()||!m||u({...m,content:`${m.content}

Additional Notes:
${w}`})};return t?e.jsx("div",{className:`absolute w-full min-h-screen h-full transition-opacity duration-500 ${n?"opacity-100":"opacity-0 pointer-events-none"} z-30 overflow-y-auto`,id:"interface3",style:{backgroundImage:`linear-gradient(rgba(85,154,154,0.7), rgba(121, 219, 220, 0.6)), url(${qe})`,backgroundSize:"cover",backgroundPosition:"center",fontFamily:"SF Pro Text, Roboto, Open Sans, Arial, sans-serif"},children:e.jsx("div",{className:"container mx-auto flex flex-col p-2 sm:p-4 md:p-8",children:e.jsxs("div",{className:"mx-auto w-full max-w-4xl bg-white/90 rounded-2xl shadow-xl p-3 sm:p-6 md:p-10 mb-4 sm:mb-6 flex-grow border border-white/40 backdrop-blur-md",style:{minHeight:420},children:[e.jsx("div",{className:"mb-3 sm:mb-4 pb-2 sm:pb-3 border-b border-gray-200",children:e.jsx("p",{className:"font-poppins font-bold text-xl sm:text-2xl text-blue-900 tracking-wide",children:S("order_summary",b)})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 sm:gap-10 md:gap-16",children:[e.jsxs("div",{className:"md:w-3/4 w-full space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex sm:hidden flex-row w-full gap-2 mb-2",children:[e.jsxs("button",{className:"flex-1 flex items-center justify-center px-2 py-1.5 bg-white/80 hover:bg-blue-100 text-blue-900 rounded-full text-xs font-semibold border border-white/30 shadow transition-colors",onClick:()=>r("interface1"),children:[e.jsx("span",{className:"material-icons text-base mr-1",children:"cancel"}),S("cancel",b)]}),e.jsxs(ie,{onClick:y,variant:"yellow",className:"flex-1 flex items-center justify-center space-x-2 text-xs font-bold sm:hidden",style:{minHeight:44,minWidth:120,zIndex:10},children:[e.jsx("span",{className:"material-icons",children:"send"}),e.jsx("span",{className:"whitespace-nowrap",children:S("send_to_reception",b)})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mb-2 sm:hidden",children:[e.jsxs("div",{className:"flex flex-row w-full gap-2",children:[e.jsx("button",{className:"h-10 px-3 bg-[#ffe082] hover:bg-[#ffe9b3] text-blue-900 rounded-full text-xs font-semibold shadow transition-colors flex-1",onClick:F,disabled:!w.trim(),children:S("add_note",b)}),e.jsxs("div",{className:"flex items-center space-x-2 w-full justify-center",children:[e.jsx("label",{className:"text-xs text-gray-600 font-medium",children:S("room_number",b)}),e.jsx("input",{type:"text",placeholder:S("enter_room_number",b),className:"w-16 p-2 border border-white/30 rounded-xl focus:ring-2 focus:ring-[#d4af37] focus:border-[#d4af37] bg-white/70 text-gray-900 font-semibold text-xs",value:t.roomNumber,onChange:N=>V("roomNumber",N.target.value)})]}),e.jsx("button",{className:"h-10 px-3 bg-white/70 text-blue-900 rounded-full text-xs font-semibold border border-white/30 shadow flex items-center justify-center",onClick:()=>r("interface3vi"),children:e.jsx("span",{className:"material-icons text-base",children:"language"})})]}),e.jsx("textarea",{placeholder:S("enter_notes",b),className:"w-full p-2 border border-white/30 rounded-xl text-xs bg-white/60 focus:bg-white/90 focus:ring-2 focus:ring-[#d4af37] transition italic font-light text-gray-500",value:w,onChange:N=>M(N.target.value),rows:3,style:{fontFamily:"inherit"}})]}),m&&e.jsxs("div",{id:"summary-container",className:"mb-3 sm:mb-4",children:[e.jsxs("div",{className:"p-3 sm:p-5 bg-white/80 rounded-xl shadow border border-white/30 mb-3 sm:mb-4 relative",style:{backdropFilter:"blur(2px)"},children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1 sm:mb-2 text-blue-800",children:S("summary",b)}),e.jsx("div",{className:"text-sm sm:text-base leading-relaxed text-gray-800 whitespace-pre-line",style:{fontWeight:400},children:(m.content||"").split(`
`).filter(o=>!/^Next Step:/i.test(o)&&!/Please Press Send To Reception/i.test(o)).map((o,p)=>{if(/^Guest's Name/i.test(o)){const k=o.replace(/\s*\(used for Guest with a confirmed reservation\)/i,"");return e.jsx("div",{children:e.jsx("b",{children:k})},p)}return/^Room Number:/i.test(o)?e.jsx("div",{children:e.jsx("b",{children:o})},p):/^REQUEST \d+:/i.test(o)?e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:o})},p):/^â€¢ Service Timing:/i.test(o)?e.jsx("div",{style:{marginLeft:16},children:e.jsx("b",{children:o})},p):/^â€¢ Order Details:/i.test(o)?e.jsx("div",{style:{marginLeft:16},children:e.jsx("b",{children:o})},p):/^â€¢ Special Requirements:/i.test(o)?e.jsx("div",{style:{marginLeft:16},children:e.jsx("b",{children:o})},p):/^â€¢ [^-].+/.test(o)?e.jsx("div",{style:{marginLeft:32},children:o},p):/^\s*[-â€¢]/.test(o)?e.jsx("div",{style:{marginLeft:32},children:o},p):/^\s*$/.test(o)?e.jsx("div",{style:{height:8}},p):e.jsx("div",{children:o},p)})}),e.jsx("div",{className:"mt-2 sm:mt-3 flex justify-end",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[S("generated_at",b)," ",new Date(m.timestamp).toLocaleTimeString()]})})]}),e.jsx("div",{className:"text-center mt-2 mb-1",children:e.jsxs("span",{className:"italic text-sm",style:{color:"#2563eb",background:"#e0f2fe",borderRadius:"6px",padding:"4px 12px",display:"inline-block",fontWeight:500},children:["Please Press ",e.jsx("b",{style:{fontWeight:700,color:"#1d4ed8"},children:"Send To Reception"})," To Complete Your Request"]})})]}),e.jsxs("div",{className:"hidden sm:flex flex-row items-center gap-2 h-10",children:[e.jsx("button",{className:"h-10 px-3 sm:px-4 bg-[#ffe082] hover:bg-[#ffe9b3] text-blue-900 rounded-full text-xs sm:text-sm font-semibold shadow transition-colors",onClick:F,disabled:!w.trim(),children:S("add_note",b)}),e.jsxs("div",{className:"flex items-center space-x-2 w-full justify-center",children:[e.jsx("label",{className:"text-xs sm:text-base text-gray-600 font-medium",children:S("room_number",b)}),e.jsx("input",{type:"text",placeholder:S("enter_room_number",b),className:"w-16 sm:w-32 p-2 border border-white/30 rounded-xl focus:ring-2 focus:ring-[#d4af37] focus:border-[#d4af37] bg-white/70 text-gray-900 font-semibold text-xs sm:text-base",value:t.roomNumber,onChange:N=>V("roomNumber",N.target.value)})]}),e.jsx("button",{className:"h-10 px-3 sm:px-4 bg-white/70 text-blue-900 rounded-full text-xs sm:text-sm font-semibold border border-white/30 shadow flex items-center justify-center",onClick:()=>r("interface3vi"),children:e.jsx("span",{className:"material-icons text-base",children:"language"})})]}),e.jsx("textarea",{placeholder:S("enter_notes",b),className:"hidden sm:block w-full p-2 sm:p-3 border border-white/30 rounded-xl mb-3 sm:mb-4 text-xs sm:text-sm bg-white/60 focus:bg-white/90 focus:ring-2 focus:ring-[#d4af37] transition italic font-light text-gray-500",value:w,onChange:N=>M(N.target.value),rows:3,style:{fontFamily:"inherit"}})]}),e.jsx("div",{className:"md:w-1/4 w-full hidden sm:flex md:justify-end justify-center",children:e.jsxs("div",{className:"flex flex-col items-end space-y-2 sm:space-y-3 w-full md:w-auto",children:[e.jsxs(ie,{onClick:y,variant:"yellow",className:"w-full md:w-auto flex items-center justify-center space-x-2 text-xs sm:text-sm font-bold",style:{minHeight:44,minWidth:160,zIndex:10},children:[e.jsx("span",{className:"material-icons",children:"send"}),e.jsx("span",{className:"whitespace-nowrap",children:S("send_to_reception",b)})]}),e.jsxs("button",{className:"w-full md:w-auto flex items-center justify-center px-2 sm:px-3 py-1.5 bg-white/80 hover:bg-blue-100 text-blue-900 rounded-full text-xs font-semibold border border-white/30 shadow transition-colors",onClick:()=>r("interface1"),children:[e.jsx("span",{className:"material-icons text-base mr-1",children:"cancel"}),S("cancel",b)]})]})})]})]})})}):null},Kl=({isActive:n})=>{const{callSummary:t,orderSummary:s,setCurrentInterface:r,setOrderSummary:i,setOrder:m,serviceRequests:u,vietnameseSummary:c,setVietnameseSummary:h,translateToVietnamese:j,emailSentForCurrentSession:v,setEmailSentForCurrentSession:_,callDetails:A,callDuration:C,language:b}=J(),[H,l]=a.useState(!1),w=(N,o)=>{s&&i({...s,[N]:o})},[M,V]=a.useState(null);a.useEffect(()=>{const N=t?new Date(t.timestamp).getTime().toString():null;n&&t&&(!c||M!==N)&&N!==M&&(V(N),(async()=>{try{console.log("Starting translation of summary to Vietnamese"),l(!0),await j(t.content),l(!1)}catch(p){console.error("Error translating summary:",p),l(!1)}})())},[n,t,c,j,M]),a.useEffect(()=>{var N,o;if(n&&u&&u.length>0&&s){const p=u.map((g,T)=>{let z=1,L=10;g.serviceType==="housekeeping"&&(L=5),g.serviceType==="technical-support"&&(L=0),(g.serviceType.includes("food")||g.serviceType==="room-service")&&(L=8),g.serviceType==="wake-up"&&(L=0);let O="";const R=g.details;return R.roomNumber&&R.roomNumber!=="unknown"&&R.roomNumber!=="Not specified"&&(O+=`Sá»‘ phÃ²ng: ${R.roomNumber}
`),R.date&&R.date!=="Not specified"&&(O+=`NgÃ y: ${R.date}
`),R.time&&R.time!=="Not specified"&&(O+=`Thá»i gian: ${R.time}
`),R.people&&(O+=`Sá»‘ ngÆ°á»i: ${R.people}
`),R.location&&R.location!=="Not specified"&&(O+=`Äá»‹a Ä‘iá»ƒm: ${R.location}
`),R.amount&&R.amount!=="Not specified"&&(O+=`Sá»‘ tiá»n: ${R.amount}
`),O+=`
YÃªu cáº§u: ${g.requestText}`,R.otherDetails&&R.otherDetails!=="Not specified"&&R.otherDetails!=="None"&&!R.otherDetails.includes("Not specified")&&(O+=`

ThÃ´ng tin thÃªm: ${R.otherDetails}`),{id:(T+1).toString(),name:g.requestText.length>60?g.requestText.substring(0,57)+"...":g.requestText,description:O,quantity:z,price:L,serviceType:g.serviceType}}),E=Array.from(new Set(u.map(g=>g.serviceType))).join(",");let f=s.deliveryTime;u.some(g=>g.details&&g.details.time&&typeof g.details.time=="string"&&g.details.time.toLowerCase().includes("immediate"))&&(f="asap");const x=(o=(N=u.find(g=>g.details&&g.details.roomNumber&&g.details.roomNumber!=="unknown"&&g.details.roomNumber!=="Not specified"))==null?void 0:N.details)==null?void 0:o.roomNumber;i({...s,items:p,totalAmount:p.reduce((g,T)=>g+T.price*T.quantity,0),orderType:E,roomNumber:x||s.roomNumber,deliveryTime:f})}},[u,n,s,i]);function y(N){return N.split(`
`).filter(o=>!/^BÆ°á»›c tiáº¿p theo:/i.test(o)&&!/^Next Step:/i.test(o)&&!/Vui lÃ²ng nháº¥n/i.test(o)&&!/Please Press Send To Reception/i.test(o)).map(o=>o.replace(/\(dÃ¹ng cho khÃ¡ch cÃ³ Ä‘áº·t chá»— xÃ¡c nháº­n\)/i,"").replace(/\(used for Guest with a confirmed reservation\)/i,"").replace(/\(khÃ´ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh\)/i,"").replace(/\(not specified\)/i,"")).join(`
`).replace(/\n{3,}/g,`

`)}const F=async()=>{if(!s)return;const N=c||(t?t.content:"KhÃ´ng cÃ³ tÃ³m táº¯t"),o=y(N),p=`#ORD-${Math.floor(1e4+Math.random()*9e4)}`;if(m({reference:p,estimatedTime:"15-20 phÃºt",summary:s}),v){console.log("Email Ä‘Ã£ Ä‘Æ°á»£c gá»­i cho phiÃªn nÃ y. Bá» qua viá»‡c gá»­i email trÃ¹ng láº·p."),r("interface4");return}try{console.log("Gá»­i email vá»›i tÃ³m táº¯t cuá»™c gá»i vÃ  yÃªu cáº§u dá»‹ch vá»¥ tá»« giao diá»‡n tiáº¿ng Viá»‡t...");const k=C?`${Math.floor(C/60)}:${(C%60).toString().padStart(2,"0")}`:"0:00",E=`call-${Date.now()}`,f=(A==null?void 0:A.id)||E;console.log("Sá»­ dá»¥ng callId cho email:",f),console.log("Ná»™i dung tÃ³m táº¯t cuá»™c gá»i:",o),console.log("Chuáº©n bá»‹ payload email...");const x={toEmail:"tuans2@gmail.com",callDetails:{callId:f,roomNumber:s.roomNumber||"Cáº§n xÃ¡c nháº­n",summary:o,timestamp:t?t.timestamp:new Date,duration:k,serviceRequests:s.items.map(g=>g.name),orderReference:p}};console.log("Payload email Ä‘Ã£ chuáº©n bá»‹:",JSON.stringify(x)),setTimeout(async()=>{try{console.log("Gá»­i yÃªu cáº§u email Ä‘áº¿n mÃ¡y chá»§...");const g=await fetch("/api/send-call-summary-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x),cache:"no-cache",credentials:"same-origin"});if(!g.ok)throw new Error(`MÃ¡y chá»§ pháº£n há»“i vá»›i tráº¡ng thÃ¡i: ${g.status}`);const T=await g.json();console.log("Email Ä‘Ã£ Ä‘Æ°á»£c gá»­i vá»›i xÃ¡c nháº­n Ä‘Æ¡n hÃ ng:",T),_(!0)}catch(g){console.error("KhÃ´ng thá»ƒ gá»­i email trong timeout:",g)}},500)}catch(k){console.error("KhÃ´ng thá»ƒ gá»­i email:",k)}r("interface4")};return s?e.jsx("div",{className:`absolute w-full min-h-screen h-full transition-opacity duration-500 ${n?"opacity-100 active":"opacity-0 pointer-events-none"} z-30 overflow-y-auto`,id:"interface3vi","data-interface":"interface3vi","data-active":n.toString(),style:{backgroundImage:"linear-gradient(rgba(85,154,154,0.7), rgba(121, 219, 220, 0.6))",backgroundSize:"cover",backgroundPosition:"center",fontFamily:"SF Pro Text, Roboto, Open Sans, Arial, sans-serif"},children:e.jsx("div",{className:"container mx-auto h-full flex flex-col p-2 sm:p-4 md:p-8",children:e.jsxs("div",{className:"mx-auto w-full max-w-3xl bg-white/90 rounded-2xl shadow-xl p-3 sm:p-6 md:p-10 mb-4 sm:mb-6 flex-grow border border-white/40 backdrop-blur-md",style:{minHeight:420},children:[e.jsx("div",{className:"mb-3 sm:mb-4 pb-2 sm:pb-3 border-b border-gray-200",children:e.jsx("p",{className:"font-poppins font-bold text-xl sm:text-2xl text-blue-900 tracking-wide",children:"XEM XÃ‰T & XÃC NHáº¬N"})}),e.jsx("div",{id:"summary-container",className:"mb-3 sm:mb-4",children:t?e.jsxs("div",{className:"p-3 sm:p-5 bg-white/80 rounded-xl shadow border border-white/30 mb-3 sm:mb-4 relative",style:{backdropFilter:"blur(2px)"},children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1 sm:mb-2 text-blue-800",children:"TÃ³m táº¯t cuá»™c trÃ² chuyá»‡n"}),H?e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-2 bg-blue-100 rounded w-3/4"}),e.jsx("div",{className:"h-2 bg-blue-100 rounded w-full"}),e.jsx("div",{className:"h-2 bg-blue-100 rounded w-5/6"}),e.jsx("div",{className:"h-2 bg-blue-100 rounded w-2/3"}),e.jsx("p",{className:"text-blue-400 text-xs sm:text-sm italic",children:"Äang dá»‹ch sang tiáº¿ng Viá»‡t..."})]}):e.jsx("p",{className:"text-xs sm:text-base leading-relaxed text-gray-800 whitespace-pre-line",style:{fontWeight:400},children:c||t.content}),e.jsx("div",{className:"mt-2 sm:mt-3 flex justify-end",children:e.jsxs("div",{className:"text-xs text-gray-500",children:["Táº¡o lÃºc ",new Date(t.timestamp).toLocaleTimeString()]})})]}):e.jsxs("div",{className:"p-3 sm:p-5 bg-gray-50 rounded-xl shadow border border-dashed border-gray-300 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"animate-pulse flex space-x-2 items-center",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"})]}),e.jsx("h3",{className:"font-semibold text-base sm:text-lg my-2 text-gray-600",children:"Äang táº¡o báº£n tÃ³m táº¯t..."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-5/6"})]}),e.jsx("p",{className:"text-gray-400 italic mt-3",children:"AI cá»§a chÃºng tÃ´i Ä‘ang phÃ¢n tÃ­ch cuá»™c trÃ² chuyá»‡n vÃ  chuáº©n bá»‹ báº£n tÃ³m táº¯t..."})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3 sm:gap-4 mb-4 sm:mb-6 w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-xs sm:text-base text-gray-600 font-medium",children:"Sá»‘ phÃ²ng"}),e.jsx("input",{type:"text",className:"w-20 sm:w-32 p-2 border border-white/30 rounded-xl focus:ring-2 focus:ring-[#d4af37] focus:border-[#d4af37] bg-white/70 text-gray-900 font-semibold",value:s.roomNumber,onChange:N=>w("roomNumber",N.target.value)})]}),e.jsxs("button",{className:"h-full px-3 sm:px-4 bg-white/70 text-blue-900 rounded-full text-xs sm:text-base font-semibold border border-white/30 shadow flex items-center justify-center",onClick:()=>r("interface3"),style:{fontFamily:"inherit",letterSpacing:.2},children:[e.jsx("span",{className:"material-icons text-base mr-2",children:"translate"}),"Tiáº¿ng Anh"]}),e.jsxs("button",{id:"confirmOrderButton",className:"h-full px-4 sm:px-8 py-2 sm:py-4 bg-[#d4af37] hover:bg-[#ffd700] text-blue-900 font-bold rounded-full shadow-lg text-base sm:text-xl transition-colors border border-white/30 flex items-center justify-center",onClick:F,style:{fontFamily:"inherit",letterSpacing:.5},children:[e.jsx("span",{className:"material-icons mr-2 text-lg sm:text-2xl",children:"check_circle"}),"XÃ¡c nháº­n"]})]})]})})}):null},Jl=({isActive:n})=>{const{callSummary:t,orderSummary:s,setCurrentInterface:r,setOrderSummary:i,setOrder:m,serviceRequests:u,emailSentForCurrentSession:c,setEmailSentForCurrentSession:h,callDetails:j,callDuration:v,language:_}=J(),[A,C]=a.useState(""),b=(l,w)=>{s&&i({...s,[l]:w})};a.useEffect(()=>{var l,w;if(n&&u&&u.length>0&&s){const M=u.map((o,p)=>{let k=1,E=10;o.serviceType==="housekeeping"&&(E=8),o.serviceType==="technical-support"&&(E=0),(o.serviceType.includes("food")||o.serviceType==="room-service")&&(E=15),o.serviceType==="wake-up"&&(E=0);let f="";const x=o.details;return x.roomNumber&&x.roomNumber!=="unknown"&&x.roomNumber!=="Not specified"&&(f+=`${S("room_number","fr")}: ${x.roomNumber}
`),x.date&&x.date!=="Not specified"&&(f+=`${S("time","fr")}: ${x.date}
`),x.time&&x.time!=="Not specified"&&(f+=`${S("time","fr")}: ${x.time}
`),x.people&&(f+=`Nombre de personnes: ${x.people}
`),x.location&&x.location!=="Not specified"&&(f+=`Lieu: ${x.location}
`),x.amount&&x.amount!=="Not specified"&&(f+=`Montant: ${x.amount}
`),f+=`
Demande: ${o.requestText}`,x.otherDetails&&x.otherDetails!=="Not specified"&&x.otherDetails!=="None"&&!x.otherDetails.includes("Not specified")&&(f+=`

Informations supplÃ©mentaires: ${x.otherDetails}`),{id:(p+1).toString(),name:o.requestText.length>60?o.requestText.substring(0,57)+"...":o.requestText,description:f,quantity:k,price:E,serviceType:o.serviceType}}),y=Array.from(new Set(u.map(o=>o.serviceType))).join(",");let F=s.deliveryTime;u.some(o=>o.details&&o.details.time&&typeof o.details.time=="string"&&o.details.time.toLowerCase().includes("immediate"))&&(F="asap");const N=(w=(l=u.find(o=>o.details&&o.details.roomNumber&&o.details.roomNumber!=="unknown"&&o.details.roomNumber!=="Not specified"))==null?void 0:l.details)==null?void 0:w.roomNumber;i({...s,items:M,totalAmount:M.reduce((o,p)=>o+p.price*p.quantity,0),orderType:y,roomNumber:N||s.roomNumber,deliveryTime:F})}},[u,n,s,i]);const H=async()=>{if(!s)return;const l=`#ORD-${Math.floor(1e4+Math.random()*9e4)}`;if(m({reference:l,estimatedTime:"15-20 minutes",summary:s}),c){r("interface4");return}try{const w=v?`${Math.floor(v/60)}:${(v%60).toString().padStart(2,"0")}`:"0:00",M=`call-${Date.now()}`,y={toEmail:"tuans2@gmail.com",callDetails:{callId:(j==null?void 0:j.id)||M,roomNumber:s.roomNumber||"Ã€ confirmer",summary:t?t.content:"Aucun rÃ©sumÃ©",timestamp:t?t.timestamp:new Date,duration:w,serviceRequests:s.items.map(F=>F.name),orderReference:l,note:A}};setTimeout(async()=>{try{const F=await fetch("/api/send-call-summary-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),cache:"no-cache",credentials:"same-origin"});if(!F.ok)throw new Error(`Le serveur a rÃ©pondu avec le statut: ${F.status}`);await F.json(),h(!0)}catch(F){console.error("Erreur lors de l'envoi de l'email:",F)}},500)}catch(w){console.error("Erreur lors de l'envoi de l'email:",w)}r("interface4")};return s?e.jsx("div",{className:`absolute w-full min-h-screen h-full transition-opacity duration-500 ${n?"opacity-100 active":"opacity-0 pointer-events-none"} z-30 overflow-y-auto`,id:"interface3fr","data-interface":"interface3fr","data-active":n.toString(),style:{backgroundImage:"linear-gradient(rgba(26, 35, 126, 0.7), rgba(63, 81, 181, 0.7))",backgroundSize:"cover",backgroundPosition:"center",fontFamily:"SF Pro Text, Roboto, Open Sans, Arial, sans-serif"},children:e.jsx("div",{className:"container mx-auto h-full flex flex-col p-2 sm:p-4 md:p-8",children:e.jsxs("div",{className:"mx-auto w-full max-w-3xl bg-white/90 rounded-2xl shadow-xl p-3 sm:p-6 md:p-10 mb-4 sm:mb-6 flex-grow border border-white/40 backdrop-blur-md",style:{minHeight:420},children:[e.jsx("div",{className:"mb-3 sm:mb-4 pb-2 sm:pb-3 border-b border-gray-200",children:e.jsx("p",{className:"font-poppins font-bold text-xl sm:text-2xl text-blue-900 tracking-wide",children:S("order_summary","fr")})}),e.jsx("div",{id:"summary-container",className:"mb-3 sm:mb-4",children:t?e.jsxs("div",{className:"p-3 sm:p-5 bg-white/80 rounded-xl shadow border border-white/30 mb-3 sm:mb-4 relative",style:{backdropFilter:"blur(2px)"},children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1 sm:mb-2 text-blue-800",children:S("summary","fr")}),e.jsx("div",{className:"text-xs sm:text-base leading-relaxed text-gray-800 whitespace-pre-line",style:{fontWeight:400},children:(t.content||"").split(`
`).map((w,M)=>{let V=w.replace(/^Room Number:/i,`${S("room_number","fr")}:`).replace(/^Guest's Name.*:/i,`${S("guest_name","fr")}:`).replace(/^REQUEST (\d+):/i,(y,F)=>`DEMANDE ${F} :`).replace(/^â€¢ Service Timing:/i,"â€¢ Heure de service :").replace(/^â€¢ Order Details:/i,"â€¢ DÃ©tails de la commande :").replace(/^â€¢ Special Requirements:/i,"â€¢ Exigences spÃ©ciales :").replace(/^Next Step:/i,"Ã‰tape suivante :").replace(/Not specified/gi,"Non spÃ©cifiÃ©").replace(/Details:/gi,"DÃ©tails :").replace(/Assistance or reservation for golf activity requested/gi,"Assistance ou rÃ©servation pour une activitÃ© de golf demandÃ©e");return e.jsx("div",{children:V},M)})}),e.jsx("div",{className:"mt-2 sm:mt-3 flex justify-end",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[S("generated_at","fr")," ",new Date(t.timestamp).toLocaleTimeString()]})})]}):null}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3 sm:gap-4 mb-4 sm:mb-6 w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-xs sm:text-base text-gray-600 font-medium",children:S("room_number","fr")}),e.jsx("input",{type:"text",className:"w-20 sm:w-32 p-2 border border-white/30 rounded-xl focus:ring-2 focus:ring-[#d4af37] focus:border-[#d4af37] bg-white/70 text-gray-900 font-semibold",value:s.roomNumber,onChange:l=>b("roomNumber",l.target.value)})]}),e.jsxs("button",{className:"h-full px-3 sm:px-4 bg-white/70 text-blue-900 rounded-full text-xs sm:text-base font-semibold border border-white/30 shadow flex items-center justify-center",onClick:()=>r("interface3"),style:{fontFamily:"inherit",letterSpacing:.2},children:[e.jsx("span",{className:"material-icons text-base mr-2",children:"translate"}),S("english","fr")]}),e.jsxs("button",{id:"confirmOrderButton",className:"h-full px-4 sm:px-8 py-2 sm:py-4 bg-[#d4af37] hover:bg-[#ffd700] text-blue-900 font-bold rounded-full shadow-lg text-base sm:text-xl transition-colors border border-white/30 flex items-center justify-center",onClick:H,style:{fontFamily:"inherit",letterSpacing:.5},children:[e.jsx("span",{className:"material-icons mr-2 text-lg sm:text-2xl",children:"check_circle"}),S("send_to_reception","fr")]})]}),e.jsx("textarea",{placeholder:S("enter_notes","fr"),className:"w-full p-2 border border-white/30 rounded-xl text-xs sm:text-sm bg-white/60 focus:bg-white/90 focus:ring-2 focus:ring-[#d4af37] transition italic font-light text-gray-500",value:A,onChange:l=>C(l.target.value),rows:3,style:{fontFamily:"inherit"}})]})})}):null},Zl=({isActive:n})=>{const{order:t,setCurrentInterface:s,language:r}=J(),i=()=>{s("interface1")};return t?e.jsx("div",{className:`absolute w-full h-full transition-opacity duration-500 ${n?"opacity-100":"opacity-0 pointer-events-none"} bg-neutral z-40`,id:"interface4",children:e.jsx("div",{className:"container mx-auto h-full flex flex-col items-center justify-center p-3 sm:p-5 text-center",children:e.jsxs("div",{className:"w-full max-w-xs sm:max-w-md bg-white rounded-lg shadow-lg p-4 sm:p-8",children:[e.jsx("div",{className:"mb-4 sm:mb-6 flex justify-center",children:e.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-white text-4xl sm:text-5xl",children:"check"})})}),e.jsx("h2",{className:"font-poppins font-bold text-xl sm:text-2xl text-primary mb-2 sm:mb-3",children:S("order_confirmed",r)}),e.jsx("p",{className:"text-gray-700 mb-4 sm:mb-6 text-sm sm:text-base",children:S("order_confirmed_message",r)}),e.jsx("div",{className:"bg-neutral p-3 sm:p-4 rounded-lg mb-4 sm:mb-6",children:e.jsxs("p",{className:"font-medium text-gray-800 text-sm sm:text-base",children:[S("order_reference",r),": ",e.jsx("span",{className:"font-bold",children:t.reference})]})}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm",children:S("estimated_delivery_time",r)}),e.jsx("p",{className:"font-poppins font-bold text-lg sm:text-xl",children:t.estimatedTime})]}),e.jsx("button",{className:"w-full px-4 sm:px-6 py-2 sm:py-3 bg-amber-400 text-primary-dark rounded-lg font-poppins font-medium text-sm sm:text-base",onClick:i,children:S("return_to_home",r)})]})})}):null};function We(){var j;const[n,t]=a.useState(null),[s,r]=a.useState(!1),i=J(),m=a.useRef(0),u=a.useCallback(()=>{console.log("useWebSocket env VITE_API_HOST:",void 0),n!==null&&n.close();const _=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;console.log("Attempting WebSocket connection to",_);const A=new WebSocket(_);return A.onopen=()=>{console.log("WebSocket connection established"),r(!0),m.current=0,i.callDetails&&A.send(JSON.stringify({type:"init",callId:i.callDetails.id}))},A.onmessage=C=>{try{const b=JSON.parse(C.data);b.type==="transcript"&&i.addTranscript({callId:b.callId,role:b.role,content:b.content}),b.type==="order_status_update"&&(b.orderId||b.reference)&&b.status&&i.setActiveOrders(H=>H.map(l=>b.reference&&l.reference===b.reference||b.orderId&&l.reference===b.orderId?{...l,status:b.status}:l)),b.type==="staff_message"&&b.content&&i.addStaffMessage&&i.addStaffMessage(b.content,b.created_at)}catch(b){console.error("Error parsing WebSocket message:",b)}},A.onclose=C=>{if(console.log("WebSocket connection closed",C),r(!1),m.current<5){const b=Math.pow(2,m.current)*1e3;console.log(`Reconnecting WebSocket in ${b}ms (attempt ${m.current+1})`),setTimeout(u,b),m.current++}else console.warn("Max WebSocket reconnection attempts reached")},A.onerror=C=>{console.error("WebSocket encountered error",C),A.readyState!==WebSocket.CLOSED&&A.close()},t(A),()=>{A.close()}},[i.callDetails,i.addTranscript,i.activeOrders,i.setActiveOrders,i.addStaffMessage]),c=a.useCallback(v=>{n&&s?n.send(JSON.stringify(v)):console.error("Cannot send message, WebSocket not connected")},[n,s]),h=a.useCallback(()=>{s||u()},[s,u]);return a.useEffect(()=>(u(),()=>{n&&n.close()}),[]),a.useEffect(()=>{var v;n&&s&&((v=i.callDetails)!=null&&v.id)&&(console.log("Sending init message with callId after availability",i.callDetails.id),n.send(JSON.stringify({type:"init",callId:i.callDetails.id})))},[(j=i.callDetails)==null?void 0:j.id,n,s]),{connected:s,sendMessage:c,reconnect:h}}function Ql({currentStep:n=1,compact:t=!1,horizontal:s=!1,language:r}){const{language:i}=J?J():{language:"en"},m=r||i||"en",u=[{icon:"call",title:S("press_to_call",m),desc:S("press_to_call_desc",m)},{icon:"check_circle",title:S("confirm_request",m),desc:S("confirm_request_desc",m)},{icon:"mail",title:S("send_to_reception",m),desc:S("send_to_reception_desc",m)}];return s?e.jsx("div",{className:"flex flex-row items-center justify-center w-full gap-2 md:gap-6 py-1",children:u.map((c,h)=>e.jsxs(re.Fragment,{children:[e.jsxs("div",{className:`flex flex-col items-center transition-all duration-300 ${h+1===n?"opacity-100 scale-105":h+1<n?"opacity-60":"opacity-40"}`,children:[e.jsx("div",{className:`flex items-center justify-center rounded-full shadow-lg mb-0.5 transition-all duration-300 ${h+1===n?"bg-[#d4af37] text-blue-900 border-2 border-[#d4af37]":"bg-white/30 text-white border border-gray-200"}`,style:{width:22,height:22,fontSize:13},children:e.jsx("span",{className:"material-icons",children:c.icon})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`font-semibold font-poppins mb-0 text-[10px] ${h+1===n?"text-white":"text-white/70"}`,children:c.title}),e.jsx("div",{className:"font-light text-[8px] text-white/80 hidden md:block",children:c.desc})]})]}),h<u.length-1&&e.jsx("div",{className:"h-0.5 w-3 md:w-8 bg-gradient-to-r from-[#d4af37]/80 to-transparent mx-1 rounded-full"})]},c.title))}):e.jsx("div",{className:`w-full ${t?"max-w-[160px] py-2 gap-3":"max-w-xs py-6 gap-6"} mx-auto flex flex-col items-center`,children:u.map((c,h)=>e.jsxs("div",{className:`flex flex-col items-center w-full transition-all duration-300 ${h+1===n?"opacity-100 scale-105":h+1<n?"opacity-60":"opacity-40"}`,children:[e.jsx("div",{className:`flex items-center justify-center rounded-full shadow-lg mb-2 transition-all duration-300 ${h+1===n?"bg-[#d4af37] text-blue-900 border-2 border-[#d4af37]":"bg-white/30 text-white border border-gray-200"}`,style:{width:t?32:48,height:t?32:48,fontSize:t?18:28},children:e.jsx("span",{className:"material-icons",children:c.icon})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`font-semibold font-poppins mb-1 ${t?"text-xs":"text-base"} ${h+1===n?"text-white":"text-white/70"}`,children:c.title}),e.jsx("div",{className:`font-light ${t?"text-[10px]":"text-sm"} text-white/80`,children:c.desc})]}),h<u.length-1&&e.jsx("div",{className:`mx-auto my-1 rounded-full ${t?"w-0.5 h-4":"w-1 h-8"} bg-gradient-to-b from-[#d4af37]/80 to-transparent`})]},c.title))})}const ed=()=>{const{currentInterface:n,language:t}=J();return We(),e.jsxs("div",{className:"relative h-screen overflow-hidden font-sans text-gray-800 bg-neutral-50",id:"app",children:[e.jsx("header",{className:"w-full bg-primary text-white p-4 shadow-md",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between px-2",children:[e.jsx("div",{className:"w-16 flex-shrink-0 flex items-center justify-start ml-1 sm:ml-4 mr-2 sm:mr-6",children:e.jsx("img",{src:"/assets/references/images/minhon-logo.jpg",alt:"Minhon Logo",className:"h-10 sm:h-14 w-auto rounded-lg shadow-md bg-white/80 p-1"})}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx("div",{className:"w-full max-w-xs sm:max-w-md",children:e.jsx(Ql,{horizontal:!0,compact:!0,currentStep:n==="interface3"?3:n==="interface2"?2:1,language:t})})}),e.jsx("div",{className:"w-10 flex-shrink-0 flex items-center justify-end ml-2 sm:ml-6 mr-1 sm:mr-2",children:e.jsx(Ne,{href:"/call-history",children:e.jsxs("a",{className:"flex items-center gap-1 px-2 py-1 rounded bg-primary-dark text-white text-xs sm:text-sm",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Call History"})]})})})]})}),e.jsxs("div",{className:"relative w-full h-full",id:"interfaceContainer",children:[e.jsx(Tt,{isActive:n==="interface1"}),e.jsx(Yl,{isActive:n==="interface2"}),e.jsx(Gl,{isActive:n==="interface3"}),e.jsx(Kl,{isActive:n==="interface3vi"}),e.jsx(Jl,{isActive:n==="interface3fr"}),e.jsx(Zl,{isActive:n==="interface4"})]})]})},He=a.forwardRef(({className:n,...t},s)=>e.jsx("div",{ref:s,className:G("rounded-lg border bg-card text-card-foreground shadow-sm",n),...t}));He.displayName="Card";const td=a.forwardRef(({className:n,...t},s)=>e.jsx("div",{ref:s,className:G("flex flex-col space-y-1.5 p-6",n),...t}));td.displayName="CardHeader";const sd=a.forwardRef(({className:n,...t},s)=>e.jsx("h3",{ref:s,className:G("text-2xl font-semibold leading-none tracking-tight",n),...t}));sd.displayName="CardTitle";const nd=a.forwardRef(({className:n,...t},s)=>e.jsx("p",{ref:s,className:G("text-sm text-muted-foreground",n),...t}));nd.displayName="CardDescription";const Ve=a.forwardRef(({className:n,...t},s)=>e.jsx("div",{ref:s,className:G("p-6 pt-0",n),...t}));Ve.displayName="CardContent";const od=a.forwardRef(({className:n,...t},s)=>e.jsx("div",{ref:s,className:G("flex items-center p-6 pt-0",n),...t}));od.displayName="CardFooter";function rd(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(He,{className:"w-full max-w-md mx-4",children:e.jsxs(Ve,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(et,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const id=()=>{const[n,t]=a.useState(!1),[s,r]=a.useState(null),[i,m]=a.useState(null),[u,c]=a.useState("tuans2@gmail.com"),h=async()=>{try{t(!0),r(null),m(null),console.log("Sending test email to:",u);const j=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);console.log("Device type:",j?"mobile":"desktop");try{const _=await(await fetch("/api/test-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:u,isMobile:j}),cache:"no-cache"})).json();if(_.success){r(`Email sent successfully using standard method! Provider: ${_.provider||"unknown"}`),t(!1);return}else console.warn("Standard method failed, trying mobile-specific endpoint")}catch(v){console.error("Error with standard endpoint:",v)}try{console.log("Thá»­ sá»­ dá»¥ng endpoint dÃ nh riÃªng cho di Ä‘á»™ng...");const v=/iPhone|iPad|iPod|Android|Mobile|webOS|BlackBerry/i.test(navigator.userAgent),_=new Date().getTime(),C=await(await fetch(`/api/mobile-test-email?_=${_}`,{method:"POST",headers:{"Content-Type":"application/json","X-Device-Type":v?"mobile":"desktop","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},body:JSON.stringify({toEmail:u,timestamp:_,deviceInfo:navigator.userAgent}),cache:"no-cache",credentials:"same-origin",keepalive:!0})).json();if(C.success)r(`Email Ä‘ang Ä‘Æ°á»£c xá»­ lÃ½ qua endpoint tá»‘i Æ°u hÃ³a cho ${v?"di Ä‘á»™ng":"desktop"}! Vui lÃ²ng kiá»ƒm tra há»™p thÆ° sau vÃ i giÃ¢y.`),console.log(`ÄÃ£ gá»­i yÃªu cáº§u thÃ nh cÃ´ng Ä‘áº¿n ${v?"mobile":"desktop"} endpoint.`),console.log("Response:",C);else throw new Error(C.error||"Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh vá»›i endpoint di Ä‘á»™ng")}catch(v){console.error("Chi tiáº¿t lá»—i mobile endpoint:",v),m(`KhÃ´ng thá»ƒ gá»­i email: ${(v==null?void 0:v.message)||"Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh"}`)}t(!1)}catch(j){console.error("Error sending test email:",j),m(`Error: ${(j==null?void 0:j.message)||"Unknown error"}`),t(!1)}};return e.jsxs("div",{className:"p-4 border rounded-lg shadow-md bg-white max-w-md mx-auto mt-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Kiá»ƒm tra Email trÃªn Di Ä‘á»™ng"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email ngÆ°á»i nháº­n:"}),e.jsx("input",{type:"email",value:u,onChange:j=>c(j.target.value),className:"w-full p-2 border rounded focus:ring-2 focus:ring-primary",placeholder:"example@gmail.com"})]}),e.jsx("button",{onClick:h,disabled:n,className:`w-full p-3 rounded font-medium text-white ${n?"bg-gray-400":"bg-primary hover:bg-primary/90"}`,children:n?"Äang gá»­i...":"Gá»­i Email Kiá»ƒm tra"}),s&&e.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-800 rounded",children:s}),i&&e.jsx("div",{className:"mt-4 p-3 bg-red-100 text-red-800 rounded",children:i}),e.jsx("div",{className:"mt-4 text-sm text-gray-500",children:e.jsx("p",{children:"* CÃ´ng cá»¥ nÃ y giÃºp kiá»ƒm tra viá»‡c gá»­i email trÃªn thiáº¿t bá»‹ di Ä‘á»™ng. Náº¿u phÆ°Æ¡ng thá»©c tiÃªu chuáº©n khÃ´ng hoáº¡t Ä‘á»™ng, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng thá»­ phÆ°Æ¡ng thá»©c tá»‘i Æ°u hÃ³a cho di Ä‘á»™ng."})})]})},ad=({onLogin:n})=>{const[t,s]=a.useState(""),[r,i]=a.useState(""),[m,u]=a.useState(""),c=async h=>{if(h.preventDefault(),!t||!r){u("Please enter both username and password.");return}u("");try{const j=await fetch("/api/staff/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});if(!j.ok){const _=await j.json();u(_.error||"Login failed.");return}const v=await j.json();v.token?(localStorage.setItem("staff_token",v.token),n()):u("Login failed: No token received.")}catch{u("Login failed: Network or server error.")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-300",children:e.jsxs("form",{onSubmit:c,className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md space-y-6 border border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4 text-center",children:"Staff Login"}),m&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:m}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Username"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400",value:t,onChange:h=>s(h.target.value),autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Password"}),e.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400",value:r,onChange:h=>i(h.target.value)})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-700 hover:bg-blue-800 text-white font-semibold py-2 rounded-lg transition",children:"Login"})]})})},cd=["ÄÃ£ ghi nháº­n","Äang thá»±c hiá»‡n","ÄÃ£ thá»±c hiá»‡n vÃ  Ä‘ang bÃ n giao cho khÃ¡ch","HoÃ n thiá»‡n","LÆ°u Ã½ khÃ¡c"],ld=({request:n,onClose:t,onStatusChange:s,onOpenMessage:r})=>{const[i,m]=a.useState(n.status);return n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-lg relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-blue-700",onClick:t,children:"Ã—"}),e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:"Request Details"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Room:"})," ",n.room]}),e.jsxs("div",{children:[e.jsx("b",{children:"Order ID:"})," ",n.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Guest Name:"})," ",n.guestName]}),e.jsxs("div",{children:[e.jsx("b",{children:"Content:"})," ",n.content]}),e.jsxs("div",{children:[e.jsx("b",{children:"Time:"})," ",n.time]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("b",{children:"Status:"}),e.jsx("select",{className:"border rounded px-2 py-1 text-xs",value:i,onChange:u=>m(u.target.value),children:cd.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Notes:"})," ",n.notes||"-"]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-semibold",onClick:()=>{i!==n.status&&s(i)},children:"Cáº­p Nháº­t"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-semibold",onClick:r,children:"Nháº¯n khÃ¡ch"}),e.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded font-semibold",onClick:t,children:"ÄÃ³ng"})]})]})}):null},dd=({messages:n,onSend:t,onClose:s,loading:r})=>{const[i,m]=a.useState(""),u=()=>{i.trim()&&(t(i),m(""))};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-5 w-full max-w-md relative flex flex-col",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-blue-700",onClick:s,children:"Ã—"}),e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"Nháº¯n tin tá»›i Guest"}),e.jsx("div",{className:"flex-1 overflow-y-auto mb-3 max-h-60 border rounded p-2 bg-gray-50",children:n.length===0?e.jsx("div",{className:"text-gray-400 text-sm text-center",children:"ChÆ°a cÃ³ tin nháº¯n"}):n.map(c=>e.jsxs("div",{className:`mb-2 ${c.sender==="staff"?"text-right":"text-left"}`,children:[e.jsxs("div",{className:`inline-block px-3 py-1 rounded-lg ${c.sender==="staff"?"bg-blue-100 text-blue-900":"bg-gray-200 text-gray-800"}`,children:[e.jsxs("span",{className:"font-semibold",children:[c.sender==="staff"?"Staff":"Guest",":"]})," ",c.content]}),e.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:c.time})]},c.id))}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",className:"flex-1 border rounded px-2 py-1",placeholder:"Nháº­p tin nháº¯n...",value:i,onChange:c=>m(c.target.value),onKeyDown:c=>{c.key==="Enter"&&u()},disabled:r}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded font-semibold",onClick:u,disabled:r||!i.trim(),children:"Gá»­i"})]})]})})},pe=["Táº¥t cáº£","ÄÃ£ ghi nháº­n","Äang thá»±c hiá»‡n","ÄÃ£ thá»±c hiá»‡n vÃ  Ä‘ang bÃ n giao cho khÃ¡ch","HoÃ n thiá»‡n","LÆ°u Ã½ khÃ¡c"],je=n=>{switch(n){case"ÄÃ£ ghi nháº­n":return"bg-gray-300 text-gray-800";case"Äang thá»±c hiá»‡n":return"bg-yellow-200 text-yellow-800";case"ÄÃ£ thá»±c hiá»‡n vÃ  Ä‘ang bÃ n giao cho khÃ¡ch":return"bg-blue-200 text-blue-800";case"HoÃ n thiá»‡n":return"bg-green-200 text-green-800";case"LÆ°u Ã½ khÃ¡c":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},md=()=>{const[n,t]=a.useState([]),[s,r]=a.useState(null),[i,m]=a.useState(!1),[u,c]=a.useState(!1),[h,j]=a.useState([]),[v,_]=a.useState(!1),[A,C]=a.useState("Táº¥t cáº£"),[b,H]=a.useState(""),[l,w]=a.useState(""),[M,V]=a.useState(null),[y,F]=a.useState(!1),[N,o]=a.useState(!1),[p,k]=a.useState(""),[E,f]=a.useState(""),[x,g]=a.useState({}),T=dt(),z=()=>localStorage.getItem("staff_token"),L=async()=>{const d=z();if(!d){T("/staff");return}try{const $=await fetch("/api/staff/requests",{headers:{Authorization:`Bearer ${d}`},credentials:"include"});if($.status===401){localStorage.removeItem("staff_token"),T("/staff");return}const B=await $.json();console.log("Fetched requests data:",B),t(B)}catch($){console.error("Failed to fetch requests:",$)}};a.useEffect(()=>{L();const d=setInterval(L,3e4);return()=>clearInterval(d)},[]);const O=()=>{m(!1),r(null)},R=async(d,$)=>{const B=z();if(!B)return T("/staff");try{await fetch(`/api/staff/requests/${$}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`},credentials:"include",body:JSON.stringify({status:d})}),t(D=>D.map(I=>I.id===$?{...I,status:d}:I)),s&&s.id===$&&r({...s,status:d})}catch(D){console.error("Failed to update status:",D)}},Y=async()=>{if(c(!0),!s)return;const d=z();if(!d)return T("/staff");try{const B=await(await fetch(`/api/staff/requests/${s.id}/messages`,{headers:{Authorization:`Bearer ${d}`},credentials:"include"})).json();j(B)}catch{j([])}},X=()=>c(!1),U=async d=>{_(!0);const $=z();if(!$)return T("/staff");try{await fetch(`/api/staff/requests/${s.id}/message`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},credentials:"include",body:JSON.stringify({content:d})}),j(B=>[...B,{id:(B.length+1).toString(),sender:"staff",content:d,time:new Date().toLocaleTimeString().slice(0,5)}])}catch{}_(!1)},ne=async()=>{o(!0),k(""),f("")},te=async()=>{if(p!=="2208"){f("Máº­t kháº©u khÃ´ng Ä‘Ãºng");return}F(!0);try{const d=z();if(!d)return o(!1),T("/staff");const B=await(await fetch("/api/staff/requests/all",{method:"DELETE",headers:{Authorization:`Bearer ${d}`},credentials:"include"})).json();o(!1),B.success?(alert(`${B.message}`),t([])):alert(`Lá»—i: ${B.error||"KhÃ´ng thá»ƒ xÃ³a requests"}`)}catch(d){console.error("Error deleting all requests:",d),alert("ÄÃ£ xáº£y ra lá»—i khi xÃ³a requests"),o(!1)}finally{F(!1),k("")}},Z=n.filter(d=>{if(A!=="Táº¥t cáº£"&&d.status!==A)return!1;if(b||l){const $=new Date(d.created_at);if(b){const B=new Date(b);if(B.setHours(0,0,0,0),$<B)return!1}if(l){const B=new Date(l);if(B.setHours(23,59,59,999),$>B)return!1}}return!0}),de=d=>{d.key==="Enter"&&te(),E&&f("")},me=d=>{d.stopPropagation()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-200 p-2 sm:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto bg-white rounded-xl shadow-lg p-3 sm:p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("img",{src:"/assets/references/images/minhon-logo.jpg",alt:"Minhon Logo",className:"h-16 object-contain mb-2"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-900 text-center",children:"Staff Request Management"})]}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:ne,disabled:y||n.length===0,className:`w-auto bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded font-semibold ${y||n.length===0?"opacity-50 cursor-not-allowed":""}`,children:y?"Äang xÃ³a...":"XÃ³a táº¥t cáº£ Requests"}),e.jsx("button",{onClick:L,className:"w-auto bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-semibold",children:"Refresh"})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("label",{className:"font-semibold text-blue-900 w-full sm:w-auto",children:"Lá»c theo tráº¡ng thÃ¡i:"}),e.jsx("select",{className:"w-full sm:w-auto border rounded px-3 py-1 text-sm",value:A,onChange:d=>C(d.target.value),children:pe.map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("label",{className:"font-semibold text-blue-900 w-full sm:w-auto",children:"Lá»c theo thá»i gian:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm text-gray-600 min-w-10",children:"Tá»«:"}),e.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm w-full",value:b,onChange:d=>H(d.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm text-gray-600 min-w-10",children:"Äáº¿n:"}),e.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm w-full",value:l,onChange:d=>w(d.target.value)})]}),(b||l)&&e.jsx("button",{onClick:()=>{H(""),w("")},className:"text-blue-600 hover:text-blue-800 text-sm mt-2 sm:mt-0",children:"XÃ³a lá»c"})]})]})]}),e.jsx("div",{className:"block sm:hidden",children:e.jsxs("div",{className:"space-y-4",children:[(console.log("Mobile rendering - filteredRequests:",Z),null),Z.length>0?[...Z].sort((d,$)=>new Date($.created_at).getTime()-new Date(d.created_at).getTime()).map(d=>e.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("div",{className:"font-semibold",children:["PhÃ²ng: ",d.room_number||"N/A"]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${je(d.status)}`,children:d.status||"ChÆ°a xÃ¡c Ä‘á»‹nh"})]}),e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Order ID: ",d.orderId||d.id||"N/A"]}),e.jsx("div",{className:"text-xs text-gray-500 mb-3",children:d.created_at?e.jsxs(e.Fragment,{children:[new Date(d.created_at).toLocaleDateString()," ",new Date(d.created_at).toLocaleTimeString()]}):"Thá»i gian khÃ´ng xÃ¡c Ä‘á»‹nh"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{onClick:()=>V(M===d.id?null:d.id),className:"w-full flex justify-between items-center py-1 px-2 border rounded bg-gray-50 hover:bg-gray-100",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:M===d.id?"áº¨n ná»™i dung":"Xem ná»™i dung"}),e.jsx("svg",{className:`w-4 h-4 text-blue-700 transition-transform ${M===d.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),M===d.id&&e.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded-md whitespace-pre-line break-words text-sm",children:d.request_content||"KhÃ´ng cÃ³ ná»™i dung"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("select",{className:"border rounded px-2 py-2 text-sm w-full",value:x[d.id]??d.status,onChange:$=>g(B=>({...B,[d.id]:$.target.value})),children:pe.filter($=>$!=="Táº¥t cáº£").map($=>e.jsx("option",{value:$,children:$},$))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-2 py-2 rounded text-sm font-semibold",onClick:async()=>{const $=x[d.id];$&&$!==d.status&&(await R($,d.id),g(B=>{const{[d.id]:D,...I}=B;return I}))},children:"Cáº­p Nháº­t"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-2 py-2 rounded text-sm font-semibold",onClick:()=>{r(d),Y()},children:"Nháº¯n khÃ¡ch"})]})]})]},d.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"KhÃ´ng cÃ³ yÃªu cáº§u nÃ o"}),e.jsx("p",{className:"mt-2 text-sm",children:"Nháº¥n Refresh Ä‘á»ƒ táº£i láº¡i dá»¯ liá»‡u"})]})]})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100 text-blue-900",children:[e.jsx("th",{className:"py-2 px-3 text-left",children:"Room"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Order ID"}),e.jsx("th",{className:"py-2 px-6 text-left w-3/5",children:"Content"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Time"}),e.jsx("th",{className:"py-2 px-2 text-left w-1/12",children:"Status"}),e.jsx("th",{className:"py-2 px-3 text-left",children:"Action"})]})}),e.jsxs("tbody",{children:[(Array.isArray(Z)?[...Z].sort((d,$)=>new Date($.created_at).getTime()-new Date(d.created_at).getTime()):[]).map(d=>e.jsxs("tr",{className:"border-b hover:bg-blue-50",children:[e.jsx("td",{className:"py-2 px-3 font-semibold",children:d.room_number}),e.jsx("td",{className:"py-2 px-3",children:d.orderId||d.id}),e.jsx("td",{className:"py-2 px-6 whitespace-pre-line break-words max-w-4xl",children:d.request_content}),e.jsxs("td",{className:"py-2 px-3",children:[d.created_at&&e.jsx("span",{className:"block whitespace-nowrap",children:new Date(d.created_at).toLocaleDateString()}),d.created_at&&e.jsx("span",{className:"block whitespace-nowrap text-xs text-gray-500",children:new Date(d.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${je(d.status)} break-words whitespace-normal block text-center`,children:d.status})}),e.jsxs("td",{className:"py-2 px-3 space-x-2",children:[e.jsx("select",{className:"border rounded px-2 py-1 text-xs",value:x[d.id]??d.status,onChange:$=>g(B=>({...B,[d.id]:$.target.value})),children:pe.filter($=>$!=="Táº¥t cáº£").map($=>e.jsx("option",{value:$,children:$},$))}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-semibold",onClick:async()=>{const $=x[d.id];$&&$!==d.status&&(await R($,d.id),g(B=>{const{[d.id]:D,...I}=B;return I}))},children:"Cáº­p Nháº­t"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-semibold",onClick:()=>{r(d),Y()},children:"Nháº¯n khÃ¡ch"})]})]},d.id)),Z.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"KhÃ´ng cÃ³ yÃªu cáº§u nÃ o"})})]})]})})]}),i&&s&&e.jsx(ld,{request:s,onClose:O,onStatusChange:d=>R(d,s.id),onOpenMessage:Y}),u&&s&&e.jsx(dd,{messages:h,onClose:X,onSend:U,loading:v}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md mx-4",onClick:me,children:[e.jsx("h3",{className:"text-lg font-bold text-red-600 mb-4",children:"XÃ¡c nháº­n xÃ³a toÃ n bá»™ requests"}),e.jsx("p",{className:"mb-4 text-gray-700",children:"HÃ nh Ä‘á»™ng nÃ y sáº½ xÃ³a táº¥t cáº£ requests vÃ  khÃ´ng thá»ƒ hoÃ n tÃ¡c. Vui lÃ²ng nháº­p máº­t kháº©u Ä‘á»ƒ xÃ¡c nháº­n:"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"password",value:p,onChange:d=>k(d.target.value),onKeyDown:de,className:`w-full px-3 py-2 border rounded ${E?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-red-500`,placeholder:"Nháº­p máº­t kháº©u xÃ¡c nháº­n",autoFocus:!0}),E&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:E}),e.jsx("p",{className:"text-gray-500 text-xs mt-2 italic",children:"Biá»‡n phÃ¡p báº£o vá»‡: Chá»©c nÄƒng xÃ³a yÃªu cáº§u máº­t kháº©u xÃ¡c nháº­n Ä‘á»ƒ ngÄƒn ngá»«a xÃ³a dá»¯ liá»‡u do nháº§m láº«n."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded transition duration-200",children:"Há»§y"}),e.jsx("button",{onClick:te,disabled:y,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded transition duration-200 flex items-center disabled:opacity-70",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Äang xÃ³a..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"XÃ¡c nháº­n xÃ³a"]})})]})]})})]})},ud=()=>{const[n,t]=a.useState(!1),s=()=>t(!0);return n?e.jsx(md,{}):e.jsx(ad,{onLogin:s})},hd=re.lazy(()=>Ae(()=>import("./CallHistory-ChEkosKA.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),xd=re.lazy(()=>Ae(()=>import("./CallDetails-CHM_Q-IP.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),pd=()=>e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Äang táº£i..."})]})}),fd=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Kiá»ƒm tra TÃ­nh nÄƒng Email"}),e.jsx(Ne,{href:"/",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Quay láº¡i Trang ChÃ­nh"})]}),e.jsx(id,{})]})});function gd(){return e.jsx(a.Suspense,{fallback:e.jsx(pd,{}),children:e.jsxs(Ye,{children:[e.jsx(se,{path:"/call-history",component:hd}),e.jsx(se,{path:"/call-details/:callId",component:xd}),e.jsx(se,{path:"/email-test",component:fd}),e.jsx(se,{path:"/staff",component:ud}),e.jsx(se,{path:"/",component:ed}),e.jsx(se,{component:rd})]})})}function bd(){return We(),e.jsx(mt,{children:e.jsx(ze,{children:e.jsxs(ft,{children:[e.jsx(gd,{}),e.jsx(St,{})]})})})}async function _d(n){if(!n.ok){const t=await n.text()||n.statusText;throw new Error(`${n.status}: ${t}`)}}const yd=({on401:n})=>async({queryKey:t})=>{const s=await fetch(t[0],{credentials:"include"});return await _d(s),await s.json()},vd=new ut({defaultOptions:{queries:{queryFn:yd({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});Xe(document.getElementById("root")).render(e.jsx(ht,{client:vd,children:e.jsx(ze,{children:e.jsx(bd,{})})}));
