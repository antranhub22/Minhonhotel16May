var fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qs(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}function _r(t,e){if(t==null)return{};var n,r,a=function(o,u){if(o==null)return{};var d,p,g={},m=Object.keys(o);for(p=0;p<m.length;p++)d=m[p],u.indexOf(d)>=0||(g[d]=o[d]);return g}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(t)}function aa(t){var e=function(n,r){if(F(n)!=="object"||n===null)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var s=a.call(n,r);if(F(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return F(e)==="symbol"?e:String(e)}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aa(r.key),r)}}function pe(t,e,n){return e&&br(t.prototype,e),n&&br(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function be(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t,e){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ht(t,e)}function zt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}function Ht(t,e){if(e&&(F(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(t)}function ue(t){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(t)}function ke(t,e,n){return(e=aa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wr(t,e,n,r,a,s,o){try{var u=t[s](o),d=u.value}catch(p){return void n(p)}u.done?e(d):Promise.resolve(d).then(r,a)}function A(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var s=t.apply(e,n);function o(d){wr(s,r,a,o,u,"next",d)}function u(d){wr(s,r,a,o,u,"throw",d)}o(void 0)})}}function Sr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _e(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var s,o,u,d,p=[],g=!0,m=!1;try{if(u=(a=a.call(n)).next,r===0){if(Object(a)!==a)return;g=!1}else for(;!(g=(s=u.call(a)).done)&&(p.push(s.value),p.length!==r);g=!0);}catch(w){m=!0,o=w}finally{try{if(!g&&a.return!=null&&(d=a.return(),Object(d)!==d))return}finally{if(m)throw o}}return p}}(t,e)||function(n,r){if(n){if(typeof n=="string")return Sr(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Sr(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var sa,Ee={},Ws={get exports(){return Ee},set exports(t){Ee=t}},Xe=typeof Reflect=="object"?Reflect:null,kr=Xe&&typeof Xe.apply=="function"?Xe.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};sa=Xe&&typeof Xe.ownKeys=="function"?Xe.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Er=Number.isNaN||function(t){return t!=t};function V(){V.init.call(this)}Ws.exports=V,Ee.once=function(t,e){return new Promise(function(n,r){function a(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",a),n([].slice.call(arguments))}Pr(t,e,s,{once:!0}),e!=="error"&&function(o,u,d){typeof o.on=="function"&&Pr(o,"error",u,d)}(t,a,{once:!0})})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var Tr=10;function It(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function oa(t){return t._maxListeners===void 0?V.defaultMaxListeners:t._maxListeners}function Cr(t,e,n,r){var a,s,o,u;if(It(n),(s=t._events)===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=oa(t))>0&&o.length>a&&!o.warned){o.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=t,d.type=e,d.count=o.length,u=d,console&&console.warn&&console.warn(u)}return t}function Gs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Mr(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},a=Gs.bind(r);return a.listener=n,r.wrapFn=a,a}function Ar(t,e,n){var r=t._events;if(r===void 0)return[];var a=r[e];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?function(s){for(var o=new Array(s.length),u=0;u<o.length;++u)o[u]=s[u].listener||s[u];return o}(a):ca(a,a.length)}function Or(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function ca(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Pr(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function a(s){r.once&&t.removeEventListener(e,a),n(s)})}}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return Tr},set:function(t){if(typeof t!="number"||t<0||Er(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Tr=t}}),V.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Er(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},V.prototype.getMaxListeners=function(){return oa(this)},V.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")kr(u,this,e);else{var d=u.length,p=ca(u,d);for(n=0;n<d;++n)kr(p[n],this,e)}return!0},V.prototype.addListener=function(t,e){return Cr(this,t,e,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(t,e){return Cr(this,t,e,!0)},V.prototype.once=function(t,e){return It(e),this.on(t,Mr(this,t,e)),this},V.prototype.prependOnceListener=function(t,e){return It(e),this.prependListener(t,Mr(this,t,e)),this},V.prototype.removeListener=function(t,e){var n,r,a,s,o;if(It(e),(r=this._events)===void 0)return this;if((n=r[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():function(u,d){for(;d+1<u.length;d++)u[d]=u[d+1];u.pop()}(n,a),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,o||e)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(t){var e,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a,s=Object.keys(n);for(r=0;r<s.length;++r)(a=s[r])!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},V.prototype.listeners=function(t){return Ar(this,t,!0)},V.prototype.rawListeners=function(t){return Ar(this,t,!1)},V.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Or.call(t,e)},V.prototype.listenerCount=Or,V.prototype.eventNames=function(){return this._eventsCount>0?sa(this._events):[]};var Ir=Object.prototype.hasOwnProperty;function Lr(t,e,n){for(n of t.keys())if(K(n,e))return n}function K(t,e){var n,r,a;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&K(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((a=r)&&typeof a=="object"&&!(a=Lr(e,a))||!e.has(a))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((a=r[0])&&typeof a=="object"&&!(a=Lr(e,a))||!K(r[1],e.get(a)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(Ir.call(t,n)&&++r&&!Ir.call(e,n)||!(n in e)||!K(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const zs={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},la={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},$={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Q={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ae={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class y{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const a=y.getVersionPrecision(e),s=y.getVersionPrecision(n);let o=Math.max(a,s),u=0;const d=y.map([e,n],p=>{const g=o-y.getVersionPrecision(p),m=p+new Array(g+1).join(".0");return y.map(m.split("."),w=>new Array(20-w.length).join("0")+w).reverse()});for(r&&(u=o-Math.min(a,s)),o-=1;o>=u;){if(d[0][o]>d[1][o])return 1;if(d[0][o]===d[1][o]){if(o===u)return 0;o-=1}else if(d[0][o]<d[1][o])return-1}}static map(e,n){const r=[];let a;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(a=0;a<e.length;a+=1)r.push(n(e[a]));return r}static find(e,n){let r,a;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,a=e.length;r<a;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let a,s;if(Object.assign)return Object.assign(e,...n);for(a=0,s=n.length;a<s;a+=1){const o=n[a];typeof o=="object"&&o!==null&&Object.keys(o).forEach(u=>{r[u]=o[u]})}return e}static getBrowserAlias(e){return zs[e]}static getBrowserTypeByAlias(e){return la[e]||""}}const B=/version\/(\d+(\.?_?\d+)+)/i,Hs=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=y.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=y.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=y.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=y.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=y.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=y.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=y.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=y.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=y.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=y.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=y.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=y.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=y.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=y.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=y.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=y.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=y.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=y.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=y.getFirstMatch(B,t)||y.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=y.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=y.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=y.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=y.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=y.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=y.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=y.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=y.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=y.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=y.getFirstMatch(B,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:y.getFirstMatch(e,t),version:y.getSecondMatch(e,t)}}}];var Qs=[{test:[/Roku\/DVP/],describe(t){const e=y.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Q.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=y.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Q.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=y.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=y.getWindowsVersionName(e);return{name:Q.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Q.iOS},n=y.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=y.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=y.getMacOSVersionName(e),r={name:Q.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=y.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Q.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=y.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=y.getAndroidVersionName(e),r={name:Q.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=y.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Q.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=y.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||y.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||y.getFirstMatch(/\bbb(\d+)/i,t);return{name:Q.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=y.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Q.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=y.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Q.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:Q.Linux})},{test:[/CrOS/],describe:()=>({name:Q.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=y.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Q.PlayStation4,version:e}}}],Ks=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=y.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:$.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:$.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:$.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:$.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:$.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:$.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:$.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=y.getFirstMatch(/(ipod|iphone)/i,t);return{type:$.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:$.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:$.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:$.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:$.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:$.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:$.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:$.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:$.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:$.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:$.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:$.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:$.tv})}],Xs=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Ae.Blink};const e=y.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Ae.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Ae.Trident},n=y.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Ae.Presto},n=y.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Ae.Gecko},n=y.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ae.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Ae.WebKit},n=y.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class Dr{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=y.find(Hs,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=y.find(Qs,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=y.find(Ks,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=y.find(Xs,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return y.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const a={};let s=0;if(Object.keys(e).forEach(o=>{const u=e[o];typeof u=="string"?(a[o]=u,s+=1):typeof u=="object"&&(n[o]=u,r+=1)}),r>0){const o=Object.keys(n),u=y.find(o,p=>this.isOS(p));if(u){const p=this.satisfies(n[u]);if(p!==void 0)return p}const d=y.find(o,p=>this.isPlatform(p));if(d){const p=this.satisfies(n[d]);if(p!==void 0)return p}}if(s>0){const o=Object.keys(a),u=y.find(o,d=>this.isBrowser(d,!0));if(u!==void 0)return this.compareVersion(a[u])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let a=e.toLowerCase();const s=y.getBrowserTypeByAlias(a);return n&&s&&(a=s.toLowerCase()),a===r}compareVersion(e){let n=[0],r=e,a=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(a=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(a=!0,r=e.substr(1)),n.indexOf(y.compareVersions(s,r,a))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Zs{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Dr(e,n)}static parse(e){return new Dr(e).getResult()}static get BROWSER_MAP(){return la}static get ENGINE_MAP(){return Ae}static get OS_MAP(){return Q}static get PLATFORMS_MAP(){return $}}function Qt(){return Date.now()+Math.random().toString()}function ot(){throw new Error("Method must be implemented in subclass")}function ua(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function xt(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:ua("https://c.daily.co/call-machine/versioned/".concat("0.75.2","/static/call-machine-object-bundle.js"),t)}function Ft(t){try{new URL(t)}catch{return!1}return!0}const da=Object.prototype.toString;function Gn(t){switch(da.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return We(t,Error)}}function it(t,e){return da.call(t)===`[object ${e}]`}function pa(t){return it(t,"ErrorEvent")}function Nr(t){return it(t,"DOMError")}function Te(t){return it(t,"String")}function zn(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function vn(t){return t===null||zn(t)||typeof t!="object"&&typeof t!="function"}function tt(t){return it(t,"Object")}function Kt(t){return typeof Event<"u"&&We(t,Event)}function Xt(t){return!!(t&&t.then&&typeof t.then=="function")}function We(t,e){try{return t instanceof e}catch{return!1}}function fa(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}function Ze(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Rr(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const a=t[r];try{fa(a)?n.push("[VueViewModel]"):n.push(String(a))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function eo(t,e,n=!1){return!!Te(t)&&(it(e,"RegExp")?e.test(t):!!Te(e)&&(n?t===e:t.includes(e)))}function bt(t,e=[],n=!1){return e.some(r=>eo(t,r,n))}function to(t,e,n=250,r,a,s,o){if(!(s.exception&&s.exception.values&&o&&We(o.originalException,Error)))return;const u=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var d,p;u&&(s.exception.values=(d=yn(t,e,a,o.originalException,r,s.exception.values,u,0),p=n,d.map(g=>(g.value&&(g.value=Ze(g.value,p)),g))))}function yn(t,e,n,r,a,s,o,u){if(s.length>=n+1)return s;let d=[...s];if(We(r[a],Error)){jr(o,u);const p=t(e,r[a]),g=d.length;xr(p,a,g,u),d=yn(t,e,n,r[a],a,[p,...d],p,g)}return Array.isArray(r.errors)&&r.errors.forEach((p,g)=>{if(We(p,Error)){jr(o,u);const m=t(e,p),w=d.length;xr(m,`errors[${g}]`,w,u),d=yn(t,e,n,p,a,[m,...d],m,w)}}),d}function jr(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function xr(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Fr(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const qe="8.33.1",j=globalThis;function Vt(t,e,n){const r=j,a=r.__SENTRY__=r.__SENTRY__||{},s=a[qe]=a[qe]||{};return s[t]||(s[t]=e())}const Hn=j;function ha(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,a=[];let s=0,o=0;const u=" > ",d=u.length;let p;const g=Array.isArray(e)?e:e.keyAttrs,m=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(p=no(n,g),!(p==="html"||s>1&&o+a.length*d+p.length>=m));)a.push(p),o+=p.length,n=n.parentNode;return a.reverse().join(u)}catch{return"<unknown>"}}function no(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(Hn.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const a=e&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(a&&a.length)a.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Te(o)){const u=o.split(/\s+/);for(const d of u)r.push(`.${d}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const u=n.getAttribute(o);u&&r.push(`[${o}="${u}"]`)}return r.join("")}const vt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,_n=["debug","info","warn","error","log","assert","trace"],Bt={};function Qn(t){if(!("console"in j))return t();const e=j.console,n={},r=Object.keys(Bt);r.forEach(a=>{const s=Bt[a];n[a]=e[a],e[a]=s});try{return t()}finally{r.forEach(a=>{e[a]=n[a]})}}const P=Vt("logger",function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return vt?_n.forEach(n=>{e[n]=(...r)=>{t&&Qn(()=>{j.console[n](`Sentry Logger [${n}]:`,...r)})}}):_n.forEach(n=>{e[n]=()=>{}}),e}),ro=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ut(t,e=!1){const{host:n,path:r,pass:a,port:s,projectId:o,protocol:u,publicKey:d}=t;return`${u}://${d}${e&&a?`:${a}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Vr(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function io(t){const e=typeof t=="string"?function(n){const r=ro.exec(n);if(!r)return void Qn(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});const[a,s,o="",u="",d="",p=""]=r.slice(1);let g="",m=p;const w=m.split("/");if(w.length>1&&(g=w.slice(0,-1).join("/"),m=w.pop()),m){const S=m.match(/^\d+/);S&&(m=S[0])}return Vr({host:u,pass:o,path:g,projectId:m,port:d,protocol:a,publicKey:s})}(t):Vr(t);if(e&&function(n){if(!vt)return!0;const{port:r,projectId:a,protocol:s}=n;return!(["protocol","publicKey","host","projectId"].find(o=>!n[o]&&(P.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(a.match(/^\d+$/)?function(o){return o==="http"||o==="https"}(s)?r&&isNaN(parseInt(r,10))&&(P.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(P.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(P.error(`Invalid Sentry Dsn: Invalid projectId ${a}`),1)))}(e))return e}class me extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function ee(t,e,n){if(!(e in t))return;const r=t[e],a=n(r);typeof a=="function"&&ga(a,r),t[e]=a}function Ge(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{vt&&P.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function ga(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Ge(t,"__sentry_original__",e)}catch{}}function Kn(t){return t.__sentry_original__}function ma(t){if(Gn(t))return{message:t.message,name:t.name,stack:t.stack,...Ur(t)};if(Kt(t)){const e={type:t.type,target:Br(t.target),currentTarget:Br(t.currentTarget),...Ur(t)};return typeof CustomEvent<"u"&&We(t,CustomEvent)&&(e.detail=t.detail),e}return t}function Br(t){try{return e=t,typeof Element<"u"&&We(e,Element)?ha(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function Ur(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function oe(t){return bn(t,new Map)}function bn(t,e){if(function(n){if(!tt(n))return!1;try{const r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const a of Object.getOwnPropertyNames(t))t[a]!==void 0&&(r[a]=bn(t[a],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(a=>{r.push(bn(a,e))}),r}return t}const Je="?",Jr=/\(error: (.*)\)/,Yr=/captureMessage|captureException/;function wt(t){return t[t.length-1]||{}}const $r="<anonymous>";function Ne(t){try{return t&&typeof t=="function"&&t.name||$r}catch{return $r}}function qr(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const Lt={},Wr={};function Ye(t,e){Lt[t]=Lt[t]||[],Lt[t].push(e)}function $e(t,e){Wr[t]||(e(),Wr[t]=!0)}function ce(t,e){const n=t&&Lt[t];if(n)for(const r of n)try{r(e)}catch(a){vt&&P.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Ne(r)}
Error:`,a)}}function ao(){"console"in j&&_n.forEach(function(t){t in j.console&&ee(j.console,t,function(e){return Bt[t]=e,function(...n){ce("console",{args:n,level:t});const r=Bt[t];r&&r.apply(j.console,n)}})})}const tn=j;function wn(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function so(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in tn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(wn(tn.fetch))return!0;let t=!1;const e=tn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=wn(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){vt&&P.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function yt(){return Date.now()/1e3}const De=function(){const{performance:t}=j;if(!t||!t.now)return yt;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/1e3}();function oo(t,e){const n="fetch";Ye(n,t),$e(n,()=>function(r,a=!1){a&&!so()||ee(j,"fetch",function(s){return function(...o){const{method:u,url:d}=function(m){if(m.length===0)return{method:"GET",url:""};if(m.length===2){const[S,_]=m;return{url:Gr(S),method:Sn(_,"method")?String(_.method).toUpperCase():"GET"}}const w=m[0];return{url:Gr(w),method:Sn(w,"method")?String(w.method).toUpperCase():"GET"}}(o),p={args:o,fetchData:{method:u,url:d},startTimestamp:1e3*De()};ce("fetch",{...p});const g=new Error().stack;return s.apply(j,o).then(async m=>(ce("fetch",{...p,endTimestamp:1e3*De(),response:m}),m),m=>{throw ce("fetch",{...p,endTimestamp:1e3*De(),error:m}),Gn(m)&&m.stack===void 0&&(m.stack=g,Ge(m,"framesToPop",1)),m})}})}(void 0,e))}function Sn(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Gr(t){return typeof t=="string"?t:t?Sn(t,"url")?t.url:t.toString?t.toString():"":""}(()=>{const{performance:t}=j;!t||!t.now||(t.now(),t.timing&&t.timing.navigationStart)})();let St=null;function co(){St=j.onerror,j.onerror=function(t,e,n,r,a){return ce("error",{column:r,error:a,line:n,msg:t,url:e}),!(!St||St.__SENTRY_LOADER__)&&St.apply(this,arguments)},j.onerror.__SENTRY_INSTRUMENTED__=!0}let kt=null;function lo(){kt=j.onunhandledrejection,j.onunhandledrejection=function(t){return ce("unhandledrejection",t),!(kt&&!kt.__SENTRY_LOADER__)||kt.apply(this,arguments)},j.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function le(){const t=j,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function va(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Pe(t){const{message:e,event_id:n}=t;if(e)return e;const r=va(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function kn(t,e,n){const r=t.exception=t.exception||{},a=r.values=r.values||[],s=a[0]=a[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function gt(t,e){const n=va(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const a={...r&&r.data,...e.data};n.mechanism.data=a}}function zr(t){if(t&&t.__sentry_captured__)return!0;try{Ge(t,"__sentry_captured__",!0)}catch{}return!1}function Ie(t,e=100,n=1/0){try{return En("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ya(t,e=3,n=102400){const r=Ie(t,e);return a=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(a))>n?ya(t,e-1,n):r;var a}function En(t,e,n=1/0,r=1/0,a=function(){const s=typeof WeakSet=="function",o=s?new WeakSet:[];return[function(u){if(s)return!!o.has(u)||(o.add(u),!1);for(let d=0;d<o.length;d++)if(o[d]===u)return!0;return o.push(u),!1},function(u){if(s)o.delete(u);else for(let d=0;d<o.length;d++)if(o[d]===u){o.splice(d,1);break}}]}()){const[s,o]=a;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const u=function(S,_){try{if(S==="domain"&&_&&typeof _=="object"&&_._events)return"[Domain]";if(S==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&_===global)return"[Global]";if(typeof window<"u"&&_===window)return"[Window]";if(typeof document<"u"&&_===document)return"[Document]";if(fa(_))return"[VueViewModel]";if(tt(k=_)&&"nativeEvent"in k&&"preventDefault"in k&&"stopPropagation"in k)return"[SyntheticEvent]";if(typeof _=="number"&&!Number.isFinite(_))return`[${_}]`;if(typeof _=="function")return`[Function: ${Ne(_)}]`;if(typeof _=="symbol")return`[${String(_)}]`;if(typeof _=="bigint")return`[BigInt: ${String(_)}]`;const C=function(O){const L=Object.getPrototypeOf(O);return L?L.constructor.name:"null prototype"}(_);return/^HTML(\w*)Element$/.test(C)?`[HTMLElement: ${C}]`:`[object ${C}]`}catch(C){return`**non-serializable** (${C})`}var k}(t,e);if(!u.startsWith("[object "))return u;if(e.__sentry_skip_normalization__)return e;const d=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(d===0)return u.replace("object ","");if(s(e))return"[Circular ~]";const p=e;if(p&&typeof p.toJSON=="function")try{return En("",p.toJSON(),d-1,r,a)}catch{}const g=Array.isArray(e)?[]:{};let m=0;const w=ma(e);for(const S in w){if(!Object.prototype.hasOwnProperty.call(w,S))continue;if(m>=r){g[S]="[MaxProperties ~]";break}const _=w[S];g[S]=En(S,_,d-1,r,a),m++}return o(e),g}var Se;function ze(t){return new ne(e=>{e(t)})}function Jt(t){return new ne((e,n)=>{n(t)})}(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Se||(Se={}));class ne{constructor(e){ne.prototype.__init.call(this),ne.prototype.__init2.call(this),ne.prototype.__init3.call(this),ne.prototype.__init4.call(this),this._state=Se.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new ne((r,a)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(o){a(o)}else r(s)},s=>{if(n)try{r(n(s))}catch(o){a(o)}else a(s)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new ne((n,r)=>{let a,s;return this.then(o=>{s=!1,a=o,e&&e()},o=>{s=!0,a=o,e&&e()}).then(()=>{s?r(a):n(a)})})}__init(){this._resolve=e=>{this._setResult(Se.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Se.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{this._state===Se.PENDING&&(Xt(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Se.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Se.RESOLVED&&n[1](this._value),this._state===Se.REJECTED&&n[2](this._value),n[0]=!0)})}}}function uo(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return Jt(new me("Not adding Promise because buffer limit was reached."));const a=r();return e.indexOf(a)===-1&&e.push(a),a.then(()=>n(a)).then(null,()=>n(a).then(null,()=>{})),a},drain:function(r){return new ne((a,s)=>{let o=e.length;if(!o)return a(!0);const u=setTimeout(()=>{r&&r>0&&a(!1)},r);e.forEach(d=>{ze(d).then(()=>{--o||(clearTimeout(u),a(!0))},s)})})}}}function nn(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const po=["fatal","error","warning","log","info","debug"];function fo(t){return t==="warn"?"warning":po.includes(t)?t:"log"}const ho=/^sentry-/;function go(t){const e=function(r){if(!(!r||!Te(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((a,s)=>{const o=Hr(s);return Object.entries(o).forEach(([u,d])=>{a[u]=d}),a},{}):Hr(r)}(t);if(!e)return;const n=Object.entries(e).reduce((r,[a,s])=>(a.match(ho)&&(r[a.slice(7)]=s),r),{});return Object.keys(n).length>0?n:void 0}function Hr(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function mt(t,e=[]){return[t,e]}function mo(t,e){const[n,r]=t;return[n,[...r,e]]}function Qr(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Tn(t){return j.__SENTRY__&&j.__SENTRY__.encodePolyfill?j.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function vo(t){const[e,n]=t;let r=JSON.stringify(e);function a(s){typeof r=="string"?r=typeof s=="string"?r+s:[Tn(r),s]:r.push(typeof s=="string"?Tn(s):s)}for(const s of n){const[o,u]=s;if(a(`
${JSON.stringify(o)}
`),typeof u=="string"||u instanceof Uint8Array)a(u);else{let d;try{d=JSON.stringify(u)}catch{d=JSON.stringify(Ie(u))}a(d)}}return typeof r=="string"?r:function(s){const o=s.reduce((p,g)=>p+g.length,0),u=new Uint8Array(o);let d=0;for(const p of s)u.set(p,d),d+=p.length;return u}(r)}function yo(t){const e=typeof t.data=="string"?Tn(t.data):t.data;return[oe({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const _o={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Kr(t){return _o[t]}function _a(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function bo(t,{statusCode:e,headers:n},r=Date.now()){const a={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const u of s.trim().split(",")){const[d,p,,,g]=u.split(":",5),m=parseInt(d,10),w=1e3*(isNaN(m)?60:m);if(p)for(const S of p.split(";"))S==="metric_bucket"&&g&&!g.split(";").includes("custom")||(a[S]=r+w);else a.all=r+w}else o?a.all=r+function(u,d=Date.now()){const p=parseInt(`${u}`,10);if(!isNaN(p))return 1e3*p;const g=Date.parse(`${u}`);return isNaN(g)?6e4:g-d}(o,r):e===429&&(a.all=r+6e4);return a}function Xr(){return{traceId:le(),spanId:le().substring(16)}}const Et=j,J=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Zt(){return Xn(j),j}function Xn(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||qe,e[qe]=e[qe]||{}}function Cn(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||De(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:le()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}const Mn="_sentrySpan";function Zr(t,e){e?Ge(t,Mn,e):delete t[Mn]}function ei(t){return t[Mn]}class Zn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Xr()}clone(){const e=new Zn;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Zr(e,ei(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Cn(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,a]=n instanceof Re?[n.getScopeData(),n.getRequestSession()]:tt(n)?[e,e.requestSession]:[],{tags:s,extra:o,user:u,contexts:d,level:p,fingerprint:g=[],propagationContext:m}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...d},u&&Object.keys(u).length&&(this._user=u),p&&(this._level=p),g.length&&(this._fingerprint=g),m&&(this._propagationContext=m),a&&(this._requestSession=a),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Zr(this,void 0),this._attachments=[],this._propagationContext=Xr(),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const a={timestamp:yt(),...e},s=this._breadcrumbs;return s.push(a),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ei(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:le();if(!this._client)return P.warn("No client configured on scope - will not capture exception!"),r;const a=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:a,...n,event_id:r},this),r}captureMessage(e,n,r){const a=r&&r.event_id?r.event_id:le();if(!this._client)return P.warn("No client configured on scope - will not capture message!"),a;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:a},this),a}captureEvent(e,n){const r=n&&n.event_id?n.event_id:le();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(P.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Re=Zn;class wo{constructor(e,n){let r,a;r=e||new Re,a=n||new Re,this._stack=[{scope:r}],this._isolationScope=a}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(a){throw this._popScope(),a}return Xt(r)?r.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function nt(){const t=Xn(Zt());return t.stack=t.stack||new wo(Vt("defaultCurrentScope",()=>new Re),Vt("defaultIsolationScope",()=>new Re))}function So(t){return nt().withScope(t)}function ko(t,e){const n=nt();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function ti(t){return nt().withScope(()=>t(nt().getIsolationScope()))}function er(t){const e=Xn(t);return e.acs?e.acs:{withIsolationScope:ti,withScope:So,withSetScope:ko,withSetIsolationScope:(n,r)=>ti(r),getCurrentScope:()=>nt().getScope(),getIsolationScope:()=>nt().getIsolationScope()}}function tr(){return er(Zt()).getCurrentScope()}function ba(){return er(Zt()).getIsolationScope()}function X(){return tr().getClient()}function Eo(t){const e=t._sentryMetrics;if(!e)return;const n={};for(const[,[r,a]]of e)(n[r]||(n[r]=[])).push(oe(a));return n}function To(t){const{spanId:e,traceId:n}=t.spanContext(),{parent_span_id:r}=Yt(t);return oe({parent_span_id:r,span_id:e,trace_id:n})}function ni(t){return typeof t=="number"?ri(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?ri(t.getTime()):De()}function ri(t){return t>9999999999?t/1e3:t}function Yt(t){if(function(e){return typeof e.getSpanJSON=="function"}(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(function(r){const a=r;return!!(a.attributes&&a.startTime&&a.name&&a.endTime&&a.status)}(t)){const{attributes:r,startTime:a,name:s,endTime:o,parentSpanId:u,status:d}=t;return oe({span_id:e,trace_id:n,data:r,description:s,parent_span_id:u,start_timestamp:ni(a),timestamp:ni(o)||void 0,status:Co(d),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:Eo(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function Co(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function wa(t){return t._sentryRootSpan||t}const Sa="production";function ka(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},a=oe({environment:n.environment||Sa,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",a),a}function Mo(t){const e=X();if(!e)return{};const n=ka(Yt(t).trace_id||"",e),r=wa(t),a=r._frozenDsc;if(a)return a;const s=r.spanContext().traceState,o=s&&s.get("sentry.dsc"),u=o&&go(o);if(u)return u;const d=Yt(r),p=d.data||{},g=p["sentry.sample_rate"];g!=null&&(n.sample_rate=`${g}`);const m=p["sentry.source"],w=d.description;return m!=="url"&&w&&(n.transaction=w),function(S){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const _=X(),k=_&&_.getOptions();return!!k&&(k.enableTracing||"tracesSampleRate"in k||"tracesSampler"in k)}()&&(n.sampled=String(function(S){const{traceFlags:_}=S.spanContext();return _===1}(r))),e.emit("createDsc",n,r),n}function Ao(t,e,n,r){const a=_a(n),s=t.type&&t.type!=="replay_event"?t.type:"event";(function(u,d){d&&(u.sdk=u.sdk||{},u.sdk.name=u.sdk.name||d.name,u.sdk.version=u.sdk.version||d.version,u.sdk.integrations=[...u.sdk.integrations||[],...d.integrations||[]],u.sdk.packages=[...u.sdk.packages||[],...d.packages||[]])})(t,n&&n.sdk);const o=function(u,d,p,g){const m=u.sdkProcessingMetadata&&u.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:u.event_id,sent_at:new Date().toISOString(),...d&&{sdk:d},...!!p&&g&&{dsn:Ut(g)},...m&&{trace:oe({...m})}}}(t,a,r,e);return delete t.sdkProcessingMetadata,mt(o,[[{type:s},t]])}function An(t,e,n,r=0){return new ne((a,s)=>{const o=t[r];if(e===null||typeof o!="function")a(e);else{const u=o({...e},n);J&&o.id&&u===null&&P.log(`Event processor "${o.id}" dropped event`),Xt(u)?u.then(d=>An(t,d,n,r+1).then(a)).then(null,s):An(t,u,n,r+1).then(a).then(null,s)}})}function Oo(t,e){const{fingerprint:n,span:r,breadcrumbs:a,sdkProcessingMetadata:s}=e;(function(o,u){const{extra:d,tags:p,user:g,contexts:m,level:w,transactionName:S}=u,_=oe(d);_&&Object.keys(_).length&&(o.extra={..._,...o.extra});const k=oe(p);k&&Object.keys(k).length&&(o.tags={...k,...o.tags});const C=oe(g);C&&Object.keys(C).length&&(o.user={...C,...o.user});const O=oe(m);O&&Object.keys(O).length&&(o.contexts={...O,...o.contexts}),w&&(o.level=w),S&&o.type!=="transaction"&&(o.transaction=S)})(t,e),r&&function(o,u){o.contexts={trace:To(u),...o.contexts},o.sdkProcessingMetadata={dynamicSamplingContext:Mo(u),...o.sdkProcessingMetadata};const d=wa(u),p=Yt(d).description;p&&!o.transaction&&o.type==="transaction"&&(o.transaction=p)}(t,r),function(o,u){o.fingerprint=o.fingerprint?function(d){return Array.isArray(d)?d:[d]}(o.fingerprint):[],u&&(o.fingerprint=o.fingerprint.concat(u)),o.fingerprint&&!o.fingerprint.length&&delete o.fingerprint}(t,n),function(o,u){const d=[...o.breadcrumbs||[],...u];o.breadcrumbs=d.length?d:void 0}(t,a),function(o,u){o.sdkProcessingMetadata={...o.sdkProcessingMetadata,...u}}(t,s)}function ii(t,e){const{extra:n,tags:r,user:a,contexts:s,level:o,sdkProcessingMetadata:u,breadcrumbs:d,fingerprint:p,eventProcessors:g,attachments:m,propagationContext:w,transactionName:S,span:_}=e;ct(t,"extra",n),ct(t,"tags",r),ct(t,"user",a),ct(t,"contexts",s),ct(t,"sdkProcessingMetadata",u),o&&(t.level=o),S&&(t.transactionName=S),_&&(t.span=_),d.length&&(t.breadcrumbs=[...t.breadcrumbs,...d]),p.length&&(t.fingerprint=[...t.fingerprint,...p]),g.length&&(t.eventProcessors=[...t.eventProcessors,...g]),m.length&&(t.attachments=[...t.attachments,...m]),t.propagationContext={...t.propagationContext,...w}}function ct(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function Po(t,e,n,r,a,s){const{normalizeDepth:o=3,normalizeMaxBreadth:u=1e3}=t,d={...e,event_id:e.event_id||n.event_id||le(),timestamp:e.timestamp||yt()},p=n.integrations||t.integrations.map(_=>_.name);(function(_,k){const{environment:C,release:O,dist:L,maxValueLength:R=250}=k;"environment"in _||(_.environment="environment"in k?C:Sa),_.release===void 0&&O!==void 0&&(_.release=O),_.dist===void 0&&L!==void 0&&(_.dist=L),_.message&&(_.message=Ze(_.message,R));const q=_.exception&&_.exception.values&&_.exception.values[0];q&&q.value&&(q.value=Ze(q.value,R));const Y=_.request;Y&&Y.url&&(Y.url=Ze(Y.url,R))})(d,t),function(_,k){k.length>0&&(_.sdk=_.sdk||{},_.sdk.integrations=[..._.sdk.integrations||[],...k])}(d,p),a&&a.emit("applyFrameMetadata",e),e.type===void 0&&function(_,k){const C=j._sentryDebugIds;if(!C)return;let O;const L=ai.get(k);L?O=L:(O=new Map,ai.set(k,O));const R=Object.entries(C).reduce((q,[Y,ie])=>{let te;const fe=O.get(Y);fe?te=fe:(te=k(Y),O.set(Y,te));for(let je=te.length-1;je>=0;je--){const at=te[je];if(at.filename){q[at.filename]=ie;break}}return q},{});try{_.exception.values.forEach(q=>{q.stacktrace.frames.forEach(Y=>{Y.filename&&(Y.debug_id=R[Y.filename])})})}catch{}}(d,t.stackParser);const g=function(_,k){if(!k)return _;const C=_?_.clone():new Re;return C.update(k),C}(r,n.captureContext);n.mechanism&&gt(d,n.mechanism);const m=a?a.getEventProcessors():[],w=Vt("globalScope",()=>new Re).getScopeData();s&&ii(w,s.getScopeData()),g&&ii(w,g.getScopeData());const S=[...n.attachments||[],...w.attachments];return S.length&&(n.attachments=S),Oo(d,w),An([...m,...w.eventProcessors],d,n).then(_=>(_&&function(k){const C={};try{k.exception.values.forEach(L=>{L.stacktrace.frames.forEach(R=>{R.debug_id&&(R.abs_path?C[R.abs_path]=R.debug_id:R.filename&&(C[R.filename]=R.debug_id),delete R.debug_id)})})}catch{}if(Object.keys(C).length===0)return;k.debug_meta=k.debug_meta||{},k.debug_meta.images=k.debug_meta.images||[];const O=k.debug_meta.images;Object.entries(C).forEach(([L,R])=>{O.push({type:"sourcemap",code_file:L,debug_id:R})})}(_),typeof o=="number"&&o>0?function(k,C,O){if(!k)return null;const L={...k,...k.breadcrumbs&&{breadcrumbs:k.breadcrumbs.map(R=>({...R,...R.data&&{data:Ie(R.data,C,O)}}))},...k.user&&{user:Ie(k.user,C,O)},...k.contexts&&{contexts:Ie(k.contexts,C,O)},...k.extra&&{extra:Ie(k.extra,C,O)}};return k.contexts&&k.contexts.trace&&L.contexts&&(L.contexts.trace=k.contexts.trace,k.contexts.trace.data&&(L.contexts.trace.data=Ie(k.contexts.trace.data,C,O))),k.spans&&(L.spans=k.spans.map(R=>({...R,...R.data&&{data:Ie(R.data,C,O)}}))),L}(_,o,u):_))}const ai=new WeakMap;function si(t,e){return tr().captureEvent(t,e)}function Io(t,e){return n={sentry_key:t.publicKey,sentry_version:"7",...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&");var n}const oi=[];function ci(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function li(t,e,n){if(n[e.name])J&&P.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,oi.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),oi.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(a,s)=>r(a,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),a=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(a)}J&&P.log(`Integration installed: ${e.name}`)}}const ui="Not capturing exception because it's already been captured.";class Lo{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=io(e.dsn):J&&P.warn("No DSN provided, client will not send events."),this._dsn){const s=(n=this._dsn,r=e.tunnel,a=e._metadata?e._metadata.sdk:void 0,r||`${function(o){return`${function(u){const d=u.protocol?`${u.protocol}:`:"",p=u.port?`:${u.port}`:"";return`${d}//${u.host}${p}${u.path?`/${u.path}`:""}/api/`}(o)}${o.projectId}/envelope/`}(n)}?${Io(n,a)}`);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:s})}var n,r,a}captureException(e,n,r){const a=le();if(zr(e))return J&&P.log(ui),a;const s={event_id:a,...n};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,n,r,a){const s={event_id:le(),...r},o=zn(e)?e:String(e),u=vn(e)?this.eventFromMessage(o,n,s):this.eventFromException(e,s);return this._process(u.then(d=>this._captureEvent(d,s,a))),s.event_id}captureEvent(e,n,r){const a=le();if(n&&n.originalException&&zr(n.originalException))return J&&P.log(ui),a;const s={event_id:a,...n},o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,o||r)),s.event_id}captureSession(e){typeof e.release!="string"?J&&P.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Cn(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(a=>r&&a))):ze(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];li(this,e,this._integrations),n||ci(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Ao(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=mo(r,yo(s));const a=this.sendEnvelope(r);a&&a.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=function(r,a,s,o){const u=_a(s);return mt({sent_at:new Date().toISOString(),...u&&{sdk:u},...!!o&&a&&{dsn:Ut(a)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const a=typeof r=="number"?r:1,s=`${e}:${n}`;J&&P.log(`Recording outcome: "${s}"${a>1?` (${a} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+a}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const a=r.indexOf(n);a>-1&&r.splice(a,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(a=>a(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(J&&P.error("Error while sending event:",n),n)):(J&&P.error("Transport disabled"),ze({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(n,r){const a={};return r.forEach(s=>{s&&li(n,s,a)}),a}(this,e),ci(this,e)}_updateSessionFromEvent(e,n){let r=!1,a=!1;const s=n.exception&&n.exception.values;if(s){a=!0;for(const u of s){const d=u.mechanism;if(d&&d.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(Cn(e,{...r&&{status:"crashed"},errors:e.errors||Number(a||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ne(n=>{let r=0;const a=setInterval(()=>{this._numProcessing==0?(clearInterval(a),n(!0)):(r+=1,e&&r>=e&&(clearInterval(a),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,a=ba()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||a.setLastEventId(e.event_id||n.event_id),Po(s,e,n,r,this,a).then(u=>{if(u===null)return u;const d={...a.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(u.contexts&&u.contexts.trace)&&d){const{traceId:p,spanId:g,parentSpanId:m,dsc:w}=d;u.contexts={trace:oe({trace_id:p,span_id:g,parent_span_id:m}),...u.contexts};const S=w||ka(p,this);u.sdkProcessingMetadata={dynamicSamplingContext:S,...u.sdkProcessingMetadata}}return u})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(a=>a.event_id,a=>{if(J){const s=a;s.logLevel==="log"?P.log(s.message):P.warn(s)}})}_processEvent(e,n,r){const a=this.getOptions(),{sampleRate:s}=a,o=pi(e),u=di(e),d=e.type||"error",p=`before send for type \`${d}\``,g=s===void 0?void 0:function(S){if(typeof S=="boolean")return Number(S);const _=typeof S=="string"?parseFloat(S):S;if(!(typeof _!="number"||isNaN(_)||_<0||_>1))return _;J&&P.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(S)} of type ${JSON.stringify(typeof S)}.`)}(s);if(u&&typeof g=="number"&&Math.random()>g)return this.recordDroppedEvent("sample_rate","error",e),Jt(new me(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const m=d==="replay_event"?"replay":d,w=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,w).then(S=>{if(S===null)throw this.recordDroppedEvent("event_processor",m,e),new me("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return S;const _=function(k,C,O,L){const{beforeSend:R,beforeSendTransaction:q,beforeSendSpan:Y}=C;if(di(O)&&R)return R(O,L);if(pi(O)){if(O.spans&&Y){const ie=[];for(const te of O.spans){const fe=Y(te);fe?ie.push(fe):k.recordDroppedEvent("before_send","span")}O.spans=ie}if(q){if(O.spans){const ie=O.spans.length;O.sdkProcessingMetadata={...O.sdkProcessingMetadata,spanCountBeforeProcessing:ie}}return q(O,L)}}return O}(this,a,S,n);return function(k,C){const O=`${C} must return \`null\` or a valid event.`;if(Xt(k))return k.then(L=>{if(!tt(L)&&L!==null)throw new me(O);return L},L=>{throw new me(`${C} rejected with ${L}`)});if(!tt(k)&&k!==null)throw new me(O);return k}(_,p)}).then(S=>{if(S===null){if(this.recordDroppedEvent("before_send",m,e),o){const C=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",C)}throw new me(`${p} returned \`null\`, will not send event.`,"log")}const _=r&&r.getSession();if(!o&&_&&this._updateSessionFromEvent(_,S),o){const C=(S.sdkProcessingMetadata&&S.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(S.spans?S.spans.length:0);C>0&&this.recordDroppedEvent("before_send","span",C)}const k=S.transaction_info;if(o&&k&&S.transaction!==e.transaction){const C="custom";S.transaction_info={...k,source:C}}return this.sendEvent(S,n),S}).then(null,S=>{throw S instanceof me?S:(this.captureException(S,{data:{__sentry__:!0},originalException:S}),new me(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${S}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[a,s]=n.split(":");return{reason:a,category:s,quantity:r}})}_flushOutcomes(){J&&P.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(J&&P.log("No outcomes to send"));if(!this._dsn)return void(J&&P.log("No dsn provided, will not send outcomes"));J&&P.log("Sending outcomes:",e);const n=(r=e,mt((a=this._options.tunnel&&Ut(this._dsn))?{dsn:a}:{},[[{type:"client_report"},{timestamp:s||yt(),discarded_events:r}]]));var r,a,s;this.sendEnvelope(n)}}function di(t){return t.type===void 0}function pi(t){return t.type==="transaction"}function Do(t,e,n=uo(t.bufferSize||64)){let r={};return{send:function(a){const s=[];if(Qr(a,(d,p)=>{const g=Kr(p);if(function(m,w,S=Date.now()){return function(_,k){return _[k]||_.all||0}(m,w)>S}(r,g)){const m=fi(d,p);t.recordDroppedEvent("ratelimit_backoff",g,m)}else s.push(d)}),s.length===0)return ze({});const o=mt(a[0],s),u=d=>{Qr(o,(p,g)=>{const m=fi(p,g);t.recordDroppedEvent(d,Kr(g),m)})};return n.add(()=>e({body:vo(o)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&J&&P.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=bo(r,d),d),d=>{throw u("network_error"),d})).then(d=>d,d=>{if(d instanceof me)return J&&P.error("Skipped sending event because buffer is full."),u("queue_overflow"),ze({});throw d})},flush:a=>n.drain(a)}}function fi(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const No=100;function Ve(t,e){const n=X(),r=ba();if(!n)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:s=No}=n.getOptions();if(s<=0)return;const o={timestamp:yt(),...t},u=a?Qn(()=>a(o,e)):o;u!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),r.addBreadcrumb(u,s))}let hi;const gi=new WeakMap,Ro=()=>({name:"FunctionToString",setupOnce(){hi=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Kn(this),n=gi.has(X())&&e!==void 0?e:this;return hi.apply(n,t)}}catch{}},setup(t){gi.set(t,!0)}}),jo=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],xo=(t={})=>({name:"InboundFilters",processEvent(e,n,r){const a=r.getOptions(),s=function(o={},u={}){return{allowUrls:[...o.allowUrls||[],...u.allowUrls||[]],denyUrls:[...o.denyUrls||[],...u.denyUrls||[]],ignoreErrors:[...o.ignoreErrors||[],...u.ignoreErrors||[],...o.disableErrorDefaults?[]:jo],ignoreTransactions:[...o.ignoreTransactions||[],...u.ignoreTransactions||[]],ignoreInternal:o.ignoreInternal===void 0||o.ignoreInternal}}(t,a);return function(o,u){return u.ignoreInternal&&function(d){try{return d.exception.values[0].type==="SentryError"}catch{}return!1}(o)?(J&&P.warn(`Event dropped due to being internal Sentry Error.
Event: ${Pe(o)}`),!0):function(d,p){return d.type||!p||!p.length?!1:function(g){const m=[];g.message&&m.push(g.message);let w;try{w=g.exception.values[g.exception.values.length-1]}catch{}return w&&w.value&&(m.push(w.value),w.type&&m.push(`${w.type}: ${w.value}`)),m}(d).some(g=>bt(g,p))}(o,u.ignoreErrors)?(J&&P.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Pe(o)}`),!0):function(d){return d.type||!d.exception||!d.exception.values||d.exception.values.length===0?!1:!d.message&&!d.exception.values.some(p=>p.stacktrace||p.type&&p.type!=="Error"||p.value)}(o)?(J&&P.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Pe(o)}`),!0):function(d,p){if(d.type!=="transaction"||!p||!p.length)return!1;const g=d.transaction;return!!g&&bt(g,p)}(o,u.ignoreTransactions)?(J&&P.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Pe(o)}`),!0):function(d,p){if(!p||!p.length)return!1;const g=Tt(d);return!!g&&bt(g,p)}(o,u.denyUrls)?(J&&P.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Pe(o)}.
Url: ${Tt(o)}`),!0):function(d,p){if(!p||!p.length)return!0;const g=Tt(d);return!g||bt(g,p)}(o,u.allowUrls)?!1:(J&&P.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Pe(o)}.
Url: ${Tt(o)}`),!0)}(e,s)?null:e}});function Tt(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const a=n[r];if(a&&a.filename!=="<anonymous>"&&a.filename!=="[native code]")return a.filename||null}return null}(e):null}catch{return J&&P.error(`Cannot extract url for event ${Pe(t)}`),null}}const Fo=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(n,r){return r?!!(function(a,s){const o=a.message,u=s.message;return!(!o&&!u||o&&!u||!o&&u||o!==u||!vi(a,s)||!mi(a,s))}(n,r)||function(a,s){const o=yi(s),u=yi(a);return!(!o||!u||o.type!==u.type||o.value!==u.value||!vi(a,s)||!mi(a,s))}(n,r)):!1}(e,t))return J&&P.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function mi(t,e){let n=qr(t),r=qr(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let a=0;a<r.length;a++){const s=r[a],o=n[a];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function vi(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function yi(t){return t.exception&&t.exception.values&&t.exception.values[0]}const G=j;let On=0;function _i(){return On>0}function rt(t,e={},n){if(typeof t!="function")return t;try{const a=t.__sentry_wrapped__;if(a)return typeof a=="function"?a:t;if(Kn(t))return t}catch{return t}const r=function(){const a=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=a.map(o=>rt(o,e));return t.apply(this,s)}catch(s){throw On++,setTimeout(()=>{On--}),function(...o){const u=er(Zt());if(o.length===2){const[d,p]=o;return d?u.withSetScope(d,p):u.withScope(p)}u.withScope(o[0])}(o=>{var u;o.addEventProcessor(d=>(e.mechanism&&(kn(d,void 0),gt(d,e.mechanism)),d.extra={...d.extra,arguments:a},d)),u=s,tr().captureException(u,void 0)}),s}};try{for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}catch{}ga(r,t),Ge(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}const nr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function rr(t,e){const n=ir(t,e),r={type:e&&e.name,value:Uo(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Vo(t,e,n,r){const a=X(),s=a&&a.getOptions().normalizeDepth,o=function(p){for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g)){const m=p[g];if(m instanceof Error)return m}}(e),u={__serialized__:ya(e,s)};if(o)return{exception:{values:[rr(t,o)]},extra:u};const d={exception:{values:[{type:Kt(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Jo(e,{isUnhandledRejection:r})}]},extra:u};if(n){const p=ir(t,n);p.length&&(d.exception.values[0].stacktrace={frames:p})}return d}function rn(t,e){return{exception:{values:[rr(t,e)]}}}function ir(t,e){const n=e.stacktrace||e.stack||"",r=function(s){return s&&Bo.test(s.message)?1:0}(e),a=function(s){return typeof s.framesToPop=="number"?s.framesToPop:0}(e);try{return t(n,r,a)}catch{}return[]}const Bo=/Minified React error #\d+;/i;function Uo(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Pn(t,e,n,r,a){let s;if(pa(e)&&e.error)return rn(t,e.error);if(Nr(e)||it(e,"DOMException")){const o=e;if("stack"in e)s=rn(t,e);else{const u=o.name||(Nr(o)?"DOMError":"DOMException"),d=o.message?`${u}: ${o.message}`:u;s=In(t,d,n,r),kn(s,d)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Gn(e)?rn(t,e):tt(e)||Kt(e)?(s=Vo(t,e,n,a),gt(s,{synthetic:!0}),s):(s=In(t,e,n,r),kn(s,`${e}`),gt(s,{synthetic:!0}),s)}function In(t,e,n,r){const a={};if(r&&n){const s=ir(t,n);s.length&&(a.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(zn(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return a.logentry={message:s,params:o},a}return a.message=e,a}function Jo(t,{isUnhandledRejection:e}){const n=function(a,s=40){const o=Object.keys(ma(a));o.sort();const u=o[0];if(!u)return"[object has no keys]";if(u.length>=s)return Ze(u,s);for(let d=o.length;d>0;d--){const p=o.slice(0,d).join(", ");if(!(p.length>s))return d===o.length?p:Ze(p,s)}return""}(t),r=e?"promise rejection":"exception";return pa(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Kt(t)?`Event \`${function(a){try{const s=Object.getPrototypeOf(a);return s?s.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class Yo extends Lo{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e};(function(r,a,s=[a],o="npm"){const u=r._metadata||{};u.sdk||(u.sdk={name:`sentry.javascript.${a}`,packages:s.map(d=>({name:`${o}:@sentry/${d}`,version:qe})),version:qe}),r._metadata=u})(n,"browser",["browser"],G.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&G.document&&G.document.addEventListener("visibilitychange",()=>{G.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,a,s,o){const u=Pn(r,a,s&&s.syntheticException||void 0,o);return gt(u),u.level="error",s&&s.event_id&&(u.event_id=s.event_id),ze(u)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(a,s,o="info",u,d){const p=In(a,s,u&&u.syntheticException||void 0,d);return p.level=o,u&&u.event_id&&(p.event_id=u.event_id),ze(p)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(nr&&P.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:a,tunnel:s,dsn:o}){const u={event_id:r.event_id,sent_at:new Date().toISOString(),...a&&a.sdk&&{sdk:{name:a.sdk.name,version:a.sdk.version}},...!!s&&!!o&&{dsn:Ut(o)}};return mt(u,[function(p){return[{type:"user_report"},p]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const $o=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,H=j;let bi,an,sn,Ct;function qo(){if(!H.document)return;const t=ce.bind(null,"dom"),e=wi(t,!0);H.document.addEventListener("click",e,!1),H.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=H[n]&&H[n].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(ee(r,"addEventListener",function(a){return function(s,o,u){if(s==="click"||s=="keypress")try{const d=this,p=d.__sentry_instrumentation_handlers__=d.__sentry_instrumentation_handlers__||{},g=p[s]=p[s]||{refCount:0};if(!g.handler){const m=wi(t);g.handler=m,a.call(this,s,m,u)}g.refCount++}catch{}return a.call(this,s,o,u)}}),ee(r,"removeEventListener",function(a){return function(s,o,u){if(s==="click"||s=="keypress")try{const d=this,p=d.__sentry_instrumentation_handlers__||{},g=p[s];g&&(g.refCount--,g.refCount<=0&&(a.call(this,s,g.handler,u),g.handler=void 0,delete p[s]),Object.keys(p).length===0&&delete d.__sentry_instrumentation_handlers__)}catch{}return a.call(this,s,o,u)}}))})}function wi(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(s){try{return s.target}catch{return null}}(n);if(function(s,o){return s==="keypress"&&(!o||!o.tagName||o.tagName!=="INPUT"&&o.tagName!=="TEXTAREA"&&!o.isContentEditable)}(n.type,r))return;Ge(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ge(r,"_sentryId",le());const a=n.type==="keypress"?"input":n.type;(function(s){if(s.type!==an)return!1;try{if(!s.target||s.target._sentryId!==sn)return!1}catch{}return!0})(n)||(t({event:n,name:a,global:e}),an=n.type,sn=r?r._sentryId:void 0),clearTimeout(bi),bi=H.setTimeout(()=>{sn=void 0,an=void 0},1e3)}}function Wo(){if(!function(){const n=Et.chrome,r=n&&n.app&&n.app.runtime,a="history"in Et&&!!Et.history.pushState&&!!Et.history.replaceState;return!r&&a}())return;const t=H.onpopstate;function e(n){return function(...r){const a=r.length>2?r[2]:void 0;if(a){const s=Ct,o=String(a);Ct=o,ce("history",{from:s,to:o})}return n.apply(this,r)}}H.onpopstate=function(...n){const r=H.location.href,a=Ct;if(Ct=r,ce("history",{from:a,to:r}),t)try{return t.apply(this,n)}catch{}},ee(H.history,"pushState",e),ee(H.history,"replaceState",e)}const Dt={};function Si(t){Dt[t]=void 0}const ut="__sentry_xhr_v3__";function Go(){if(!H.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const a=1e3*De(),s=Te(r[0])?r[0].toUpperCase():void 0,o=function(d){if(Te(d))return d;try{return d.toString()}catch{}}(r[1]);if(!s||!o)return e.apply(n,r);n[ut]={method:s,url:o,request_headers:{}},s==="POST"&&o.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const u=()=>{const d=n[ut];if(d&&n.readyState===4){try{d.status_code=n.status}catch{}ce("xhr",{endTimestamp:1e3*De(),startTimestamp:a,xhr:n})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(d,p,g)=>(u(),d.apply(p,g))}):n.addEventListener("readystatechange",u),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(d,p,g){const[m,w]=g,S=p[ut];return S&&Te(m)&&Te(w)&&(S.request_headers[m.toLowerCase()]=w),d.apply(p,g)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const a=n[ut];return a?(r[0]!==void 0&&(a.body=r[0]),ce("xhr",{startTimestamp:1e3*De(),xhr:n}),e.apply(n,r)):e.apply(n,r)}})}function zo(t,e=function(n){const r=Dt[n];if(r)return r;let a=H[n];if(wn(a))return Dt[n]=a.bind(H);const s=H.document;if(s&&typeof s.createElement=="function")try{const o=s.createElement("iframe");o.hidden=!0,s.head.appendChild(o);const u=o.contentWindow;u&&u[n]&&(a=u[n]),s.head.removeChild(o)}catch(o){$o&&P.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,o)}return a&&(Dt[n]=a.bind(H))}("fetch")){let n=0,r=0;return Do(t,function(a){const s=a.body.length;n+=s,r++;const o={body:a.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return Si("fetch"),Jt("No fetch implementation available");try{return e(t.url,o).then(u=>(n-=s,r--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return Si("fetch"),n-=s,r--,Jt(u)}})}function on(t,e,n,r){const a={filename:t,function:e==="<anonymous>"?Je:e,in_app:!0};return n!==void 0&&(a.lineno=n),r!==void 0&&(a.colno=r),a}const Ho=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Qo=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ko=/\((\S*)(?::(\d+))(?::(\d+))\)/,Xo=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Zo=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ec=function(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,a=0)=>{const s=[],o=n.split(`
`);for(let u=r;u<o.length;u++){const d=o[u];if(d.length>1024)continue;const p=Jr.test(d)?d.replace(Jr,"$1"):d;if(!p.match(/\S*Error: /)){for(const g of e){const m=g(p);if(m){s.push(m);break}}if(s.length>=50+a)break}}return function(u){if(!u.length)return[];const d=Array.from(u);return/sentryWrapped/.test(wt(d).function||"")&&d.pop(),d.reverse(),Yr.test(wt(d).function||"")&&(d.pop(),Yr.test(wt(d).function||"")&&d.pop()),d.slice(0,50).map(p=>({...p,filename:p.filename||wt(d).filename,function:p.function||Je}))}(s.slice(a))}}([30,t=>{const e=Ho.exec(t);if(e){const[,r,a,s]=e;return on(r,Je,+a,+s)}const n=Qo.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=Ko.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[r,a]=ki(n[1]||Je,n[2]);return on(a,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,t=>{const e=Xo.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const a=Zo.exec(e[3]);a&&(e[1]=e[1]||"eval",e[3]=a[1],e[4]=a[2],e[5]="")}let n=e[3],r=e[1]||Je;return[r,n]=ki(r,n),on(n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),ki=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Je,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Ei=1024,tc=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){var r;e.console&&function(a){const s="console";Ye(s,a),$e(s,ao)}(function(a){return function(s){if(X()!==a)return;const o={category:"console",data:{arguments:s.args,logger:"console"},level:fo(s.level),message:Rr(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;o.message=`Assertion failed: ${Rr(s.args.slice(1)," ")||"console.assert"}`,o.data.arguments=s.args.slice(1)}Ve(o,{input:s.args,level:s.level})}}(n)),e.dom&&(r=function(a,s){return function(o){if(X()!==a)return;let u,d,p=typeof s=="object"?s.serializeAttribute:void 0,g=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;g&&g>Ei&&(nr&&P.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${g} was configured. Sentry will use 1024 instead.`),g=Ei),typeof p=="string"&&(p=[p]);try{const w=o.event,S=function(_){return!!_&&!!_.target}(w)?w.target:w;u=ha(S,{keyAttrs:p,maxStringLength:g}),d=function(_){if(!Hn.HTMLElement)return null;let k=_;for(let C=0;C<5;C++){if(!k)return null;if(k instanceof HTMLElement){if(k.dataset.sentryComponent)return k.dataset.sentryComponent;if(k.dataset.sentryElement)return k.dataset.sentryElement}k=k.parentNode}return null}(S)}catch{u="<unknown>"}if(u.length===0)return;const m={category:`ui.${o.name}`,message:u};d&&(m.data={"ui.component_name":d}),Ve(m,{event:o.event,name:o.name,global:o.global})}}(n,e.dom),Ye("dom",r),$e("dom",qo)),e.xhr&&function(a){Ye("xhr",a),$e("xhr",Go)}(function(a){return function(s){if(X()!==a)return;const{startTimestamp:o,endTimestamp:u}=s,d=s.xhr[ut];if(!o||!u||!d)return;const{method:p,url:g,status_code:m,body:w}=d,S={method:p,url:g,status_code:m},_={xhr:s.xhr,input:w,startTimestamp:o,endTimestamp:u};Ve({category:"xhr",data:S,type:"http",level:Fr(m)},_)}}(n)),e.fetch&&oo(function(a){return function(s){if(X()!==a)return;const{startTimestamp:o,endTimestamp:u}=s;if(u&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.error)Ve({category:"fetch",data:s.fetchData,level:"error",type:"http"},{data:s.error,input:s.args,startTimestamp:o,endTimestamp:u});else{const d=s.response,p={...s.fetchData,status_code:d&&d.status},g={input:s.args,response:d,startTimestamp:o,endTimestamp:u};Ve({category:"fetch",data:p,type:"http",level:Fr(p.status_code)},g)}}}(n)),e.history&&function(a){const s="history";Ye(s,a),$e(s,Wo)}(function(a){return function(s){if(X()!==a)return;let o=s.from,u=s.to;const d=nn(G.location.href);let p=o?nn(o):void 0;const g=nn(u);p&&p.path||(p=d),d.protocol===g.protocol&&d.host===g.host&&(u=g.relative),d.protocol===p.protocol&&d.host===p.host&&(o=p.relative),Ve({category:"navigation",data:{from:o,to:u}})}}(n)),e.sentry&&n.on("beforeSendEvent",function(a){return function(s){X()===a&&Ve({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:Pe(s)},{event:s})}}(n))}}},nc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],rc=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&ee(G,"setTimeout",Ti),e.setInterval&&ee(G,"setInterval",Ti),e.requestAnimationFrame&&ee(G,"requestAnimationFrame",ic),e.XMLHttpRequest&&"XMLHttpRequest"in G&&ee(XMLHttpRequest.prototype,"send",ac);const n=e.eventTarget;n&&(Array.isArray(n)?n:nc).forEach(sc)}}};function Ti(t){return function(...e){const n=e[0];return e[0]=rt(n,{mechanism:{data:{function:Ne(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function ic(t){return function(e){return t.apply(this,[rt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ne(t)},handled:!1,type:"instrument"}})])}}function ac(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&ee(n,r,function(a){const s={mechanism:{data:{function:r,handler:Ne(a)},handled:!1,type:"instrument"}},o=Kn(a);return o&&(s.mechanism.data.handler=Ne(o)),rt(a,s)})}),t.apply(this,e)}}function sc(t){const e=G,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ee(n,"addEventListener",function(r){return function(a,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=rt(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ne(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[a,rt(s,{mechanism:{data:{function:"addEventListener",handler:Ne(s),target:t},handled:!1,type:"instrument"}}),o])}}),ee(n,"removeEventListener",function(r){return function(a,s,o){const u=s;try{const d=u&&u.__sentry_wrapped__;d&&r.call(this,a,d,o)}catch{}return r.call(this,a,u,o)}}))}const oc=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(function(r){(function(a){const s="error";Ye(s,a),$e(s,co)})(a=>{const{stackParser:s,attachStacktrace:o}=Mi();if(X()!==r||_i())return;const{msg:u,url:d,line:p,column:g,error:m}=a,w=function(S,_,k,C){const O=S.exception=S.exception||{},L=O.values=O.values||[],R=L[0]=L[0]||{},q=R.stacktrace=R.stacktrace||{},Y=q.frames=q.frames||[],ie=isNaN(parseInt(C,10))?void 0:C,te=isNaN(parseInt(k,10))?void 0:k,fe=Te(_)&&_.length>0?_:function(){try{return Hn.document.location.href}catch{return""}}();return Y.length===0&&Y.push({colno:ie,filename:fe,function:Je,in_app:!0,lineno:te}),S}(Pn(s,m||u,void 0,o,!1),d,p,g);w.level="error",si(w,{originalException:m,mechanism:{handled:!1,type:"onerror"}})})}(n),Ci("onerror")),e.onunhandledrejection&&(function(r){(function(a){const s="unhandledrejection";Ye(s,a),$e(s,lo)})(a=>{const{stackParser:s,attachStacktrace:o}=Mi();if(X()!==r||_i())return;const u=function(p){if(vn(p))return p;try{if("reason"in p)return p.reason;if("detail"in p&&"reason"in p.detail)return p.detail.reason}catch{}return p}(a),d=vn(u)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(u)}`}]}}:Pn(s,u,void 0,o,!0);d.level="error",si(d,{originalException:u,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(n),Ci("onunhandledrejection"))}}};function Ci(t){nr&&P.log(`Global Handler attached: ${t}`)}function Mi(){const t=X();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const cc=()=>({name:"HttpContext",preprocessEvent(t){if(!G.navigator&&!G.location&&!G.document)return;const e=t.request&&t.request.url||G.location&&G.location.href,{referrer:n}=G.document||{},{userAgent:r}=G.navigator||{},a={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:a};t.request=s}}),lc=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,a,s){const o=s.getOptions();to(rr,o.stackParser,o.maxValueLength,n,e,r,a)}}};var Ln="new",Ai="loading",Oi="loaded",$t="joining-meeting",Le="joined-meeting",Oe="left-meeting",we="error",uc="blocked",dc="off",pc="sendable",fc="loading",hc="interrupted",Ea="playable",Nt="unknown",Ta="full",gc="lobby",mc="none",Ca="base",vc="*",yc="ejected",_c="nbf-room",bc="nbf-token",wc="exp-room",Sc="exp-token",Dn="no-room",kc="meeting-full",Ma="end-of-life",Ec="not-allowed",Aa="connection-error",Tc="cam-in-use",Cc="mic-in-use",Mc="cam-mic-in-use",Ac="permissions",Oc="undefined-mediadevices",Pc="not-found",Ic="constraints",Lc="unknown",Oa="iframe-ready-for-launch-config",Pa="iframe-launch-config",Ia="theme-updated",La="loading",Da="load-attempt-failed",Nn="loaded",Na="started-camera",Ra="camera-error",ja="joining-meeting",xa="joined-meeting",Fa="left-meeting",Va="participant-joined",Ba="participant-updated",Ua="participant-left",Ja="participant-counts-updated",Ya="access-state-updated",$a="meeting-session-summary-updated",qa="meeting-session-state-updated",Dc="meeting-session-data-error",Wa="waiting-participant-added",Ga="waiting-participant-updated",za="waiting-participant-removed",Ha="track-started",Qa="track-stopped",Ka="transcription-started",Xa="transcription-stopped",Za="transcription-error",Rn="recording-started",jn="recording-stopped",es="recording-stats",ts="recording-error",ns="recording-upload-completed",rs="recording-data",is="app-message",as="transcription-message",ss="remote-media-player-started",os="remote-media-player-updated",cs="remote-media-player-stopped",ls="local-screen-share-started",us="local-screen-share-stopped",ds="local-screen-share-canceled",ps="active-speaker-change",fs="active-speaker-mode-change",hs="network-quality-change",gs="network-connection",ms="cpu-load-change",vs="face-counts-updated",dt="fullscreen",pt="exited-fullscreen",ys="live-streaming-started",_s="live-streaming-updated",bs="live-streaming-stopped",ws="live-streaming-error",Ss="lang-updated",ks="receive-settings-updated",xn="input-settings-updated",Fn="nonfatal-error",Vn="error",cn=4096,Pi=102400,ln="iframe-call-message",Ii="local-screen-start",Li="daily-method-update-live-streaming-endpoints",Mt="transmit-log",Ce="daily-custom-track",Rt={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},Es={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Bn={PLAY:"play",PAUSE:"pause"},un=["jpg","png","jpeg"],Nc="add-endpoints",Rc="remove-endpoints",Di="sip-call-transfer";function re(){return!N()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function N(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function Ts(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function jc(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(He(),qt())||N())}function Ni(){if(N()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var xc=function(){try{var t=document.createElement("canvas"),e=t.getContext("webgl2")!=null;return t.remove(),e}catch{return!1}}();function Cs(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!N()&&!!xc&&(t?function(){return ji()?!1:["Chrome","Firefox"].includes(He())}():function(){if(ji())return!1;var e=He();if(e==="Safari"){var n=sr();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?ar().major>=77:e==="Firefox"?or().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function Ms(){if(N()||As()||typeof AudioWorkletNode>"u")return!1;switch(He()){case"Chrome":case"Firefox":return!0;case"Safari":var t=qt();return t.major>17||t.major===17&&t.minor>=4}return!1}function Ri(){return Ts()&&!function(){var t,e=He();if(!re())return!0;switch(e){case"Chrome":return(t=ar()).major&&t.major>0&&t.major<75;case"Firefox":return(t=or()).major<91;case"Safari":return(t=sr()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function As(){return re().match(/Linux; Android/)}function ji(){var t,e,n=re(),r=n.match(/Mac/)&&(!N()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(e=t.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!re().match(/DailyAnd\//)||void 0}function He(){if(typeof window<"u"){var t=re();return Os()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||Ps()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function qt(){switch(He()){case"Chrome":return ar();case"Safari":return sr();case"Firefox":return or();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=re().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function ar(){var t=0,e=0,n=0,r=0,a=!1;if(typeof window<"u"){var s=re(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[3]),r=parseInt(o[4]),a=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:a}}function Os(){return!!re().match(/iPad|iPhone|iPod/i)&&Ts()}function Ps(){return re().indexOf("AppleWebKit/605.1.15")>-1}function sr(){var t=0,e=0,n=0;if(typeof window<"u"){var r=re().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else(Os()||Ps())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function or(){var t=0,e=0;if(typeof window<"u"){var n=re().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var Is=function(){function t(){de(this,t)}return pe(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){ot()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){ot()}},{key:"sendMessageToCallMachine",value:function(e,n,r,a){ot()}},{key:"sendMessageToDailyJs",value:function(e,n){ot()}},{key:"removeListener",value:function(e){ot()}}]),t}();function xi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xi(Object(n),!0).forEach(function(r){ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ue(t);if(e){var a=ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ht(this,n)}}var Vc=function(){zt(e,Is);var t=Fc(e);function e(){var n;return de(this,e),(n=t.call(this))._wrappedListeners={},n._messageCallbacks={},n}return pe(e,[{key:"addListenerForMessagesFromCallMachine",value:function(n,r,a){var s=this,o=function(u){if(u.data&&u.data.what==="iframe-call-message"&&(!u.data.callClientId||u.data.callClientId===r)&&(!u.data.from||u.data.from!=="module")){var d=dn({},u.data);if(delete d.from,d.callbackStamp&&s._messageCallbacks[d.callbackStamp]){var p=d.callbackStamp;s._messageCallbacks[p].call(a,d),delete s._messageCallbacks[p]}delete d.what,delete d.callbackStamp,n.call(a,d)}};this._wrappedListeners[n]=o,window.addEventListener("message",o)}},{key:"addListenerForMessagesFromDailyJs",value:function(n,r,a){var s=function(o){var u;if(!(!o.data||o.data.what!==ln||!o.data.action||o.data.from&&o.data.from!=="module"||o.data.callClientId&&r&&o.data.callClientId!==r||o!=null&&(u=o.data)!==null&&u!==void 0&&u.callFrameId)){var d=o.data;n.call(a,d)}};this._wrappedListeners[n]=s,window.addEventListener("message",s)}},{key:"sendMessageToCallMachine",value:function(n,r,a,s){if(!a)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var o=dn({},n);if(o.what=ln,o.from="module",o.callClientId=a,r){var u=Qt();this._messageCallbacks[u]=r,o.callbackStamp=u}var d=s?s.contentWindow:window,p=this._callMachineTargetOrigin(s);p&&d.postMessage(o,p)}},{key:"sendMessageToDailyJs",value:function(n,r){n.what=ln,n.callClientId=r,n.from="embedded",window.postMessage(n,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(n){var r=this._wrappedListeners[n];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[n])}},{key:"forwardPackagedMessageToCallMachine",value:function(n,r,a){var s=dn({},n);s.callClientId=a;var o=r?r.contentWindow:window,u=this._callMachineTargetOrigin(r);u&&o.postMessage(s,u)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(n,r){var a=function(s){if(s.data&&s.data.what==="iframe-call-message"&&(!s.data.callClientId||s.data.callClientId===r)&&(!s.data.from||s.data.from!=="module")){var o=s.data;n(o)}};return this._wrappedListeners[n]=a,window.addEventListener("message",a),n}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(n){var r=this._wrappedListeners[n];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[n])}},{key:"_callMachineTargetOrigin",value:function(n){return n?n.src?new URL(n.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),e}();function Fi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Bc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ue(t);if(e){var a=ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ht(this,n)}}var Uc=function(){zt(e,Is);var t=Bc(e);function e(){var n;return de(this,e),n=t.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Ee.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Ee.EventEmitter,n._wrappedListeners={},n._messageCallbacks={},n}return pe(e,[{key:"addListenerForMessagesFromCallMachine",value:function(n,r,a){this._addListener(n,global.callMachineToDailyJsEmitter,r,a,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(n,r,a){this._addListener(n,global.dailyJsToCallMachineEmitter,r,a,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(n,r,a){this._sendMessage(n,global.dailyJsToCallMachineEmitter,a,r,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(n,r){this._sendMessage(n,global.callMachineToDailyJsEmitter,r,null,"sending message to daily-js")}},{key:"removeListener",value:function(n){var r=this._wrappedListeners[n];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[n])}},{key:"_addListener",value:function(n,r,a,s,o){var u=this,d=function(p){if(p.callClientId===a){if(p.callbackStamp&&u._messageCallbacks[p.callbackStamp]){var g=p.callbackStamp;u._messageCallbacks[g].call(s,p),delete u._messageCallbacks[g]}n.call(s,p)}};this._wrappedListeners[n]=d,r.addListener("message",d)}},{key:"_sendMessage",value:function(n,r,a,s,o){var u=function(p){for(var g=1;g<arguments.length;g++){var m=arguments[g]!=null?arguments[g]:{};g%2?Fi(Object(m),!0).forEach(function(w){ke(p,w,m[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):Fi(Object(m)).forEach(function(w){Object.defineProperty(p,w,Object.getOwnPropertyDescriptor(m,w))})}return p}({},n);if(u.callClientId=a,s){var d=Qt();this._messageCallbacks[d]=s,u.callbackStamp=d}r.emit("message",u)}}]),e}(),Un="replace",Jn="shallow-merge",Vi=[Un,Jn],Jc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,a=r===void 0?Un:r;de(this,t),t._validateMergeStrategy(a),t._validateData(n,a),this.mergeStrategy=a,this.data=n}return pe(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===Jn}},{key:"_validateMergeStrategy",value:function(e){if(!Vi.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Vi,"]"))}},{key:"_validateData",value:function(e,n){if(!function(u){if(u==null||F(u)!=="object")return!1;var d=Object.getPrototypeOf(u);return d==null||d===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===Un){var a=JSON.parse(r);K(a,e)||console.warn("The meeting session data provided will be modified when serialized.",a,e)}else if(n===Jn){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var o=JSON.parse(JSON.stringify(e[s]));K(e[s],o)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",o,e[s])}}}catch(u){throw Error("Meeting session data must be serializable to JSON: ".concat(u))}if(r.length>Pi)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(Pi,"."))}}]),t}();function Yn(t,e,n){return Yn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,a,s){var o=[null];o.push.apply(o,a);var u=new(Function.bind.apply(r,o));return s&&ht(u,s.prototype),u},Yn.apply(null,arguments)}function $n(t){var e=typeof Map=="function"?new Map:void 0;return $n=function(n){if(n===null||(r=n,Function.toString.call(r).indexOf("[native code]")===-1))return n;var r;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,a)}function a(){return Yn(n,arguments,ue(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),ht(a,n)},$n(t)}function Yc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ue(t);if(e){var a=ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ht(this,n)}}function Bi(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var $c=function(){function t(e){de(this,t),this._currentLoad=null,this._callClientId=e}return pe(t,[{key:"load",value:function(){var e,n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void a(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new qc(r,function(){a(!1)},function(o,u){u||Bi(n._callClientId),s(o,u)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Bi(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),qc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;de(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r}return pe(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new Ui(this._dailyConfig,this._successCallback,function n(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new Ui(e._dailyConfig,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),pn=function(){zt(e,$n(Error));var t=Yc(e);function e(){return de(this,e),t.apply(this,arguments)}return pe(e)}(),Wt=2e4,Ui=function(){function t(n,r,a){de(this,t),this._loadAttemptImpl=N()||!n.avoidEval?new Wc(n,r,a):new Gc(n,r,a)}var e;return pe(t,[{key:"start",value:(e=A(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),t}(),Wc=function(){function t(s,o,u){de(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=o,this._failureCallback=u}var e,n,r,a;return pe(t,[{key:"start",value:(a=A(function*(){var s=xt(this._dailyConfig);!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return a.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=A(function*(s){if(!this._iosCache)return!1;try{var o=yield this._iosCache.get(s);return!!this.cancelled||!!o&&(o.code?(Function('"use strict";'+o.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=o.refetchHeaders,!1))}catch{return!1}}),function(s){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=A(function*(s){var o=this;this._networkTimeout=setTimeout(function(){o._networkTimedOut=!0,o._failureCallback({msg:"Timed out (>".concat(Wt," ms) when loading call object bundle ").concat(s),type:"timeout"})},Wt);try{var u=this._refetchHeaders?{headers:this._refetchHeaders}:{},d=yield fetch(s,u);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new pn;var p=yield this._getBundleCodeFromResponse(s,d);if(this.cancelled)throw new pn;Function('"use strict";'+p)(),this._iosCache&&this._iosCache.set(s,p,d.headers),this.succeeded=!0,this._successCallback()}catch(g){if(clearTimeout(this._networkTimeout),g instanceof pn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(s,": ").concat(g),type:g.message})}}),function(s){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=A(function*(s,o){if(o.ok)return yield o.text();if(this._iosCache&&o.status===304)return(yield this._iosCache.renew(s,o.headers)).code;throw new Error("Received ".concat(o.status," response"))}),function(s,o){return e.apply(this,arguments)})}]),t}(),Gc=function(){function t(e,n,r){de(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=Qt(),this._networkTimeout=null,this._scriptElement=null}return pe(t,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=xt(this._dailyConfig);(typeof document>"u"?"undefined":F(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var n=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){n._stopLoading(),n._failureCallback({msg:"Timed out (>".concat(Wt," ms) when loading call object bundle ").concat(e),type:"timeout"})},Wt);var r=document.getElementsByTagName("head")[0],a=document.createElement("script");this._scriptElement=a,a.onload=function(){n._stopLoading(),n.succeeded=!0,n._successCallback()},a.onerror=function(s){n._stopLoading(),n._failureCallback({msg:"Failed to load call object bundle ".concat(s.target.src),type:s.message})},a.src=e,r.appendChild(a)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),t}(),At=function(t,e,n){return Hc(t.local,e,n)===!0},zc=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},Ke=function(t,e,n,r){var a=Qc(t,e,n,r);return a&&a.pendingTrack},Hc=function(t,e,n){if(!t)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},a=t.public.subscribedTracks;return a&&a[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&a[e].custom?[!0,"staged"].includes(a[e].custom)?r(a[e].custom):r(a[e].custom[n]):r(a[e][n]):!a||r(a.ALL)},Qc=function(t,e,n,r){var a=Object.values(t.streams||{}).filter(function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,o){return new Date(o.starttime)-new Date(s.starttime)});return a&&a[0]},Kc=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function Ji(t,e){for(var n=e.getState(),r=0,a=["cam","screen"];r<a.length;r++)for(var s=a[r],o=0,u=["video","audio"];o<u.length;o++){var d=u[o],p=s==="cam"?d:"screen".concat(d.charAt(0).toUpperCase()+d.slice(1)),g=t.tracks[p];if(g){var m=t.local?zc(n,s,d):Ke(n,t.session_id,s,d);g.state==="playable"&&(g.track=m),g.persistentTrack=m}}}function Yi(t,e){try{var n=e.getState();for(var r in t.tracks)if(!Xc(r)){var a=t.tracks[r].kind;if(a){var s=t.tracks[r];if(s){var o=t.local?Kc(n,r):Ke(n,t.session_id,r,a);s.state==="playable"&&(t.tracks[r].track=o),s.persistentTrack=o}}else console.error("unknown type for custom track")}}catch(u){console.error(u)}}function Xc(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function $i(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var a=!0;try{var s=r.participants[t.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(a=!1)}catch(g){console.error(g)}if(!a)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&At(r,t.session_id,"cam-audio")){var o=Ke(r,t.session_id,"cam","audio");o&&(e&&e.audioTrack&&e.audioTrack.id===o.id?t.audioTrack=o:o.muted||(t.audioTrack=o)),t.audioTrack||(t.audio=!1)}if(t.video&&At(r,t.session_id,"cam-video")){var u=Ke(r,t.session_id,"cam","video");u&&(e&&e.videoTrack&&e.videoTrack.id===u.id?t.videoTrack=u:u.muted||(t.videoTrack=u)),t.videoTrack||(t.video=!1)}if(t.screen&&At(r,t.session_id,"screen-audio")){var d=Ke(r,t.session_id,"screen","audio");d&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===d.id?t.screenAudioTrack=d:d.muted||(t.screenAudioTrack=d))}if(t.screen&&At(r,t.session_id,"screen-video")){var p=Ke(r,t.session_id,"screen","video");p&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===p.id?t.screenVideoTrack=p:p.muted||(t.screenVideoTrack=p))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(g){console.error("unexpected error matching up tracks",g)}}}function Zc(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(d,p){if(d){if(typeof d=="string")return qi(d,p);var g=Object.prototype.toString.call(d).slice(8,-1);if(g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set")return Array.from(d);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return qi(d,p)}}(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return o=d.done,d},e:function(d){u=!0,s=d},f:function(){try{o||n.return==null||n.return()}finally{if(u)throw s}}}}function qi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ve=new Map,et=null;function el(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(d,p){if(d){if(typeof d=="string")return Wi(d,p);var g=Object.prototype.toString.call(d).slice(8,-1);if(g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set")return Array.from(d);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Wi(d,p)}}(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return o=d.done,d},e:function(d){u=!0,s=d},f:function(){try{o||n.return==null||n.return()}finally{if(u)throw s}}}}function Wi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ye=new Map,ft=null;function tl(t){Ls()?function(e){ve.has(e)||(ve.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){ve.has(e)&&(ve.get(e).lastDevicesString=JSON.stringify(n),et||(et=function(){var r=A(function*(){var a,s=yield navigator.mediaDevices.enumerateDevices(),o=Zc(ve.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value,d=JSON.stringify(s);d!==ve.get(u).lastDevicesString&&(ve.get(u).lastDevicesString=d,u(s))}}catch(p){o.e(p)}finally{o.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",et)))}).catch(function(){}))}(t):function(e){ye.has(e)||(ye.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){ye.has(e)&&(ye.get(e).lastDevicesString=JSON.stringify(n),ft||(ft=setInterval(A(function*(){var r,a=yield navigator.mediaDevices.enumerateDevices(),s=el(ye.keys());try{for(s.s();!(r=s.n()).done;){var o=r.value,u=JSON.stringify(a);u!==ye.get(o).lastDevicesString&&(ye.get(o).lastDevicesString=u,o(a))}}catch(d){s.e(d)}finally{s.f()}}),3e3)))}))}(t)}function nl(t){Ls()?function(e){ve.has(e)&&(ve.delete(e),ve.size===0&&et&&(navigator.mediaDevices.removeEventListener("devicechange",et),et=null))}(t):function(e){ye.has(e)&&(ye.delete(e),ye.size===0&&ft&&(clearInterval(ft),ft=null))}(t)}function Ls(){var t;return N()||((t=navigator.mediaDevices)===null||t===void 0?void 0:t.ondevicechange)!==void 0}var rl=new Set;function il(t,e){return t&&t.readyState==="live"&&!function(n,r){return n.muted&&!rl.has(n.id)}(t)}var al=["result"],sl=["preserveIframe"];function Gi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gi(Object(n),!0).forEach(function(r){ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ol(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ue(t);if(e){var a=ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ht(this,n)}}function zi(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(d,p){if(d){if(typeof d=="string")return Hi(d,p);var g=Object.prototype.toString.call(d).slice(8,-1);if(g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set")return Array.from(d);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Hi(d,p)}}(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return o=d.done,d},e:function(d){u=!0,s=d},f:function(){try{o||n.return==null||n.return()}finally{if(u)throw s}}}}function Hi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Be={},Qi="video",cl="voice",Ki=N()?{data:{}}:{data:{},topology:"none"},Xi={present:0,hidden:0},Ds={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},fn=Object.keys(Ds),Zi=["state","volume","simulcastEncodings"],ea={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},Gt={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},qn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Ue={customIntegrations:{validate:Us,help:Vs()},customTrayButtons:{validate:Bs,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(Gt))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return Js(t,ea)},help:"reactNativeConfig should look like ".concat(JSON.stringify(ea),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return Ns(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalVideo=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.videoTrack=t,n={customTrack:Ce};else{if(delete e._sharedTracks.videoTrack,typeof t!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({video:{settings:n}},!1),!0}},audioSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalAudio=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.audioTrack=t,n={customTrack:Ce};else{if(delete e._sharedTracks.audioTrack,typeof t!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({audio:{settings:n}},!1),!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var a=0,s=Object.keys(r);a<s.length;a++){var o=s[a];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(r[o],'"')),!1}return!0};return F(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return Rs(t,{allowAllParticipantsKey:!1})},help:Fs({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(a){return console.error("Failed to validate send settings",a),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!js(t)&&(e._inputSettings||(e._inputSettings={}),xs(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig,e._sharedTracks),e._updatePreloadCacheInputSettings(t,!0),!0)},help:Wn()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Ot={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!N()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function a(s){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var u in s)if(u==="custom"){if(!n.includes(s[u])&&!a(s[u],!0))return!1}else{var d=!o&&!r.includes(u),p=!n.includes(s[u]);if(d||p)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(N()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_e(n[e],2),a=r[0],s=r[1];switch(a){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var o,u=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],d=zi(s);try{for(d.s();!(o=d.n()).done;){var p=o.value;if(!u.includes(p))return!1}}catch(_){d.e(_)}finally{d.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var g,m=["participants","streaming","transcription"],w=zi(s);try{for(w.s();!(g=w.n()).done;){var S=g.value;if(!m.includes(S))return!1}}catch(_){w.e(_)}finally{w.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=A(function*(e){return new Promise(function(n,r){var a=[];e.forEach(function(s){return Promise.resolve(s).then(function(o){n(o)}).catch(function(o){a.push(o),a.length===e.length&&r(a)})})})});return function(e){return t.apply(this,arguments)}}());var ll=function(){zt(ae,Ee);var t,e,n,r,a,s,o,u,d,p,g,m,w,S,_,k,C,O,L,R,q,Y,ie,te,fe,je,at,cr,lr,ur,dr,pr,fr,hr,gr,mr,vr,yr,Ys=ol(ae);function ae(i){var l,c,h,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(de(this,ae),ke(be(c=Ys.call(this)),"startListeningForDeviceChanges",function(){tl(c.handleDeviceChange)}),ke(be(c),"stopListeningForDeviceChanges",function(){nl(c.handleDeviceChange)}),ke(be(c),"handleDeviceChange",function(b){b=b.map(function(E){return JSON.parse(JSON.stringify(E))}),c.emitDailyJSEvent({action:"available-devices-updated",availableDevices:b})}),ke(be(c),"handleNativeAppStateChange",function(){var b=A(function*(E){if(E==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield c.destroy());var M=E==="active";c.disableReactNativeAutoDeviceManagement("video")||(M?c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!0):(c.camUnmutedBeforeLosingNativeActiveState=c.localVideo(),c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!1)))});return function(E){return b.apply(this,arguments)}}()),ke(be(c),"handleNativeAudioFocusChange",function(b){c.disableReactNativeAutoDeviceManagement("audio")||(c._hasNativeAudioFocus=b,c.toggleParticipantAudioBasedOnNativeAudioFocus(),c._hasNativeAudioFocus?c.micUnmutedBeforeLosingNativeAudioFocus&&c.setLocalAudio(!0):(c.micUnmutedBeforeLosingNativeAudioFocus=c.localAudio(),c.setLocalAudio(!1)))}),ke(be(c),"handleNativeSystemScreenCaptureStop",function(){c.stopScreenShare()}),c.strictMode=f.strictMode===void 0||f.strictMode,c.allowMultipleCallInstances=(l=f.allowMultipleCallInstances)!==null&&l!==void 0&&l,Object.keys(Be).length&&(c._logDuplicateInstanceAttempt(),!c.allowMultipleCallInstances)){if(c.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),c.callClientId=Qt(),h=be(c),Be[h.callClientId]=h,window._daily.instances[c.callClientId]={},c._sharedTracks={},window._daily.instances[c.callClientId].tracks=c._sharedTracks,f.dailyJsVersion=ae.version(),c._iframe=i,c._callObjectMode=f.layout==="none"&&!c._iframe,c._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},f.showLocalVideo!==void 0?c._callObjectMode?console.error("showLocalVideo is not available in call object mode"):c._showLocalVideo=!!f.showLocalVideo:c._showLocalVideo=!0,f.showParticipantsBar!==void 0?c._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):c._showParticipantsBar=!!f.showParticipantsBar:c._showParticipantsBar=!0,f.customIntegrations!==void 0?c._callObjectMode?console.error("customIntegrations is not available in call object mode"):c._customIntegrations=f.customIntegrations:c._customIntegrations={},f.customTrayButtons!==void 0?c._callObjectMode?console.error("customTrayButtons is not available in call object mode"):c._customTrayButtons=f.customTrayButtons:c._customTrayButtons={},f.activeSpeakerMode!==void 0?c._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):c._activeSpeakerMode=!!f.activeSpeakerMode:c._activeSpeakerMode=!1,f.receiveSettings?c._callObjectMode?c._receiveSettings=f.receiveSettings:console.error("receiveSettings is only available in call object mode"):c._receiveSettings={},c.validateProperties(f),c.properties=T({},f),c._inputSettings||(c._inputSettings={}),c._callObjectLoader=c._callObjectMode?new $c(c.callClientId):null,c._callState=Ln,c._isPreparingToJoin=!1,c._accessState={access:Nt},c._meetingSessionSummary={},c._finalSummaryOfPrevSession={},c._meetingSessionState=mn(Ki,c._callObjectMode),c._nativeInCallAudioMode=Qi,c._participants={},c._isScreenSharing=!1,c._participantCounts=Xi,c._rmpPlayerState={},c._waitingParticipants={},c._network={threshold:"good",quality:100},c._activeSpeaker={},c._localAudioLevel=0,c._isLocalAudioLevelObserverRunning=!1,c._remoteParticipantsAudioLevel={},c._isRemoteParticipantsAudioLevelObserverRunning=!1,c._maxAppMessageSize=cn,c._messageChannel=N()?new Uc:new Vc,c._iframe&&(c._iframe.requestFullscreen?c._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===c._iframe?(c.emitDailyJSEvent({action:dt}),c.sendMessageToCallMachine({action:dt})):(c.emitDailyJSEvent({action:pt}),c.sendMessageToCallMachine({action:pt}))}):c._iframe.webkitRequestFullscreen&&c._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===c._iframe?(c.emitDailyJSEvent({action:dt}),c.sendMessageToCallMachine({action:dt})):(c.emitDailyJSEvent({action:pt}),c.sendMessageToCallMachine({action:pt}))})),N()){var v=c.nativeUtils();v.addAudioFocusChangeListener&&v.removeAudioFocusChangeListener&&v.addAppStateChangeListener&&v.removeAppStateChangeListener&&v.addSystemScreenCaptureStopListener&&v.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),c._hasNativeAudioFocus=!0,v.addAudioFocusChangeListener(c.handleNativeAudioFocusChange),v.addAppStateChangeListener(c.handleNativeAppStateChange),v.addSystemScreenCaptureStopListener(c.handleNativeSystemScreenCaptureStop)}return c._callObjectMode&&c.startListeningForDeviceChanges(),c._messageChannel.addListenerForMessagesFromCallMachine(c.handleMessageFromCallMachine,c.callClientId,be(c)),c}return pe(ae,[{key:"destroy",value:(yr=A(function*(){var i,l;try{yield this.leave()}catch{}var c=this._iframe;if(c){var h=c.parentElement;h&&h.removeChild(c)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),N()){var f=this.nativeUtils();f.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),f.removeAppStateChangeListener(this.handleNativeAppStateChange),f.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Be[this.callClientId],!((i=window)===null||i===void 0||(l=i._daily)===null||l===void 0)&&l.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return yr.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(i){var l=i.bodyClass,c=i.cssFile,h=i.cssText;return I(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(c),bodyClass:l,cssText:h}),this}},{key:"iframe",value:function(){return I(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return se(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return se(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(i,l){for(var c in l){if(!Ot[c])throw new Error("unrecognized updateParticipant property ".concat(c));if(Ot[c].validate&&!Ot[c].validate(l[c],this,this._participants[i]))throw new Error(Ot[c].help)}}},{key:"updateParticipant",value:function(i,l){return this._participants.local&&this._participants.local.session_id===i&&(i="local"),i&&l&&(this.validateParticipantProperties(i,l),this.sendMessageToCallMachine({action:"update-participant",id:i,properties:l})),this}},{key:"updateParticipants",value:function(i){var l=this._participants.local&&this._participants.local.session_id;for(var c in i)c===l&&(c="local"),c&&i[c]&&this.validateParticipantProperties(c,i[c]);return this.sendMessageToCallMachine({action:"update-participants",participants:i}),this}},{key:"updateWaitingParticipant",value:(vr=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(se(this._callObjectMode,"updateWaitingParticipant()"),U(this._callState,"updateWaitingParticipant()"),typeof l!="string"||F(c)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(h,f){i.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:l,updates:c},function(v){v.error&&f(v.error),v.id||f(new Error("unknown error in updateWaitingParticipant()")),h({id:v.id})})})}),function(){return vr.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(mr=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(se(this._callObjectMode,"updateWaitingParticipants()"),U(this._callState,"updateWaitingParticipants()"),F(l)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(c,h){i.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:l},function(f){f.error&&h(f.error),f.ids||h(new Error("unknown error in updateWaitingParticipants()")),c({ids:f.ids})})})}),function(){return mr.apply(this,arguments)})},{key:"requestAccess",value:(gr=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=l.access,h=c===void 0?{level:Ta}:c,f=l.name,v=f===void 0?"":f;return se(this._callObjectMode,"requestAccess()"),U(this._callState,"requestAccess()"),new Promise(function(b,E){i.sendMessageToCallMachine({action:"daily-method-request-access",access:h,name:v},function(M){M.error&&E(M.error),M.access||E(new Error("unknown error in requestAccess()")),b({access:M.access,granted:M.granted})})})}),function(){return gr.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in l&&(N()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),l={}):i&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),l={})),this.sendMessageToCallMachine({action:"local-audio",state:i,options:l}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(i){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:i}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(i){return this.sendMessageToCallMachine({action:"local-video",state:i}),this}},{key:"_setAllowLocalAudio",value:function(i){if(this._preloadCache.allowLocalAudio=i,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:i}),this}},{key:"_setAllowLocalVideo",value:function(i){if(this._preloadCache.allowLocalVideo=i,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:i}),this}},{key:"getReceiveSettings",value:(hr=A(function*(i){var l=this,c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,h=c!==void 0&&c;if(se(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(F(i)){case"string":return new Promise(function(f){l.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:i,showInheritedValues:h},function(v){f(v.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(i){return hr.apply(this,arguments)})},{key:"updateReceiveSettings",value:(fr=A(function*(i){var l=this;if(se(this._callObjectMode,"updateReceiveSettings()"),!Rs(i,{allowAllParticipantsKey:!0}))throw new Error(Fs({allowAllParticipantsKey:!0}));return U(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(c){l.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:i},function(h){c({receiveSettings:h.receiveSettings})})})}),function(i){return fr.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(i,l){if(i){var c={};if(i.audio){var h,f,v,b;i.audio.settings&&(!Object.keys(i.audio.settings).length&&l||(c.audio={settings:T({},i.audio.settings)})),l&&(h=c.audio)!==null&&h!==void 0&&(f=h.settings)!==null&&f!==void 0&&f.customTrack&&(c.audio.settings={customTrack:this._sharedTracks.audioTrack});var E=((v=i.audio.processor)===null||v===void 0?void 0:v.type)==="none"&&((b=i.audio.processor)===null||b===void 0?void 0:b._isDefaultWhenNone);if(i.audio.processor&&!E){var M=T({},i.audio.processor);delete M._isDefaultWhenNone,c.audio=T(T({},c.audio),{},{processor:M})}}if(i.video){var x,D,W,he;i.video.settings&&(!Object.keys(i.video.settings).length&&l||(c.video={settings:T({},i.video.settings)})),l&&(x=c.video)!==null&&x!==void 0&&(D=x.settings)!==null&&D!==void 0&&D.customTrack&&(c.video.settings={customTrack:this._sharedTracks.videoTrack});var Me=((W=i.video.processor)===null||W===void 0?void 0:W.type)==="none"&&((he=i.video.processor)===null||he===void 0?void 0:he._isDefaultWhenNone);if(i.video.processor&&!Me){var xe=T({},i.video.processor);delete xe._isDefaultWhenNone,c.video=T(T({},c.video),{},{processor:xe})}}return c}}},{key:"getInputSettings",value:function(){var i=this;return I(),new Promise(function(l){l(i._getInputSettings())})}},{key:"_getInputSettings",value:function(){var i,l,c,h,f,v,b,E,M={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(i=((c=this._inputSettings)===null||c===void 0?void 0:c.video)||M,l=((h=this._inputSettings)===null||h===void 0?void 0:h.audio)||M):(i=((f=this._preloadCache)===null||f===void 0||(v=f.inputSettings)===null||v===void 0?void 0:v.video)||M,l=((b=this._preloadCache)===null||b===void 0||(E=b.inputSettings)===null||E===void 0?void 0:E.audio)||M);var x={audio:l,video:i};return this._prepInputSettingsForSharing(x,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(i,l){var c=this._inputSettings||{},h={};if(i.video){var f,v,b;h.video={},i.video.settings?(h.video.settings={},l||i.video.settings.customTrack||(b=c.video)===null||b===void 0||!b.settings?h.video.settings=i.video.settings:h.video.settings=T(T({},c.video.settings),i.video.settings),Object.keys(h.video.settings).length||delete h.video.settings):(f=c.video)!==null&&f!==void 0&&f.settings&&(h.video.settings=c.video.settings),i.video.processor?h.video.processor=i.video.processor:(v=c.video)!==null&&v!==void 0&&v.processor&&(h.video.processor=c.video.processor)}else c.video&&(h.video=c.video);if(i.audio){var E,M,x;h.audio={},i.audio.settings?(h.audio.settings={},l||i.audio.settings.customTrack||(x=c.audio)===null||x===void 0||!x.settings?h.audio.settings=i.audio.settings:h.audio.settings=T(T({},c.audio.settings),i.audio.settings),Object.keys(h.audio.settings).length||delete h.audio.settings):(E=c.audio)!==null&&E!==void 0&&E.settings&&(h.audio.settings=c.audio.settings),i.audio.processor?h.audio.processor=i.audio.processor:(M=c.audio)!==null&&M!==void 0&&M.processor&&(h.audio.processor=c.audio.processor)}else c.audio&&(h.audio=c.audio);this._maybeUpdateInputSettings(h)}},{key:"_devicesFromInputSettings",value:function(i){var l,c,h,f,v=(i==null||(l=i.video)===null||l===void 0||(c=l.settings)===null||c===void 0?void 0:c.deviceId)||null,b=(i==null||(h=i.audio)===null||h===void 0||(f=h.settings)===null||f===void 0?void 0:f.deviceId)||null,E=this._preloadCache.outputDeviceId||null;return{camera:v?{deviceId:v}:{},mic:b?{deviceId:b}:{},speaker:E?{deviceId:E}:{}}}},{key:"updateInputSettings",value:(pr=A(function*(i){var l=this;return I(),js(i)?i.video||i.audio?(xs(i,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(i,!0),this._getInputSettings()):new Promise(function(c,h){l.sendMessageToCallMachine({action:"update-input-settings",inputSettings:i},function(f){if(f.error)h(f.error);else{if(f.returnPreloadCache)return l._updatePreloadCacheInputSettings(i,!0),void c(l._getInputSettings());l._maybeUpdateInputSettings(f.inputSettings),c(l._prepInputSettingsForSharing(f.inputSettings,!0))}})})):this._getInputSettings():(console.error(Wn()),Promise.reject(Wn()))}),function(i){return pr.apply(this,arguments)})},{key:"setBandwidth",value:function(i){var l=i.kbs,c=i.trackConstraints;if(I(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:l,trackConstraints:c}),this}},{key:"getDailyLang",value:function(){var i=this;if(I(),this._callMachineInitialized)return new Promise(function(l){i.sendMessageToCallMachine({action:"get-daily-lang"},function(c){delete c.action,delete c.callbackStamp,l(c)})})}},{key:"setDailyLang",value:function(i){return I(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:i}),this}},{key:"setProxyUrl",value:function(i){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:i}),this}},{key:"setIceConfig",value:function(i){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:i}),this}},{key:"meetingSessionSummary",value:function(){return[Oe,we].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(dr=A(function*(){var i=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),U(this._callState,"getMeetingSession()"),new Promise(function(l){i.sendMessageToCallMachine({action:"get-meeting-session"},function(c){delete c.action,delete c.callbackStamp,l(c)})})}),function(){return dr.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return U(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";se(this._callObjectMode,"setMeetingSessionData()"),U(this._callState,"setMeetingSessionData");try{(function(c,h){new Jc({data:c,mergeStrategy:h})})(i,l)}catch(c){throw console.error(c),c}try{this.sendMessageToCallMachine({action:"set-session-data",data:i,mergeStrategy:l})}catch(c){throw new Error("Error setting meeting session data: ".concat(c))}}},{key:"setUserName",value:function(i,l){var c=this;return this.properties.userName=i,new Promise(function(h){c.sendMessageToCallMachine({action:"set-user-name",name:i??"",thisMeetingOnly:N()||!!l&&!!l.thisMeetingOnly},function(f){delete f.action,delete f.callbackStamp,h(f)})})}},{key:"setUserData",value:(ur=A(function*(i){var l=this;try{Ns(i)}catch(c){throw console.error(c),c}if(this.properties.userData=i,this._callMachineInitialized)return new Promise(function(c){try{l.sendMessageToCallMachine({action:"set-user-data",userData:i},function(h){delete h.action,delete h.callbackStamp,c(h)})}catch(h){throw new Error("Error setting user data: ".concat(h))}})}),function(i){return ur.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(i){if(i&&(i<100||typeof i!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(i){var l=this;if(typeof AudioWorkletNode>"u"&&!N())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(i),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(c,h){l.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:i},function(f){l._isLocalAudioLevelObserverRunning=!f.error,f.error?h({error:f.error}):c()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:i}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(i){var l=this;if(this.validateAudioLevelInterval(i),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(c,h){l.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:i},function(f){l._isRemoteParticipantsAudioLevelObserverRunning=!f.error,f.error?h({error:f.error}):c()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:i}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(lr=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(se(this._callObjectMode,"startCamera()"),hn(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(l)}catch(c){return Promise.reject(c)}else{if(this._didPreAuth){if(l.url&&l.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(l.token&&l.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(l),this.properties=T(T({},this.properties),l)}return new Promise(function(c){i._preloadCache.inputSettings=i._prepInputSettingsForSharing(i._inputSettings,!1),i.sendMessageToCallMachine({action:"start-camera",properties:Qe(i.properties,i.callClientId),preloadCache:Qe(i._preloadCache,i.callClientId)},function(h){c({camera:h.camera,mic:h.mic,speaker:h.speaker})})})}),function(){return lr.apply(this,arguments)})},{key:"validateCustomTrack",value:function(i,l,c){if(c&&c.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(l&&l!=="music"&&l!=="speech"&&!(l instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(c&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(c))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(i instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return I(),U(this._callState,"startCustomTrack()"),this.validateCustomTrack(l.track,l.mode,l.trackName),new Promise(function(c,h){i._sharedTracks.customTrack=l.track,l.track=Ce,i.sendMessageToCallMachine({action:"start-custom-track",properties:l},function(f){f.error?h({error:f.error}):c(f.mediaTag)})})}},{key:"stopCustomTrack",value:function(i){var l=this;return I(),U(this._callState,"stopCustomTrack()"),new Promise(function(c){l.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:i},function(h){c(h.mediaTag)})})}},{key:"setCamera",value:function(i){var l=this;return lt(),Pt(this._callMachineInitialized,"setCamera()"),new Promise(function(c){l.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:i},function(h){c({device:h.device})})})}},{key:"setAudioDevice",value:(cr=A(function*(i){return lt(),this.nativeUtils().setAudioDevice(i),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(i){return cr.apply(this,arguments)})},{key:"cycleCamera",value:function(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(c){i.sendMessageToCallMachine({action:"cycle-camera",properties:l},function(h){c({device:h.device})})})}},{key:"cycleMic",value:function(){var i=this;return I(),new Promise(function(l){i.sendMessageToCallMachine({action:"cycle-mic"},function(c){l({device:c.device})})})}},{key:"getCameraFacingMode",value:function(){var i=this;return lt(),new Promise(function(l){i.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(c){l(c.facingMode)})})}},{key:"setInputDevicesAsync",value:(at=A(function*(i){var l=this,c=i.audioDeviceId,h=i.videoDeviceId,f=i.audioSource,v=i.videoSource;if(I(),f!==void 0&&(c=f),v!==void 0&&(h=v),typeof c=="boolean"&&(this._setAllowLocalAudio(c),c=void 0),typeof h=="boolean"&&(this._setAllowLocalVideo(h),h=void 0),!c&&!h)return yield this.getInputDevices();var b={};return c&&(c instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=c,c=Ce,b.audio={settings:{customTrack:c}}):(delete this._sharedTracks.audioTrack,b.audio={settings:{deviceId:c}})),h&&(h instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=h,h=Ce,b.video={settings:{customTrack:h}}):(delete this._sharedTracks.videoTrack,b.video={settings:{deviceId:h}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(b,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(E){l.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:c,videoDeviceId:h},function(M){if(delete M.action,delete M.callbackStamp,M.returnPreloadCache)return l._updatePreloadCacheInputSettings(b,!1),void E(l._devicesFromInputSettings(l._inputSettings));E(M)})})}),function(i){return at.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(je=A(function*(i){var l=this,c=i.outputDeviceId;return I(),c&&(this._preloadCache.outputDeviceId=c),this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(h){l.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:c},function(f){delete f.action,delete f.callbackStamp,f.returnPreloadCache?h(l._devicesFromInputSettings(l._inputSettings)):h(f)})})}),function(i){return je.apply(this,arguments)})},{key:"getInputDevices",value:(fe=A(function*(){var i=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(l){i.sendMessageToCallMachine({action:"get-input-devices"},function(c){c.returnPreloadCache?l(i._devicesFromInputSettings(i._inputSettings)):l({camera:c.camera,mic:c.mic,speaker:c.speaker})})})}),function(){return fe.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return lt(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(i){if(lt(),[Qi,cl].includes(i)){if(i!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=i,!this.disableReactNativeAutoDeviceManagement("audio")&&jt(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",i)}},{key:"preAuth",value:(te=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(se(this._callObjectMode,"preAuth()"),hn(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(l)),!l.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(l),this.properties=T(T({},this.properties),l),new Promise(function(c,h){i._preloadCache.inputSettings=i._prepInputSettingsForSharing(i._inputSettings,!1),i.sendMessageToCallMachine({action:"daily-method-preauth",properties:Qe(i.properties,i.callClientId),preloadCache:Qe(i._preloadCache,i.callClientId)},function(f){return f.error?h(f.error):f.access?(i._didPreAuth=!0,void c({access:f.access})):h(new Error("unknown error in preAuth()"))})})}),function(){return te.apply(this,arguments)})},{key:"load",value:(ie=A(function*(i){var l=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(i&&(this.validateProperties(i),this.properties=T(T({},this.properties),i)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(Ai),this.emitDailyJSEvent({action:La}),this._callObjectMode?new Promise(function(c,h){l._callObjectLoader.cancel();var f=Date.now();l._callObjectLoader.load(l.properties.dailyConfig,function(v){l._bundleLoadTime=v?"no-op":Date.now()-f,l._updateCallState(Oi),v&&l.emitDailyJSEvent({action:Nn}),c()},function(v,b){if(l.emitDailyJSEvent({action:Da}),!b){l._updateCallState(we),l.resetMeetingDependentVars();var E={action:Vn,errorMsg:v.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:v,bundleUrl:xt(l.properties.dailyConfig)}}};l._maybeSendToSentry(E),l.emitDailyJSEvent(E),h(v.msg)}})}):(this._iframe.src=ua(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(c,h){l._loadedCallback=function(f){l._callState!==we?(l._updateCallState(Oi),(l.properties.cssFile||l.properties.cssText)&&l.loadCss(l.properties),c()):h(f)}}))}}),function(i){return ie.apply(this,arguments)})},{key:"join",value:(Y=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var c=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(l)}catch(h){return this.updateIsPreparingToJoin(!1),Promise.reject(h)}}else{if(c=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(l.url&&l.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(l.token&&l.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(l.url&&!this._callObjectMode&&l.url&&l.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(l.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(l),this.properties=T(T({},this.properties),l)}return l.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!l.showLocalVideo),l.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!l.showParticipantsBar),this._callState===Le||this._callState===$t?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState($t,!1),this.emitDailyJSEvent({action:ja}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:Qe(this.properties,this.callClientId),preloadCache:Qe(this._preloadCache,this.callClientId)}),new Promise(function(h,f){i._joinedCallback=function(v,b){if(i._callState!==we){if(i._updateCallState(Le),v)for(var E in v){if(i._callObjectMode){var M=i._callMachine().store;Ji(v[E],M),Yi(v[E],M),$i(v[E],i._participants[E],M)}i._participants[E]=T({},v[E]),i.toggleParticipantAudioBasedOnNativeAudioFocus()}c&&i.loadCss(i.properties),h(v)}else f(b)}}))}),function(){return Y.apply(this,arguments)})},{key:"leave",value:(q=A(function*(){var i=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(l){i._callState===Oe||i._callState===we?l():i._callObjectLoader&&!i._callObjectLoader.loaded?(i._callObjectLoader.cancel(),i._updateCallState(Oe),i.resetMeetingDependentVars(),i.emitDailyJSEvent({action:Oe}),l()):(i._resolveLeave=l,i.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return q.apply(this,arguments)})},{key:"startScreenShare",value:(R=A(function*(){var i=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Pt(this._callMachineInitialized,"startScreenShare()"),l.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",l.screenVideoSendSettings),l.mediaStream&&(this._sharedTracks.screenMediaStream=l.mediaStream,l.mediaStream=Ce),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var c=this.nativeUtils();if(yield c.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Fn,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});c.setSystemScreenCaptureStartCallback(function(){c.setSystemScreenCaptureStartCallback(null),i.sendMessageToCallMachine({action:Ii,captureOptions:l})}),c.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:Ii,captureOptions:l})}),function(){return R.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Pt(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.type;if(l&&l!=="cloud"&&l!=="raw-tracks"&&l!=="local")throw new Error("invalid type: ".concat(l,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(T({action:"local-recording-start"},i))}},{key:"updateRecording",value:function(i){var l=i.layout,c=l===void 0?{preset:"default"}:l,h=i.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:c,instanceId:h})}},{key:"stopRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(T({action:"local-recording-stop"},i))}},{key:"startLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(T({action:"daily-method-start-live-streaming"},i))}},{key:"updateLiveStreaming",value:function(i){var l=i.layout,c=l===void 0?{preset:"default"}:l,h=i.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:c,instanceId:h})}},{key:"addLiveStreamingEndpoints",value:function(i){var l=i.endpoints,c=i.instanceId;this.sendMessageToCallMachine({action:Li,endpointsOp:Nc,endpoints:l,instanceId:c})}},{key:"removeLiveStreamingEndpoints",value:function(i){var l=i.endpoints,c=i.instanceId;this.sendMessageToCallMachine({action:Li,endpointsOp:Rc,endpoints:l,instanceId:c})}},{key:"stopLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(T({action:"daily-method-stop-live-streaming"},i))}},{key:"validateDailyConfig",value:function(i){i.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(i.camSimulcastEncodings)),i.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),As()&&i.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(i){if(!(i instanceof Array||Array.isArray(i)))throw new Error("encodings must be an Array");if(!ia(i.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var h=0;h<i.length;h++){var f=i[h];for(var v in this._validateEncodingLayerHasValidProperties(f),f)if(fn.includes(v)){if(typeof f[v]!="number")throw new Error("".concat(v," must be a number"));if(l){var b=l[v],E=b.min,M=b.max;if(!ia(f[v],E,M))throw new Error("".concat(v," value not in range. valid range: ").concat(E," to ").concat(M))}}else if(!["active","scalabilityMode"].includes(v))throw new Error("Invalid key ".concat(v,", valid keys are:")+Object.values(fn));if(c&&!f.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(L=A(function*(i){var l=this,c=i.url,h=i.settings,f=h===void 0?{state:Bn.PLAY}:h;try{(function(v){if(typeof v!="string")throw new Error('url parameter must be "string" type')})(c),ra(f),function(v){for(var b in v)if(!Zi.includes(b))throw new Error("Invalid key ".concat(b,", valid keys are: ").concat(Zi));v.simulcastEncodings&&this.validateSimulcastEncodings(v.simulcastEncodings,Ds,!0)}(f)}catch(v){throw console.error("invalid argument Error: ".concat(v)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),v}return new Promise(function(v,b){l.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:c,settings:f},function(E){E.error?b({error:E.error,errorMsg:E.errorMsg}):v({session_id:E.session_id,remoteMediaPlayerState:{state:E.state,settings:E.settings}})})})}),function(i){return L.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(O=A(function*(i){var l=this;if(typeof i!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(c,h){l.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:i},function(f){f.error?h({error:f.error,errorMsg:f.errorMsg}):c()})})}),function(i){return O.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(C=A(function*(i){var l=this,c=i.session_id,h=i.settings;try{ra(h)}catch(f){throw console.error("invalid argument Error: ".concat(f)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),f}return new Promise(function(f,v){l.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:c,settings:h},function(b){b.error?v({error:b.error,errorMsg:b.errorMsg}):f({session_id:b.session_id,remoteMediaPlayerState:{state:b.state,settings:b.settings}})})})}),function(i){return C.apply(this,arguments)})},{key:"startTranscription",value:function(i){U(this._callState,"startTranscription()"),this.sendMessageToCallMachine(T({action:"daily-method-start-transcription"},i))}},{key:"updateTranscription",value:function(i){if(U(this._callState,"updateTranscription()"),!i)throw new Error("updateTranscription Error: options is mandatory");if(F(i)!=="object")throw new Error("updateTranscription Error: options must be object type");if(i.participants&&!Array.isArray(i.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(T({action:"daily-method-update-transcription"},i))}},{key:"stopTranscription",value:function(i){if(U(this._callState,"stopTranscription()"),i&&F(i)!=="object")throw new Error("stopTranscription Error: options must be object type");if(i&&!i.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(T({action:"daily-method-stop-transcription"},i))}},{key:"startDialOut",value:(k=A(function*(i){var l=this;U(this._callState,"startDialOut()");var c=function(h){if(h){if(!Array.isArray(h))throw new Error("Error starting dial out: audio codec must be an array");if(h.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");h.forEach(function(f){if(typeof f!="string")throw new Error("Error starting dial out: audio codec must be a string");if(f!=="OPUS"&&f!=="PCMU"&&f!=="PCMA"&&f!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!i.sipUri&&!i.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(i.sipUri&&i.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(i.sipUri){if(typeof i.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!i.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(i.video&&typeof i.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(h){if(h&&(c(h.audio),h.video)){if(!Array.isArray(h.video))throw new Error("Error starting dial out: video codec must be an array");if(h.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");h.video.forEach(function(f){if(typeof f!="string")throw new Error("Error starting dial out: video codec must be a string");if(f!=="H264"&&f!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(i.codecs)}if(i.phoneNumber){if(typeof i.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(i.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");i.codecs&&c(i.codecs.audio)}if(i.callerId){if(typeof i.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(i.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(i.displayName){if(typeof i.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(i.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(i.userId){if(typeof i.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(i.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(h,f){l.sendMessageToCallMachine(T({action:"dialout-start"},i),function(v){v.error?f(v.error):h(v)})})}),function(i){return k.apply(this,arguments)})},{key:"stopDialOut",value:function(i){var l=this;return U(this._callState,"stopDialOut()"),new Promise(function(c,h){l.sendMessageToCallMachine(T({action:"dialout-stop"},i),function(f){f.error?h(f.error):c(f)})})}},{key:"sipCallTransfer",value:(_=A(function*(i){var l=this;if(U(this._callState,"sipCallTransfer()"),!i)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return i.useSipRefer=!1,na(i,"sipCallTransfer"),new Promise(function(c,h){l.sendMessageToCallMachine(T({action:Di},i),function(f){f.error?h(f.error):c(f)})})}),function(i){return _.apply(this,arguments)})},{key:"sipRefer",value:(S=A(function*(i){var l=this;if(U(this._callState,"sipRefer()"),!i)throw new Error("sessionId and toEndPoint are mandatory parameter");return i.useSipRefer=!0,na(i,"sipRefer"),new Promise(function(c,h){l.sendMessageToCallMachine(T({action:Di},i),function(f){f.error?h(f.error):c(f)})})}),function(i){return S.apply(this,arguments)})},{key:"sendDTMF",value:(w=A(function*(i){var l=this;return U(this._callState,"sendDTMF()"),function(c){var h=c.sessionId,f=c.tones;if(!h||!f)throw new Error("sessionId and tones are mandatory parameter");if(typeof h!="string"||typeof f!="string")throw new Error("sessionId and tones should be of string type");if(f.length>20)throw new Error("tones string must be upto 20 characters");var v=/[^0-9A-D*#]/g,b=f.match(v);if(b&&b[0])throw new Error("".concat(b[0]," is not valid DTMF tone"))}(i),new Promise(function(c,h){l.sendMessageToCallMachine(T({action:"send-dtmf"},i),function(f){f.error?h(f.error):c(f)})})}),function(i){return w.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var i=this;return this._callState!==Le?{stats:{latest:{}}}:new Promise(function(l){i.sendMessageToCallMachine({action:"get-calc-stats"},function(c){l(T({stats:c.stats},i._network))})})}},{key:"testWebsocketConnectivity",value:(m=A(function*(){var i=this;if(gn(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(l){return Promise.reject(l)}return new Promise(function(l,c){i.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(h){h.error?c(h.error):l(h.results)})})}),function(){return m.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(i){return i?i instanceof MediaStreamTrack?!!il(i)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(g=A(function*(){var i=this;I(),se(this._callObjectMode,"testCallQuality()"),Pt(this._callMachineInitialized,"testCallQuality()",null,!0),hn(this._callState,this._isPreparingToJoin,"testCallQuality()");var l=this._testCallAlreadyInProgress,c=function(f){l||(i._testCallInProgress=f)};if(c(!0),this.needsLoad())try{var h=this._callState;yield this.load(),this._callState=h}catch(f){return c(!1),Promise.reject(f)}return new Promise(function(f){i.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:i.properties.dailyJsVersion},function(v){var b=v.results,E=b.result,M=_r(b,al);if(E==="failed"){var x,D=T({},M);(x=M.error)!==null&&x!==void 0&&x.details?(M.error.details=JSON.parse(M.error.details),D.error=T(T({},D.error),{},{details:T({},D.error.details)}),D.error.details.duringTest="testCallQuality"):(D.error=D.error?T({},D.error):{},D.error.details={duringTest:"testCallQuality"}),i._maybeSendToSentry(D)}c(!1),f(T({result:E},M))})})}),function(){return g.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(p=A(function*(i){var l;N()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),l=yield this.testPeerToPeerCallQuality(i)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),l=yield this.testCallQuality());var c={result:l.result,secondsElapsed:l.secondsElapsed};return l.data&&(c.data={maxRTT:l.data.maxRoundTripTime,packetLoss:l.data.avgRecvPacketLoss}),c}),function(i){return p.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(d=A(function*(i){var l=this;if(gn(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(f){return Promise.reject(f)}var c=i.videoTrack,h=i.duration;if(!this._validateVideoTrackForNetworkTests(c))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=c,new Promise(function(f,v){l.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:h},function(b){b.error?v(b.error):f(b.results)})})}),function(i){return d.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){N()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(u=A(function*(i){var l=this;if(gn(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}if(!this._validateVideoTrackForNetworkTests(i))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=i,new Promise(function(c,h){l.sendMessageToCallMachine({action:"test-network-connectivity"},function(f){f.error?h(f.error):c(f.results)})})}),function(i){return u.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var i=this;return new Promise(function(l){i._callState===Le?i.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(c){l(c.cpuStats)}):l({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(i){var l;if(!(((l=Object.keys(i))===null||l===void 0?void 0:l.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(fn))}},{key:"_validateVideoSendSettings",value:function(i,l){var c=i==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],h="Video send settings should be either an object or one of the supported presets: ".concat(c.join());if(typeof l=="string"){if(!c.includes(l))throw new Error(h)}else{if(F(l)!=="object")throw new Error(h);if(!l.maxQuality&&!l.encodings&&l.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(l.maxQuality&&["low","medium","high"].indexOf(l.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(l.encodings){var f=!1;switch(Object.keys(l.encodings).length){case 1:f=!l.encodings.low;break;case 2:f=!l.encodings.low||!l.encodings.medium;break;case 3:f=!l.encodings.low||!l.encodings.medium||!l.encodings.high;break;default:f=!0}if(f)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");l.encodings.low&&this._validateEncodingLayerHasValidProperties(l.encodings.low),l.encodings.medium&&this._validateEncodingLayerHasValidProperties(l.encodings.medium),l.encodings.high&&this._validateEncodingLayerHasValidProperties(l.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(i){var l=this;if(!i||Object.keys(i).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(i).forEach(function(c){var h=_e(c,2),f=h[0],v=h[1];l._validateVideoSendSettings(f,v)})}},{key:"updateSendSettings",value:function(i){var l=this;return this.validateUpdateSendSettings(i),this.needsLoad()?(this._preloadCache.sendSettings=i,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(c,h){l.sendMessageToCallMachine({action:"update-send-settings",sendSettings:i},function(f){f.error?h(f.error):c(f.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return I(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(i){return I(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:i}),this}},{key:"activeSpeakerMode",value:function(){return I(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(i){return U(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=i,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:i}),this}},{key:"enumerateDevices",value:(o=A(function*(){var i=this;if(this._callObjectMode){var l=yield navigator.mediaDevices.enumerateDevices();return He()==="Firefox"&&qt().major>115&&qt().major<123&&(l=l.filter(function(c){return c.kind!=="audiooutput"})),{devices:l.map(function(c){var h=JSON.parse(JSON.stringify(c));if(!N()&&c.kind==="videoinput"&&c.getCapabilities){var f,v=c.getCapabilities();h.facing=(v==null||(f=v.facingMode)===null||f===void 0?void 0:f.length)>=1?v.facingMode[0]:void 0}return h})}}return new Promise(function(c){i.sendMessageToCallMachine({action:"enumerate-devices"},function(h){c({devices:h.devices})})})}),function(){return o.apply(this,arguments)})},{key:"sendAppMessage",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(U(this._callState,"sendAppMessage()"),JSON.stringify(i).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:i,to:l}),this}},{key:"addFakeParticipant",value:function(i){return I(),U(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(T({action:"add-fake-participant"},i)),this}},{key:"setShowNamesMode",value:function(i){return Z(this._callObjectMode,"setShowNamesMode()"),I(),i&&i!=="always"&&i!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:i}),this)}},{key:"setShowLocalVideo",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return Z(this._callObjectMode,"setShowLocalVideo()"),I(),U(this._callState,"setShowLocalVideo()"),typeof i!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:i}),this._showLocalVideo=i,this)}},{key:"showLocalVideo",value:function(){return Z(this._callObjectMode,"showLocalVideo()"),I(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return Z(this._callObjectMode,"setShowParticipantsBar()"),I(),U(this._callState,"setShowParticipantsBar()"),typeof i!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:i}),this._showParticipantsBar=i,this)}},{key:"showParticipantsBar",value:function(){return Z(this._callObjectMode,"showParticipantsBar()"),I(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return I(),Z(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(i){return I(),Z(this._callObjectMode,"setCustomIntegrations()"),U(this._callState,"setCustomIntegrations()"),Us(i)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:i}),this._customIntegrations=i,this):this}},{key:"startCustomIntegrations",value:function(i){var l=this;if(I(),Z(this._callObjectMode,"startCustomIntegrations()"),U(this._callState,"startCustomIntegrations()"),Array.isArray(i)&&i.some(function(f){return typeof f!="string"})||!Array.isArray(i)&&typeof i!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var c=typeof i=="string"?[i]:i,h=c.filter(function(f){return!(f in l._customIntegrations)});return h.length?(console.error(`Can't find custom integration(s): "`.concat(h.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:c}),this)}},{key:"stopCustomIntegrations",value:function(i){var l=this;if(I(),Z(this._callObjectMode,"stopCustomIntegrations()"),U(this._callState,"stopCustomIntegrations()"),Array.isArray(i)&&i.some(function(f){return typeof f!="string"})||!Array.isArray(i)&&typeof i!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var c=typeof i=="string"?[i]:i,h=c.filter(function(f){return!(f in l._customIntegrations)});return h.length?(console.error(`Can't find custom integration(s): "`.concat(h.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:c}),this)}},{key:"customTrayButtons",value:function(){return Z(this._callObjectMode,"customTrayButtons()"),I(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(i){return Z(this._callObjectMode,"updateCustomTrayButtons()"),I(),U(this._callState,"updateCustomTrayButtons()"),Bs(i)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:i}),this._customTrayButtons=i,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(Gt))),this)}},{key:"theme",value:function(){return Z(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(i){var l=this;return Z(this._callObjectMode,"setTheme()"),new Promise(function(c,h){try{l.validateProperties({theme:i}),l.properties.theme=T({},i),l.sendMessageToCallMachine({action:"set-theme",theme:l.properties.theme});try{l.emitDailyJSEvent({action:Ia,theme:l.properties.theme})}catch(f){console.log("could not emit 'theme-updated'",f)}c(l.properties.theme)}catch(f){h(f)}})}},{key:"requestFullscreen",value:(s=A(function*(){if(I(),this._iframe&&!document.fullscreenElement&&Ni())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(i){console.log("could not make video call fullscreen",i)}}),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){I(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(a=A(function*(){var i=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(l){i.sendMessageToCallMachine({action:"get-sidebar-view"},function(c){l(c.view)})})}),function(){return a.apply(this,arguments)})},{key:"setSidebarView",value:function(i){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:i}),this)}},{key:"room",value:(r=A(function*(){var i=this,l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,c=l===void 0||l;return this._accessState.access===Nt||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(h){i.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:c},function(f){delete f.action,delete f.callbackStamp,h(f)})})}),function(){return r.apply(this,arguments)})},{key:"geo",value:(n=A(function*(){try{var i=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield i.json()).geo}}catch(l){return console.error("geo lookup failed",l),{current:""}}}),function(){return n.apply(this,arguments)})},{key:"setNetworkTopology",value:(e=A(function*(i){var l=this;return I(),U(this._callState,"setNetworkTopology()"),new Promise(function(c,h){l.sendMessageToCallMachine({action:"set-network-topology",opts:i},function(f){f.error?h({error:f.error}):c({workerId:f.workerId})})})}),function(i){return e.apply(this,arguments)})},{key:"getNetworkTopology",value:(t=A(function*(){var i=this;return new Promise(function(l,c){i.needsLoad()&&l({topology:"none"}),i.sendMessageToCallMachine({action:"get-network-topology"},function(h){h.error?c({error:h.error}):l({topology:h.topology})})})}),function(){return t.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(i){if(I(),typeof i!="number"&&i!==!0&&i!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(i));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:i})}},{key:"on",value:function(i,l){return Ee.prototype.on.call(this,i,l)}},{key:"once",value:function(i,l){return Ee.prototype.once.call(this,i,l)}},{key:"off",value:function(i,l){return Ee.prototype.off.call(this,i,l)}},{key:"validateProperties",value:function(i){var l,c;if(i!=null&&(l=i.dailyConfig)!==null&&l!==void 0&&l.userMediaAudioConstraints){var h,f,v;N()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var b=i.inputSettings||{};b.audio=((h=i.inputSettings)===null||h===void 0?void 0:h.audio)||{},b.audio.settings=((f=i.inputSettings)===null||f===void 0||(v=f.audio)===null||v===void 0?void 0:v.settings)||{},b.audio.settings=T(T({},b.audio.settings),i.dailyConfig.userMediaAudioConstraints),i.inputSettings=b,delete i.dailyConfig.userMediaAudioConstraints}if(i!=null&&(c=i.dailyConfig)!==null&&c!==void 0&&c.userMediaVideoConstraints){var E,M,x;N()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var D=i.inputSettings||{};D.video=((E=i.inputSettings)===null||E===void 0?void 0:E.video)||{},D.video.settings=((M=i.inputSettings)===null||M===void 0||(x=M.video)===null||x===void 0?void 0:x.settings)||{},D.video.settings=T(T({},D.video.settings),i.dailyConfig.userMediaVideoConstraints),i.inputSettings=D,delete i.dailyConfig.userMediaVideoConstraints}for(var W in i){if(!Ue[W])throw new Error("unrecognized property '".concat(W,"'"));if(Ue[W].validate&&!Ue[W].validate(i[W],this))throw new Error("property '".concat(W,"': ").concat(Ue[W].help))}}},{key:"assembleMeetingUrl",value:function(){var i,l,c=T(T({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(i=this.properties.dailyConfig)!==null&&i!==void 0&&i.proxyUrl?encodeURIComponent((l=this.properties.dailyConfig)===null||l===void 0?void 0:l.proxyUrl):void 0}),h=c.url.match(/\?/)?"&":"?";return c.url+h+Object.keys(Ue).filter(function(f){return Ue[f].queryString&&c[f]!==void 0}).map(function(f){return"".concat(Ue[f].queryString,"=").concat(c[f])}).join("&")}},{key:"needsLoad",value:function(){return[Ln,Ai,Oe,we].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(i,l){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(i,l,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(i){this._messageChannel.forwardPackagedMessageToCallMachine(i,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(i,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(i)}},{key:"handleMessageFromCallMachine",value:function(i){switch(i.action){case Oa:this.sendMessageToCallMachine(T({action:Pa},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var l={action:Mt,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:xt(this.properties.dailyConfig)}};this.sendMessageToCallMachine(l),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Nn:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(i);break;case xa:var c,h=T({},i);delete h.internal,this._maxAppMessageSize=((c=i.internal)===null||c===void 0?void 0:c._maxAppMessageSize)||cn,this._joinedCallback&&(this._joinedCallback(i.participants),this._joinedCallback=null),this.emitDailyJSEvent(h);break;case Va:case Ba:if(this._callState===Oe)return;if(i.participant&&i.participant.session_id){var f=i.participant.local?"local":i.participant.session_id;if(this._callObjectMode){var v=this._callMachine().store;Ji(i.participant,v),Yi(i.participant,v),$i(i.participant,this._participants[f],v)}try{this.maybeParticipantTracksStopped(this._participants[f],i.participant),this.maybeParticipantTracksStarted(this._participants[f],i.participant),this.maybeEventRecordingStopped(this._participants[f],i.participant),this.maybeEventRecordingStarted(this._participants[f],i.participant)}catch(en){console.error("track events error",en)}this.compareEqualForParticipantUpdateEvent(i.participant,this._participants[f])||(this._participants[f]=T({},i.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(i))}break;case Ua:if(i.participant&&i.participant.session_id){var b=this._participants[i.participant.session_id];b&&this.maybeParticipantTracksStopped(b,null),delete this._participants[i.participant.session_id],this.emitDailyJSEvent(i)}break;case Ja:K(this._participantCounts,i.participantCounts)||(this._participantCounts=i.participantCounts,this.emitDailyJSEvent(i));break;case Ya:var E={access:i.access};i.awaitingAccess&&(E.awaitingAccess=i.awaitingAccess),K(this._accessState,E)||(this._accessState=E,this.emitDailyJSEvent(i));break;case $a:if(i.meetingSession){this._meetingSessionSummary=i.meetingSession,this.emitDailyJSEvent(i);var M=T(T({},i),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(M)}break;case Vn:var x;this._iframe&&!i.preserveIframe&&(this._iframe.src=""),this._updateCallState(we),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(i.errorMsg),this._loadedCallback=null),i.preserveIframe;var D=_r(i,sl);D!=null&&(x=D.error)!==null&&x!==void 0&&x.details&&(D.error.details=JSON.parse(D.error.details)),this._maybeSendToSentry(i),this._joinedCallback&&(this._joinedCallback(null,D),this._joinedCallback=null),this.emitDailyJSEvent(D);break;case Fa:this._callState!==we&&this._updateCallState(Oe),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(i);break;case"selected-devices-updated":i.devices&&this.emitDailyJSEvent(i);break;case hs:var W=i.threshold,he=i.quality;W===this._network.threshold&&he===this._network.quality||(this._network.quality=he,this._network.threshold=W,this.emitDailyJSEvent(i));break;case ms:i&&i.cpuLoadState&&this.emitDailyJSEvent(i);break;case vs:i&&i.faceCounts!==void 0&&this.emitDailyJSEvent(i);break;case ps:var Me=i.activeSpeaker;this._activeSpeaker.peerId!==Me.peerId&&(this._activeSpeaker.peerId=Me.peerId,this.emitDailyJSEvent({action:i.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var xe=i.show;this._showLocalVideo=xe,this.emitDailyJSEvent({action:i.action,show:xe});break;case fs:var st=i.enabled;this._activeSpeakerMode!==st&&(this._activeSpeakerMode=st,this.emitDailyJSEvent({action:i.action,enabled:this._activeSpeakerMode}));break;case Wa:case Ga:case za:this._waitingParticipants=i.allWaitingParticipants,this.emitDailyJSEvent({action:i.action,participant:i.participant});break;case ks:K(this._receiveSettings,i.receiveSettings)||(this._receiveSettings=i.receiveSettings,this.emitDailyJSEvent({action:i.action,receiveSettings:i.receiveSettings}));break;case xn:this._maybeUpdateInputSettings(i.inputSettings);break;case"send-settings-updated":K(this._sendSettings,i.sendSettings)||(this._sendSettings=i.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:i.action,sendSettings:i.sendSettings}));break;case"local-audio-level":this._localAudioLevel=i.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(i);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=i.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(i);break;case ss:var z=i.session_id;this._rmpPlayerState[z]=i.playerState,this.emitDailyJSEvent(i);break;case cs:delete this._rmpPlayerState[i.session_id],this.emitDailyJSEvent(i);break;case os:var ge=i.session_id,Fe=this._rmpPlayerState[ge];Fe&&this.compareEqualForRMPUpdateEvent(Fe,i.remoteMediaPlayerState)||(this._rmpPlayerState[ge]=i.remoteMediaPlayerState,this.emitDailyJSEvent(i));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(i);break;case qa:var _t=this._meetingSessionState.topology!==(i.meetingSessionState&&i.meetingSessionState.topology);this._meetingSessionState=mn(i.meetingSessionState,this._callObjectMode),(this._callObjectMode||_t)&&this.emitDailyJSEvent(i);break;case ls:this._isScreenSharing=!0,this.emitDailyJSEvent(i);break;case us:case ds:this._isScreenSharing=!1,this.emitDailyJSEvent(i);break;case Rn:case jn:case es:case ts:case ns:case Ka:case Xa:case Za:case Na:case Ra:case is:case as:case"test-completed":case gs:case rs:case ys:case _s:case bs:case ws:case Fn:case Ss:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(i);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(i,l){var c="record";i&&(l.local||l[c]!==!1||i[c]===l[c]||this.emitDailyJSEvent({action:jn}))}},{key:"maybeEventRecordingStarted",value:function(i,l){var c="record";i&&(l.local||l[c]!==!0||i[c]===l[c]||this.emitDailyJSEvent({action:Rn}))}},{key:"_trackStatePlayable",value:function(i){return!(!i||i.state!==Ea)}},{key:"_trackChanged",value:function(i,l){return(i==null?void 0:i.id)!==(l==null?void 0:l.id)}},{key:"maybeEventTrackStopped",value:function(i,l,c){var h,f,v=(h=l==null?void 0:l.tracks[i])!==null&&h!==void 0?h:null,b=(f=c==null?void 0:c.tracks[i])!==null&&f!==void 0?f:null,E=v==null?void 0:v.track;if(E){var M=this._trackStatePlayable(v),x=this._trackStatePlayable(b),D=this._trackChanged(E,b==null?void 0:b.track);M&&(x&&!D||this.emitDailyJSEvent({action:Qa,track:E,participant:c??l,type:i}))}}},{key:"maybeEventTrackStarted",value:function(i,l,c){var h,f,v=(h=l==null?void 0:l.tracks[i])!==null&&h!==void 0?h:null,b=(f=c==null?void 0:c.tracks[i])!==null&&f!==void 0?f:null,E=b==null?void 0:b.track;if(E){var M=this._trackStatePlayable(v),x=this._trackStatePlayable(b),D=this._trackChanged(v==null?void 0:v.track,E);x&&(M&&!D||this.emitDailyJSEvent({action:Ha,track:E,participant:c,type:i}))}}},{key:"maybeParticipantTracksStopped",value:function(i,l){if(i)for(var c in i.tracks)this.maybeEventTrackStopped(c,i,l)}},{key:"maybeParticipantTracksStarted",value:function(i,l){if(l)for(var c in l.tracks)this.maybeEventTrackStarted(c,i,l)}},{key:"compareEqualForRMPUpdateEvent",value:function(i,l){var c,h;return i.state===l.state&&((c=i.settings)===null||c===void 0?void 0:c.volume)===((h=l.settings)===null||h===void 0?void 0:h.volume)}},{key:"emitDailyJSEvent",value:function(i){try{i.callClientId=this.callClientId,this.emit(i.action,i)}catch(l){console.log("could not emit",i,l)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(i,l){return!!K(i,l)&&(!i.videoTrack||!l.videoTrack||i.videoTrack.id===l.videoTrack.id&&i.videoTrack.muted===l.videoTrack.muted&&i.videoTrack.enabled===l.videoTrack.enabled)&&(!i.audioTrack||!l.audioTrack||i.audioTrack.id===l.audioTrack.id&&i.audioTrack.muted===l.audioTrack.muted&&i.audioTrack.enabled===l.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return N()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(i){this._updateCallState(this._callState,i)}},{key:"_updateCallState",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(i!==this._callState||l!==this._isPreparingToJoin){var c=this._callState,h=this._isPreparingToJoin;this._callState=i,this._isPreparingToJoin=l;var f=this._callState===Le;this.updateShowAndroidOngoingMeetingNotification(f);var v=jt(c,h),b=jt(this._callState,this._isPreparingToJoin);v!==b&&(this.updateKeepDeviceAwake(b),this.updateDeviceAudioMode(b),this.updateNoOpRecordingEnsuringBackgroundContinuity(b))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Xi,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Nt},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=mn(Ki,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=cn,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(i){N()&&this.nativeUtils().setKeepDeviceAwake(i,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(i){if(N()&&!this.disableReactNativeAutoDeviceManagement("audio")){var l=i?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(l)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(i){if(N()&&this.nativeUtils().setShowOngoingMeetingNotification){var l,c,h,f;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var v=this.properties.reactNativeConfig.androidInCallNotification;l=v.title,c=v.subtitle,h=v.iconName,f=v.disableForCustomOverride}f&&(i=!1),this.nativeUtils().setShowOngoingMeetingNotification(i,l,c,h,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(i){N()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(i)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var i,l;if(N()){var c=(i=this._callMachine())===null||i===void 0||(l=i.store)===null||l===void 0?void 0:l.getState();for(var h in c==null?void 0:c.streams){var f=c.streams[h];f&&f.pendingTrack&&f.pendingTrack.kind==="audio"&&(f.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(i){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[i]}},{key:"absoluteUrl",value:function(i){if(i!==void 0){var l=document.createElement("a");return l.href=i,l.href}}},{key:"sayHello",value:function(){var i="hello, world.";return console.log(i),i}},{key:"_logUseAfterDestroy",value:function(){var i=Object.values(Be)[0];if(this.needsLoad())if(i&&!i.needsLoad()){var l={action:Mt,level:"error",code:this.strictMode?9995:9997};i.sendMessageToCallMachine(l)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var c={action:Mt,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(c,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var i=0,l=Object.values(Be);i<l.length;i++){var c=l[i];c._callMachineInitialized?(c.sendMessageToCallMachine({action:Mt,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),c._delayDuplicateInstanceLog=!1):c._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(i){var l,c,h,f,v,b;if(!((l=i.error)!==null&&l!==void 0&&l.type&&(![Aa,Ma,Dn].includes(i.error.type)||i.error.type===Dn&&i.error.msg.includes("deleted")))){var E=(c=this.properties)!==null&&c!==void 0&&c.url?new URL(this.properties.url):void 0,M="production";E&&E.host.includes(".staging.daily")&&(M="staging");var x,D,W,he,Me,xe=[xo(),Ro(),rc(),tc(),oc(),lc(),Fo(),cc()].filter(function($s){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes($s.name)}),st=new Yo({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:zo,stackParser:ec,integrations:xe,environment:M}),z=new Re;if(z.setClient(st),st.init(),this.session_id&&z.setExtra("sessionId",this.session_id),this.properties){var ge=T({},this.properties);ge.userName=ge.userName?"[Filtered]":void 0,ge.userData=ge.userData?"[Filtered]":void 0,ge.token=ge.token?"[Filtered]":void 0,z.setExtra("properties",ge)}if(E){var Fe=E.searchParams.get("domain");if(!Fe){var _t=E.host.match(/(.*?)\./);Fe=_t&&_t[1]||""}Fe&&z.setTag("domain",Fe)}i.error&&(z.setTag("fatalErrorType",i.error.type),z.setExtra("errorDetails",i.error.details),!((x=i.error.details)===null||x===void 0)&&x.uri&&z.setTag("serverAddress",i.error.details.uri),!((D=i.error.details)===null||D===void 0)&&D.workerGroup&&z.setTag("workerGroup",i.error.details.workerGroup),!((W=i.error.details)===null||W===void 0)&&W.geoGroup&&z.setTag("geoGroup",i.error.details.geoGroup),!((he=i.error.details)===null||he===void 0)&&he.on&&z.setTag("connectionAttempt",i.error.details.on),(Me=i.error.details)!==null&&Me!==void 0&&Me.bundleUrl&&(z.setTag("bundleUrl",i.error.details.bundleUrl),z.setTag("bundleError",i.error.details.sourceError.type))),z.setTags({callMode:this._callObjectMode?N()?"reactNative":(h=this.properties)!==null&&h!==void 0&&(f=h.dailyConfig)!==null&&f!==void 0&&(v=f.callMode)!==null&&v!==void 0&&v.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ae.version()});var en=((b=i.error)===null||b===void 0?void 0:b.msg)||i.errorMsg;z.captureException(new Error(en))}}},{key:"_callMachine",value:function(){var i,l,c;return(i=window._daily)===null||i===void 0||(l=i.instances)===null||l===void 0||(c=l[this.callClientId])===null||c===void 0?void 0:c.callMachine}},{key:"_maybeUpdateInputSettings",value:function(i){if(!K(this._inputSettings,i)){var l=this._getInputSettings();this._inputSettings=i;var c=this._getInputSettings();K(l,c)||this.emitDailyJSEvent({action:xn,inputSettings:c})}}}],[{key:"supportedBrowser",value:function(){if(N())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var i=Zs.getParser(re());return{supported:!!Ri(),mobile:i.getPlatformType()==="mobile",name:i.getBrowserName(),version:i.getBrowserVersion(),supportsFullscreen:!!Ni(),supportsScreenShare:!!jc(),supportsSfu:!!Ri(),supportsVideoProcessing:Cs(),supportsAudioProcessing:Ms()}}},{key:"version",value:function(){return"0.75.2"}},{key:"createCallObject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return i.layout="none",new ae(null,i)}},{key:"wrap",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(I(),!i||!i.contentWindow||typeof i.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return l.layout||(l.customLayout?l.layout="custom-v1":l.layout="browser"),new ae(i,l)}},{key:"createFrame",value:function(i,l){var c,h;I(),i&&l?(c=i,h=l):i&&i.append?(c=i,h={}):(c=document.body,h=i||{});var f=h.iframeStyle;f||(f=c===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var v=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?v.allow="microphone, camera":v.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",v.style.visibility="hidden",c.appendChild(v),v.style.visibility=null,Object.keys(f).forEach(function(b){return v.style[b]=f[b]}),h.layout||(h.customLayout?h.layout="custom-v1":h.layout="browser");try{return new ae(v,h)}catch(b){throw c.removeChild(v),b}}},{key:"createTransparentFrame",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I();var l=document.createElement("iframe");return l.allow="microphone; camera; autoplay",l.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(l),i.layout||(i.layout="custom-v1"),ae.wrap(l,i)}},{key:"getCallInstance",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return i?Be[i]:Object.values(Be)[0]}}]),ae}();function Qe(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",r),n[r]=Ce;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var a=window._daily.instances[e].customCallbacks||{};a.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=a,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function U(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==Le){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function jt(t,e){return[$t,Le].includes(t)||e}function hn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(jt(t,e)){var a="".concat(n," not supported after joining a meeting.");throw r&&(a+=" ".concat(r)),console.error(a),new Error(a)}}function Pt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function gn(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function se(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function Z(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function I(){if(N())throw new Error("This daily-js method is not currently supported in React Native")}function lt(){if(!N())throw new Error("This daily-js method is only supported in React Native")}function Ns(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),K(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Rs(t,e){for(var n=e.allowAllParticipantsKey,r=function(m){var w=["local"];return n||w.push("*"),m&&!w.includes(m)},a=function(m){return!!(m.layer===void 0||Number.isInteger(m.layer)&&m.layer>=0||m.layer==="inherit")},s=function(m){return!!m&&!(m.video&&!a(m.video))&&!(m.screenVideo&&!a(m.screenVideo))},o=0,u=Object.entries(t);o<u.length;o++){var d=_e(u[o],2),p=d[0],g=d[1];if(!r(p)||!s(g))return!1}return!0}function js(t){if(F(t)!=="object")return!1;for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_e(n[e],2),a=r[0],s=r[1];switch(a){case"video":if(F(s)!=="object")return!1;for(var o=0,u=Object.entries(s);o<u.length;o++){var d=_e(u[o],2),p=d[0],g=d[1];switch(p){case"processor":if(!dl(g))return!1;break;case"settings":if(!ta(g))return!1;break;default:return!1}}break;case"audio":if(F(s)!=="object")return!1;for(var m=0,w=Object.entries(s);m<w.length;m++){var S=_e(w[m],2),_=S[0],k=S[1];switch(_){case"processor":if(!ul(k))return!1;break;case"settings":if(!ta(k))return!1;break;default:return!1}}break;default:return!1}}return!0}function xs(t,e,n){var r,a=[];t.video&&t.video.processor&&(Cs((r=e==null?void 0:e.useLegacyVideoProcessor)!==null&&r!==void 0&&r)||(t.video.settings?delete t.video.processor:delete t.video,a.push("video"))),t.audio&&t.audio.processor&&(Ms()||(t.audio.settings?delete t.audio.processor:delete t.audio,a.push("audio"))),a.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(a.join(", "))),t.audio&&t.audio.settings&&(t.audio.settings.customTrack?(n.audioTrack=t.audio.settings.customTrack,t.audio.settings={customTrack:Ce}):delete n.audioTrack),t.video&&t.video.settings&&(t.video.settings.customTrack?(n.videoTrack=t.video.settings.customTrack,t.video.settings={customTrack:Ce}):delete n.videoTrack)}function ul(t){if(N())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type"];return!!t&&F(t)==="object"&&(Object.keys(t).filter(function(n){return!e.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> audio -> processor : ".concat(n)),delete t[n]}),!!function(n){return typeof n!="string"?!1:Object.values(Es).includes(n)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(t.type))}function dl(t){if(N())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type","config"];return!t||F(t)!=="object"||!function(n){return typeof n!="string"?!1:Object.values(Rt).includes(n)?!0:(console.error("inputSettings video processor type invalid"),!1)}(t.type)||t.config&&(F(t.config)!=="object"||!function(n,r){var a=Object.keys(r);if(a.length===0)return!0;var s="invalid object in inputSettings -> video -> processor -> config";switch(n){case Rt.BGBLUR:return a.length>1||a[0]!=="strength"?(console.error(s),!1):!(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))||(console.error("".concat(s,"; expected: {0 < strength <= 1}, got: ").concat(r.strength)),!1);case Rt.BGIMAGE:return!(r.source!==void 0&&!function(o){if(o.source==="default")return o.type="default",!0;if(o.source instanceof ArrayBuffer)return!0;if(Ft(o.source))return o.type="url",!!function(p){var g=new URL(p),m=g.pathname;if(g.protocol==="data:")try{var w=m.substring(m.indexOf(":")+1,m.indexOf(";")).split("/")[1];return un.includes(w)}catch(_){return console.error("failed to deduce blob content type",_),!1}var S=m.split(".").at(-1).toLowerCase().trim();return un.includes(S)}(o.source)||(console.error("invalid image type; supported types: [".concat(un.join(", "),"]")),!1);return u=o.source,d=Number(u),isNaN(d)||!Number.isInteger(d)||d<=0||d>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(o.type="daily-preselect",!0);var u,d}(r));default:return!0}}(t.type,t.config))?!1:(Object.keys(t).filter(function(n){return!e.includes(n)}).forEach(function(n){console.warn("invalid key inputSettings -> video -> processor : ".concat(n)),delete t[n]}),!0)}function ta(t){return F(t)==="object"&&(!t.customTrack||t.customTrack instanceof MediaStreamTrack)}function Wn(){var t=Object.values(Rt).join(" | "),e=Object.values(Es).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function Fs(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Ca).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function Vs(){return"customIntegrations should be an object of type ".concat(JSON.stringify(qn),".")}function Bs(t){if(t&&F(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(Gt),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=_e(n[e],1)[0],a=0,s=Object.entries(t[r]);a<s.length;a++){var o=_e(s[a],2),u=o[0],d=o[1],p=Gt.id[u];if(!p)return console.error("customTrayButton does not support key ".concat(u)),!1;switch(u){case"iconPath":case"iconPathDarkMode":if(!Ft(d))return console.error("customTrayButton ".concat(u," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(d))return console.error("customTrayButton ".concat(u," should be ").concat(p,". Got: ").concat(d)),!1;break;default:if(F(d)!==p)return console.error("customTrayButton ".concat(u," should be a ").concat(p,".")),!1}}return!0}function Us(t){if(!t||t&&F(t)!=="object"||Array.isArray(t))return console.error(Vs()),!1;for(var e=function(m){return"".concat(m," should be ").concat(qn.id[m])},n=function(m,w){return console.error("customIntegration ".concat(m,": ").concat(w))},r=0,a=Object.entries(t);r<a.length;r++){var s=_e(a[r],1)[0];if(!("label"in t[s]))return n(s,"label is required"),!1;if(!("location"in t[s]))return n(s,"location is required"),!1;if(!("src"in t[s])&&!("srcdoc"in t[s]))return n(s,"src or srcdoc is required"),!1;for(var o=0,u=Object.entries(t[s]);o<u.length;o++){var d=_e(u[o],2),p=d[0],g=d[1];switch(p){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof g!="string")return n(s,e(p)),!1;break;case"iconURL":if(!Ft(g))return n(s,"".concat(p," should be a url")),!1;break;case"src":if("srcdoc"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(!Ft(g))return n(s,'src "'.concat(g,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(typeof g!="string")return n(s,e(p)),!1;break;case"location":if(!["main","sidebar"].includes(g))return n(s,e(p)),!1;break;case"controlledBy":if(g!=="*"&&g!=="owners"&&(!Array.isArray(g)||g.some(function(m){return typeof m!="string"})))return n(s,e(p)),!1;break;case"shared":if((!Array.isArray(g)||g.some(function(m){return typeof m!="string"}))&&g!=="owners"&&typeof g!="boolean")return n(s,e(p)),!1;break;default:if(!qn.id[p])return console.error("customIntegration does not support key ".concat(p)),!1}}}return!0}function Js(t,e){if(e===void 0)return!1;switch(F(e)){case"string":return F(t)===e;case"object":if(F(t)!=="object")return!1;for(var n in t)if(!Js(t[n],e[n]))return!1;return!0;default:return!1}}function na(t,e){var n=t.sessionId,r=t.toEndPoint,a=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(a&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function ra(t){if(F(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(Bn).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Bn));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function ia(t,e,n){return!(typeof t!="number"||t<e||t>n)}function mn(t,e){return t&&!e&&delete t.data,t}const pl=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:Ta,DAILY_ACCESS_LEVEL_LOBBY:gc,DAILY_ACCESS_LEVEL_NONE:mc,DAILY_ACCESS_UNKNOWN:Nt,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:Mc,DAILY_CAMERA_ERROR_CAM_IN_USE:Tc,DAILY_CAMERA_ERROR_CONSTRAINTS:Ic,DAILY_CAMERA_ERROR_MIC_IN_USE:Cc,DAILY_CAMERA_ERROR_NOT_FOUND:Pc,DAILY_CAMERA_ERROR_PERMISSIONS:Ac,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:Oc,DAILY_CAMERA_ERROR_UNKNOWN:Lc,DAILY_EVENT_ACCESS_STATE_UPDATED:Ya,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:ps,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:fs,DAILY_EVENT_APP_MSG:is,DAILY_EVENT_CAMERA_ERROR:Ra,DAILY_EVENT_CPU_LOAD_CHANGE:ms,DAILY_EVENT_ERROR:Vn,DAILY_EVENT_EXIT_FULLSCREEN:pt,DAILY_EVENT_FACE_COUNTS_UPDATED:vs,DAILY_EVENT_FULLSCREEN:dt,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:Pa,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:Oa,DAILY_EVENT_INPUT_SETTINGS_UPDATED:xn,DAILY_EVENT_JOINED_MEETING:xa,DAILY_EVENT_JOINING_MEETING:ja,DAILY_EVENT_LANG_UPDATED:Ss,DAILY_EVENT_LEFT_MEETING:Fa,DAILY_EVENT_LIVE_STREAMING_ERROR:ws,DAILY_EVENT_LIVE_STREAMING_STARTED:ys,DAILY_EVENT_LIVE_STREAMING_STOPPED:bs,DAILY_EVENT_LIVE_STREAMING_UPDATED:_s,DAILY_EVENT_LOADED:Nn,DAILY_EVENT_LOADING:La,DAILY_EVENT_LOAD_ATTEMPT_FAILED:Da,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:ds,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:ls,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:us,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:Dc,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:qa,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:$a,DAILY_EVENT_NETWORK_CONNECTION:gs,DAILY_EVENT_NETWORK_QUALITY_CHANGE:hs,DAILY_EVENT_NONFATAL_ERROR:Fn,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:Ja,DAILY_EVENT_PARTICIPANT_JOINED:Va,DAILY_EVENT_PARTICIPANT_LEFT:Ua,DAILY_EVENT_PARTICIPANT_UPDATED:Ba,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:ks,DAILY_EVENT_RECORDING_DATA:rs,DAILY_EVENT_RECORDING_ERROR:ts,DAILY_EVENT_RECORDING_STARTED:Rn,DAILY_EVENT_RECORDING_STATS:es,DAILY_EVENT_RECORDING_STOPPED:jn,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:ns,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:ss,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:cs,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:os,DAILY_EVENT_STARTED_CAMERA:Na,DAILY_EVENT_THEME_UPDATED:Ia,DAILY_EVENT_TRACK_STARTED:Ha,DAILY_EVENT_TRACK_STOPPED:Qa,DAILY_EVENT_TRANSCRIPTION_ERROR:Za,DAILY_EVENT_TRANSCRIPTION_MSG:as,DAILY_EVENT_TRANSCRIPTION_STARTED:Ka,DAILY_EVENT_TRANSCRIPTION_STOPPED:Xa,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:Wa,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:za,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:Ga,DAILY_FATAL_ERROR_CONNECTION:Aa,DAILY_FATAL_ERROR_EJECTED:yc,DAILY_FATAL_ERROR_EOL:Ma,DAILY_FATAL_ERROR_EXP_ROOM:wc,DAILY_FATAL_ERROR_EXP_TOKEN:Sc,DAILY_FATAL_ERROR_MEETING_FULL:kc,DAILY_FATAL_ERROR_NBF_ROOM:_c,DAILY_FATAL_ERROR_NBF_TOKEN:bc,DAILY_FATAL_ERROR_NOT_ALLOWED:Ec,DAILY_FATAL_ERROR_NO_ROOM:Dn,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:vc,DAILY_RECEIVE_SETTINGS_BASE_KEY:Ca,DAILY_STATE_ERROR:we,DAILY_STATE_JOINED:Le,DAILY_STATE_JOINING:$t,DAILY_STATE_LEFT:Oe,DAILY_STATE_NEW:Ln,DAILY_TRACK_STATE_BLOCKED:uc,DAILY_TRACK_STATE_INTERRUPTED:hc,DAILY_TRACK_STATE_LOADING:fc,DAILY_TRACK_STATE_OFF:dc,DAILY_TRACK_STATE_PLAYABLE:Ea,DAILY_TRACK_STATE_SENDABLE:pc,default:ll},Symbol.toStringTag,{value:"Module"})),gl=qs(pl);export{fl as c,hl as g,gl as r};
//# sourceMappingURL=@daily-co-CRt2XSsO.js.map
