{"version":3,"file":"StaffRequestTable-DHRf05Hf.js","sources":["../../../client/src/components/StaffRequestTable.tsx"],"sourcesContent":["import React from 'react';\n\ninterface StaffRequestTableProps {\n  filteredRequests: any[];\n  pendingStatus: Record<string, string>;\n  setPendingStatus: React.Dispatch<React.SetStateAction<Record<string, string>>>;\n  statusOptions: string[];\n  handleStatusChange: (status: string, reqId: number) => Promise<void>;\n  setSelectedRequest: (req: any) => void;\n  handleOpenMessage: () => void;\n  statusColor: (status: string) => string;\n}\n\nconst StaffRequestTable: React.FC<StaffRequestTableProps> = ({\n  filteredRequests,\n  pendingStatus,\n  setPendingStatus,\n  statusOptions,\n  handleStatusChange,\n  setSelectedRequest,\n  handleOpenMessage,\n  statusColor,\n}) => (\n  <div className=\"hidden sm:block overflow-x-auto\">\n    <table className=\"min-w-full text-sm\">\n      <thead>\n        <tr className=\"bg-blue-100 text-blue-900\">\n          <th className=\"py-2 px-3 text-left\">Room</th>\n          <th className=\"py-2 px-3 text-left\">Order ID</th>\n          <th className=\"py-2 px-6 text-left w-3/5\">Content</th>\n          <th className=\"py-2 px-3 text-left\">Time</th>\n          <th className=\"py-2 px-2 text-left w-1/12\">Status</th>\n          <th className=\"py-2 px-3 text-left\">Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        {(Array.isArray(filteredRequests) ? [...filteredRequests].sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime()) : []).map(req => (\n          <tr key={req.id} className=\"border-b hover:bg-blue-50\">\n            <td className=\"py-2 px-3 font-semibold\">{req.room_number}</td>\n            <td className=\"py-2 px-3\">{req.orderId || req.id}</td>\n            <td className=\"py-2 px-6 whitespace-pre-line break-words max-w-4xl\">{req.request_content}</td>\n            <td className=\"py-2 px-3\">\n              {req.created_at && (\n                <span className=\"block whitespace-nowrap\">{new Date(req.created_at).toLocaleDateString()}</span>\n              )}\n              {req.created_at && (\n                <span className=\"block whitespace-nowrap text-xs text-gray-500\">{new Date(req.created_at).toLocaleTimeString()}</span>\n              )}\n            </td>\n            <td className=\"py-2 px-2\">\n              <span className={`px-2 py-1 rounded-full text-xs font-semibold ${statusColor(req.status)} break-words whitespace-normal block text-center`}>{req.status}</span>\n            </td>\n            <td className=\"py-2 px-3 space-x-2\">\n              <select\n                className=\"border rounded px-2 py-1 text-xs\"\n                value={pendingStatus[req.id] ?? req.status}\n                onChange={e => setPendingStatus(s => ({ ...s, [req.id]: e.target.value }))}\n              >\n                {statusOptions.filter(opt => opt !== 'Tất cả').map(opt => (\n                  <option key={opt} value={opt}>{opt}</option>\n                ))}\n              </select>\n              <button\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-semibold\"\n                onClick={async () => {\n                  const newStatus = pendingStatus[req.id];\n                  if (newStatus && newStatus !== req.status) {\n                    await handleStatusChange(newStatus, req.id);\n                    setPendingStatus(s => {\n                      const { [req.id]: _, ...rest } = s;\n                      return rest;\n                    });\n                  }\n                }}\n              >Cập Nhật</button>\n              <button className=\"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-semibold\" onClick={() => { setSelectedRequest(req); handleOpenMessage(); }}>Nhắn khách</button>\n            </td>\n          </tr>\n        ))}\n        {filteredRequests.length === 0 && (\n          <tr>\n            <td colSpan={6} className=\"py-8 text-center text-gray-500\">Không có yêu cầu nào</td>\n          </tr>\n        )}\n      </tbody>\n    </table>\n  </div>\n);\n\nexport default StaffRequestTable; "],"names":["StaffRequestTable","filteredRequests","pendingStatus","setPendingStatus","statusOptions","handleStatusChange","setSelectedRequest","handleOpenMessage","statusColor","jsxs","jsx","a","b","req","e","s","opt","newStatus","_","rest"],"mappings":"wEAaA,MAAMA,EAAsD,CAAC,CAC3D,iBAAAC,EACA,cAAAC,EACA,iBAAAC,EACA,cAAAC,EACA,mBAAAC,EACA,mBAAAC,EACA,kBAAAC,EACA,YAAAC,CACF,UACG,MAAI,CAAA,UAAU,kCACb,SAACC,EAAA,KAAA,QAAA,CAAM,UAAU,qBACf,SAAA,CAAAC,MAAC,QACC,CAAA,SAAAD,EAAAA,KAAC,KAAG,CAAA,UAAU,4BACZ,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,sBAAsB,SAAI,OAAA,EACvCA,EAAA,IAAA,KAAA,CAAG,UAAU,sBAAsB,SAAQ,WAAA,EAC3CA,EAAA,IAAA,KAAA,CAAG,UAAU,4BAA4B,SAAO,UAAA,EAChDA,EAAA,IAAA,KAAA,CAAG,UAAU,sBAAsB,SAAI,OAAA,EACvCA,EAAA,IAAA,KAAA,CAAG,UAAU,6BAA6B,SAAM,SAAA,EAChDA,EAAA,IAAA,KAAA,CAAG,UAAU,sBAAsB,SAAM,QAAA,CAAA,CAAA,CAAA,CAC5C,CACF,CAAA,SACC,QACG,CAAA,SAAA,EAAA,MAAM,QAAQT,CAAgB,EAAI,CAAC,GAAGA,CAAgB,EAAE,KAAK,CAACU,EAAGC,IAAM,IAAI,KAAKA,EAAE,UAAU,EAAE,QAAQ,EAAI,IAAI,KAAKD,EAAE,UAAU,EAAE,QAAS,CAAA,EAAI,CAAA,GAAI,IAAIE,GACrJJ,EAAA,KAAA,KAAA,CAAgB,UAAU,4BACzB,SAAA,CAAAC,EAAA,IAAC,KAAG,CAAA,UAAU,0BAA2B,SAAAG,EAAI,YAAY,QACxD,KAAG,CAAA,UAAU,YAAa,SAAIA,EAAA,SAAWA,EAAI,GAAG,EAChDH,EAAA,IAAA,KAAA,CAAG,UAAU,sDAAuD,WAAI,gBAAgB,EACzFD,EAAAA,KAAC,KAAG,CAAA,UAAU,YACX,SAAA,CAAII,EAAA,YACFH,EAAAA,IAAA,OAAA,CAAK,UAAU,0BAA2B,SAAI,IAAA,KAAKG,EAAI,UAAU,EAAE,mBAAqB,CAAA,CAAA,EAE1FA,EAAI,YACFH,EAAAA,IAAA,OAAA,CAAK,UAAU,gDAAiD,SAAI,IAAA,KAAKG,EAAI,UAAU,EAAE,mBAAA,CAAqB,CAAA,CAAA,EAEnH,EACCH,MAAA,KAAA,CAAG,UAAU,YACZ,eAAC,OAAK,CAAA,UAAW,gDAAgDF,EAAYK,EAAI,MAAM,CAAC,mDAAqD,SAAAA,EAAI,MAAO,CAAA,EAC1J,EACAJ,EAAAA,KAAC,KAAG,CAAA,UAAU,sBACZ,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,UAAU,mCACV,MAAOR,EAAcW,EAAI,EAAE,GAAKA,EAAI,OACpC,SAAUC,GAAKX,EAAiBY,IAAM,CAAE,GAAGA,EAAG,CAACF,EAAI,EAAE,EAAGC,EAAE,OAAO,KAAQ,EAAA,EAExE,SAAcV,EAAA,OAAcY,GAAAA,IAAQ,QAAQ,EAAE,IAC7CA,GAAAN,EAAA,IAAC,SAAiB,CAAA,MAAOM,EAAM,SAAAA,CAAA,EAAlBA,CAAsB,CACpC,CAAA,CACH,EACAN,EAAA,IAAC,SAAA,CACC,UAAU,mFACV,QAAS,SAAY,CACb,MAAAO,EAAYf,EAAcW,EAAI,EAAE,EAClCI,GAAaA,IAAcJ,EAAI,SAC3B,MAAAR,EAAmBY,EAAWJ,EAAI,EAAE,EAC1CV,EAAsBY,GAAA,CACd,KAAA,CAAE,CAACF,EAAI,EAAE,EAAGK,EAAG,GAAGC,GAASJ,EAC1B,OAAAI,CAAA,CACR,EAEL,EACD,SAAA,UAAA,CAAQ,EACRT,EAAAA,IAAA,SAAA,CAAO,UAAU,qFAAqF,QAAS,IAAM,CAAEJ,EAAmBO,CAAG,EAAqBN,EAAA,CAAA,EAAM,SAAU,YAAA,CAAA,CAAA,CACrL,CAAA,CAAA,GAvCOM,EAAI,EAwCb,CACD,EACAZ,EAAiB,SAAW,GAC3BS,EAAA,IAAC,KACC,CAAA,SAAAA,EAAA,IAAC,KAAG,CAAA,QAAS,EAAG,UAAU,iCAAiC,SAAA,sBAAA,CAAoB,CACjF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAAA,CACF,CACF,CAAA"}